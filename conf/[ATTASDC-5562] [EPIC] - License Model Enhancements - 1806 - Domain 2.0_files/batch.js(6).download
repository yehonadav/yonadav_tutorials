;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:feedback-issue-collector', location = '/static/page/sidebar/ancillary/feedback/issue-collector.js' */
(function(f){var e=require("jira/loading/loading");var g=false;var a=d;function d(){if(g){return}b();window.ATL_JQ_PAGE_PROPS={triggerFunction:function(h){a=h;_.defer(function(){c(true);h()})}};f.ajax({url:"https://jira.atlassian.com/s/d41d8cd98f00b204e9800998ecf8427e/en_UK-3tj2he/6322/131/1.4.11/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=55320d27",type:"get",cache:true,timeout:10000,dataType:"script"}).fail(function(h){c();JIRA.Messages.showErrorMsg(JIRA.SmartAjax.buildSimpleErrorContent(h),{closeable:true})})}function b(){g=true;AJS.dim();e.showLoadingIndicator()}function c(h){g=false;if(h){AJS.dim.$dim.css("transition","none")}AJS.undim();if(h&&AJS.dim.$dim){AJS.dim.$dim.css("transition","")}e.hideLoadingIndicator()}f(function(){JIRA.API.getSidebar().done(function(m){function k(r){var q=f(r);q.tipsy(j).tipsy("show");var s=q.data("tipsy")&&q.data("tipsy").$tip;s.css({opacity:""}).addClass("tooltip-shown")}function n(s,r){var q=f(s);var t=q.data("tipsy")&&q.data("tipsy").$tip;if(t){t.on("transitionend",function(){q.tipsy("hide")});t.removeClass("tooltip-shown");if(r){t.remove();q.removeData("tipsy")}}}var p=WRM.data.claim("com.atlassian.jira.jira-projects-plugin:feedback-issue-collector.data");if(p&&p.isFeedbackButtonEnabled){var i=m.getAUISidebar();var l=m.getGroup("jira-projects-ancillary-group");if(l===undefined){return}var h=l.getItem("com.atlassian.jira.jira-projects-plugin:sidebar-feedback-link")||l.getItem("com.pyxis.greenhopper.jira:sidebar-feedback-link");var o=h.ui.link;o.data("custom-tooltip","We\'d love to hear your thoughts on JIRA.");var j={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){return f(this).data("custom-tooltip")}};i.on("expand-end collapse-end",function(){n(o,true)});o.on("mouseenter focus",function(q){k(q.currentTarget)});o.on("click blur mouseleave",function(q){n(q.currentTarget)});h.on("before:select",function(q){q.preventDefault()})}})});f(document).on("click",".jira-projects-feedback-collector",function(h){h.preventDefault();a()})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = '/sidebar/navigation/items.js' */
AJS.$(function(a){a(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(b){b.preventDefault();AJS.navigation(a(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.soy' */
// This file was automatically generated from changeProjectTypeDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.project.ChangeType.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.project == 'undefined') { JIRA.Templates.project = {}; }
if (typeof JIRA.Templates.project.ChangeType == 'undefined') { JIRA.Templates.project.ChangeType = {}; }


JIRA.Templates.project.ChangeType.changeProjectTypeDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="change-project-type-dialog-' + soy.$$escapeHtml(opt_data.projectId) + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Change project type") + '</h2></header><div class="aui-dialog2-content"></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions form-footer"><div class="icon throbber"></div><button class="aui-button aui-button-primary dialog-change-button hidden">' + soy.$$escapeHtml("Change") + '</button><button class="aui-button aui-button-link dialog-close-button">' + soy.$$escapeHtml("Cancel") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeDialog.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeDialog';
}


JIRA.Templates.project.ChangeType.changeProjectTypeForm = function(opt_data, opt_ignored) {
  var output = '<form class="aui change-project-type-form"><div class="form-body"><div class="aui-group project-type-change-group"><div class="aui-item">' + JIRA.Templates.project.ChangeType.projectAvatar(opt_data) + '</div><div class="aui-item project-type-select-group">' + JIRA.Templates.project.ChangeType.projectTypeDropdown({projectTypeKey: opt_data.project.projectTypeKey, projectTypes: opt_data.projectTypes}) + '</div></div></div></form><p>';
  var helpLinkAnchor__soy21 = '<a href=' + soy.$$escapeHtml(opt_data.helpLink) + ' target="_blank">';
  output += soy.$$filterNoAutoescape(AJS.format("If you change the project type, you\x27\x27ll also change what your users can see and do with the project. {0}Check the differences here{1}",helpLinkAnchor__soy21,'</a>')) + '</p>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.changeProjectTypeForm.soyTemplateName = 'JIRA.Templates.project.ChangeType.changeProjectTypeForm';
}


JIRA.Templates.project.ChangeType.projectTypeDropdown = function(opt_data, opt_ignored) {
  var output = '<select class="project-type-select select" name="project-type">';
  var projectTypeList30 = opt_data.projectTypes;
  var projectTypeListLen30 = projectTypeList30.length;
  for (var projectTypeIndex30 = 0; projectTypeIndex30 < projectTypeListLen30; projectTypeIndex30++) {
    var projectTypeData30 = projectTypeList30[projectTypeIndex30];
    output += '<option class="imagebacked" data-icon="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeData30.icon) + '" value="' + soy.$$escapeHtml(projectTypeData30.key) + '" ' + ((projectTypeData30.key == opt_data.projectTypeKey) ? ' selected ' : '') + '>' + soy.$$escapeHtml(projectTypeData30.formattedKey) + '</option>';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectTypeDropdown.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectTypeDropdown';
}


JIRA.Templates.project.ChangeType.updateTargetElement = function(opt_data, opt_ignored) {
  return '<img src="data:image/svg+xml;base64,' + soy.$$escapeHtml(opt_data.icon) + '" class="project-type-icon" /><span>' + soy.$$escapeHtml(opt_data.formattedKey) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.updateTargetElement.soyTemplateName = 'JIRA.Templates.project.ChangeType.updateTargetElement';
}


JIRA.Templates.project.ChangeType.projectAvatar = function(opt_data, opt_ignored) {
  return '<div class="project-avatar-header"><span class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.project.avatarUrls['48x48']) + '" alt="' + soy.$$escapeHtml(opt_data.project.name) + '"></span></span><div class="project-header" title="' + soy.$$escapeHtml(opt_data.project.name) + '">' + soy.$$escapeHtml(opt_data.project.name) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.projectAvatar.soyTemplateName = 'JIRA.Templates.project.ChangeType.projectAvatar';
}


JIRA.Templates.project.ChangeType.dialogSpinner = function(opt_data, opt_ignored) {
  return '<div class="dialog-spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.dialogSpinner.soyTemplateName = 'JIRA.Templates.project.ChangeType.dialogSpinner';
}


JIRA.Templates.project.ChangeType.successMsg = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(AJS.format("You have just changed {0} to a {1} project type.",opt_data.projectName,opt_data.projectTypeName));
};
if (goog.DEBUG) {
  JIRA.Templates.project.ChangeType.successMsg.soyTemplateName = 'JIRA.Templates.project.ChangeType.successMsg';
}
;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.js' */
define("jira/project/admin/change-project-type-dialog",["jira/util/formatter","jquery","underscore","jira/message","jira/ajs/select/single-select","wrm/context-path"],function(formatter,$,_,message,SingleSelect,contextPath){function _getProjectInformation(projectId){return $.ajax({url:contextPath()+"/rest/internal/2/projects/"+projectId+"/changetypedata",dataType:"json",contentType:"application/json",type:"GET"})}function handleChangeProjectType(options){var $projectTypeSelect=$(".project-type-select",options.dialogBody);var selectedProjectTypeKey=$projectTypeSelect.val()[0];var selectedProjectType=_.findWhere(options.projectTypes,{key:selectedProjectTypeKey});$(".dialog-change-button",options.dialogBody).attr("disabled","disabled");$($.ajax({url:contextPath()+"/rest/api/2/project/"+options.projectId+"/type/"+selectedProjectTypeKey,dataType:"json",contentType:"application/json",type:"PUT"}).done(function(){options.changeProjectTypeDialog.hide();if(options.onProjectTypeChanged){options.onProjectTypeChanged(options.trigger,selectedProjectType)}message.showSuccessMsg(JIRA.Templates.project.ChangeType.successMsg({projectName:options.projectName,projectTypeName:selectedProjectType.formattedKey}));AJS.EventQueue.push({name:"administration.projecttype.change",properties:{projectId:options.projectId,sourceProjectType:_normalizeProjectTypeKey(options.sourceProjectType),destinationProjectType:_normalizeProjectTypeKey(selectedProjectTypeKey)}})}).fail(function(){$(".aui-dialog2-content",options.dialogBody).prepend(aui.message.error({content:formatter.format("We haven\'\'t been able to complete the project conversion. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})).throbber({target:$(".throbber",options.dialogBody)})}function _normalizeProjectTypeKey(projectTypeKey){return projectTypeKey&&projectTypeKey.replace("_","")}function toggleChangeButton(selectedType,currentType,$dialogBody){if(selectedType==currentType){$dialogBody.find(".dialog-change-button").attr("disabled","disabled")}else{$dialogBody.find(".dialog-change-button").removeAttr("disabled")}}function initDialog(options){var $dialogBody=$(JIRA.Templates.project.ChangeType.changeProjectTypeDialog({projectId:options.projectId}));var changeProjectTypeDialog=AJS.dialog2($dialogBody);changeProjectTypeDialog.on("show",function(){$(".aui-dialog2-content",$dialogBody).html(JIRA.Templates.project.ChangeType.dialogSpinner());$(".dialog-spinner",$dialogBody).spin();$(".dialog-change-button",$dialogBody).unbind("click").addClass("hidden")});$(options.trigger).click(function(e){e.preventDefault();changeProjectTypeDialog.show();_getProjectInformation(options.projectId).done(function(resp){$dialogBody.find(".aui-dialog2-content").html(JIRA.Templates.project.ChangeType.changeProjectTypeForm(resp));new SingleSelect({element:$(".project-type-select",$dialogBody),revertOnInvalid:true,width:165});$dialogBody.find(".dialog-change-button").removeClass("hidden");toggleChangeButton($(".project-type-select",$dialogBody).val(),resp.project.projectTypeKey,$dialogBody);var $changeData={dialogBody:$dialogBody,changeProjectTypeDialog:changeProjectTypeDialog,projectName:resp.project.name,projectTypes:resp.projectTypes,trigger:options.trigger,projectId:options.projectId,onProjectTypeChanged:options.onProjectTypeChanged,sourceProjectType:resp.project.projectTypeKey};$(".dialog-change-button",$dialogBody).click(function(e){e.preventDefault();handleChangeProjectType($changeData)});$(".change-project-type-form",$dialogBody).on("submit",function(e){e.preventDefault();handleChangeProjectType($changeData)});$(".project-type-select",$dialogBody).on("change",function(e){toggleChangeButton($(this).val(),resp.project.projectTypeKey,$dialogBody)})}).fail(function(){$(".aui-dialog2-content",$dialogBody).html(aui.message.error({content:formatter.format("We were unable to load data required for the project type change. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})});$(".dialog-close-button",$dialogBody).click(function(e){e.preventDefault();changeProjectTypeDialog.hide()})}return function(options){initDialog(options)}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/project-type-warning-dialog.js' */
define("jira/project/types/warning/dialog",["require"],function(require){var jQuery=require("jquery");var wrmData=require("wrm/data");var InlineDialog=require("aui/inline-dialog");function attachDialog(dialogData,onProjectTypeChanged,$sectionElement){var trigger=jQuery(".project-type-warning-icon",$sectionElement);InlineDialog(trigger,"uninstalled-warning-dialog",function(content,trigger,showPopup){content.html(JIRA.Project.Types.Warning.dialog({title:dialogData.title,firstParagraph:dialogData.firstParagraph,secondParagraph:dialogData.secondParagraph,callToActionText:dialogData.callToActionText}));var ChangeProjectTypeDialog=require("jira/project/admin/change-project-type-dialog");ChangeProjectTypeDialog({trigger:jQuery(".warning-dialog-change-project-type"),projectId:dialogData.projectId,onProjectTypeChanged:onProjectTypeChanged});showPopup();return false},{width:375,gravity:"w"})}var dialogData=wrmData.claim("project.type.warning.dialogs.data");return{init:function(options){options=options||{};options.sectionElement=options.sectionElement||jQuery("body");attachDialog(dialogData,options.onProjectTypeChanged,options.sectionElement)}}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Project.Types.Warning.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Project == 'undefined') { JIRA.Project = {}; }
if (typeof JIRA.Project.Types == 'undefined') { JIRA.Project.Types = {}; }
if (typeof JIRA.Project.Types.Warning == 'undefined') { JIRA.Project.Types.Warning = {}; }


JIRA.Project.Types.Warning.dialog = function(opt_data, opt_ignored) {
  return '<div class="project-type-warning-dialog"><p class="header"><span>' + soy.$$escapeHtml(opt_data.title) + '</span></p><p class="type-not-accessible-message">' + soy.$$escapeHtml(opt_data.firstParagraph) + '</p><p class="available-functionality-message">' + soy.$$escapeHtml(opt_data.secondParagraph) + '</p><div class="actions"><a class="warning-dialog-change-project-type" href="#">' + soy.$$escapeHtml(opt_data.callToActionText) + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Project.Types.Warning.dialog.soyTemplateName = 'JIRA.Project.Types.Warning.dialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["underscore","jira/projects/data/WRM"],function(c,a){var b=Boolean(a.data.claim("is-global-sidebar"));return JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(d,e){if(!this.hasASelectedItem()){e.isInitial=true}this.retriggerPreventable("before:select",e);if(!e.isPrevented){this.deselectAllGroups()}},select:function(e,d){this.trigger("select",d)},"before:deselect":function(d,e){this.retriggerPreventable("before:deselect",e)},deselect:function(e,d){this.trigger("deselect",d)},"before:navigate":function(d,e){this.retriggerPreventable("before:navigate",e)},"before:navigate:prevented":function(d,e){this.trigger("before:navigate:prevented",e)}},initialize:function(){this.render({force:true})},render:function(f){f=c.defaults({},f,{force:false});var e="el" in f;var j=e||f.force===true;var d=this.children.length>0;if(!j){return this}var i=this.triggerPreventable("before:render");if(i.isPrevented){return this}if(d){var h=this.triggerPreventable("before:detach");if(h.isPrevented){return this}this.destroyChildren({checkEmpty:false});this.trigger("detach")}if(e){var g=jQuery(f.el);this.$el.replaceWith(g);this.setElement(g)}this.$(".aui-sidebar-group").each(c.bind(function(k,l){var n=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:l});var m=!!this.getGroup(n.id);if(m&&AJS.warn){AJS.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+n.id+'"')}this.proxyChildEvents(n);this.children.add(n,n.id)},this));this.trigger("render");return this},deselectAllGroups:function(){this.children.call("deselect")},replaceGroup:function(d,f){var e=this.getGroup(d);e.$el.replaceWith(f.$el);f.cid=e.cid;this.children.remove(e);this.children.add(f,f.id)},getGroup:function(d){return this.children.findByCustom(d)},getGroupAt:function(d){return this.children.findByIndex(d)},getItem:function(d){return this.getDefaultGroup().getItem(d)},getElement:function(){return this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return !b},getSelectedScopeFilterId:function(){return this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(e){var f=this.getGroup("sidebar-navigation-panel");var d=f.getItem("com.atlassian.jira.jira-projects-plugin:report-page");if(typeof d==="undefined"){d=f.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")}if(d){d.ui.link.attr("href",e)}},getAUISidebar:function(){return AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()},dim:function(){this.$el.attr({dimmed:"","aria-hidden":"true"})},undim:function(){this.$el.removeAttr("dimmed");this.$el.removeAttr("aria-hidden")}})});AJS.namespace("JIRA.Projects.Sidebar.Component",null,require("jira/projects/sidebar/component"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-item.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem");JIRA.Projects.Sidebar.Component.NavigationItem=JIRA.Projects.Libs.Marionette.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(a){a.preventDefault();this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id");this.bindUIElements()},onDestroy:function(){this.unbind()},getElement:function(){return this.el},navigate:function(){if(!this.select()){return}var b=this.triggerPreventable("before:navigate");if(b.isPrevented){return false}var a=this.ui.link.attr("href");if(a){require("jira/util/browser").reloadViaWindowLocation(a)}return true},select:function(){var a=this.triggerPreventable("before:select");if(a.isPrevented){return false}this.$el.addClass("aui-nav-selected");this.trigger("select",a);return true},deselect:function(){if(!this.isSelected()){return true}var a=this.triggerPreventable("before:deselect");if(a.isPrevented){return false}this.$el.removeClass("aui-nav-selected");this.$el.find("a").blur();this.trigger("deselect",a);return true},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}},hasASelectedItem:function(){return this.isSelected()}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup");JIRA.Projects.Sidebar.Component.NavigationGroup=JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(a,c){this.retriggerPreventable("before:select",c);if(c.isPrevented){return}var b=this.deselect();if(!b){c.preventDefault()}},select:function(b,a){this.trigger("select",a)},"before:deselect":function(a,b){this.retriggerPreventable("before:deselect",b)},deselect:function(b,a){this.trigger("deselect",a)},"before:navigate":function(a,b){this.retriggerPreventable("before:navigate",b)},"before:navigate:prevented":function(a,b){this.trigger("before:navigate:prevented",b)}},initialize:function(){this.id=this.$el.attr("data-id");this.$(">ul>li").each(_.bind(function(b,a){var c=JIRA.Projects.Sidebar.Component.NavigationGroup.build(a);var d=!!this.getItem(c.id);if(d&&AJS.warn){AJS.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+c.id+"'")}this.proxyChildEvents(c);this.children.add(c,c.id)},this))},onDestroy:function(){this.unbind()},getElement:function(){return this.el},deselect:function(){var b=this.triggerPreventable("before:deselect");if(b.isPrevented){return false}var a=true;this.children.each(function(c){a=c.deselect()&&a});return a},getItem:function(a){return this.children.findByCustom(a)},getItemAt:function(a){return this.children.findByIndex(a)},getSelectedNavigationItem:function(){var a=this.children.find(function(b){return b.hasASelectedItem()});if(a){return a.getSelectedNavigationItem()}},hasASelectedItem:function(){return this.children.any(function(a){return a.hasASelectedItem()})}},{build:function(b){var a;if(AJS.$(b).find("ul").length){a=new JIRA.Projects.Sidebar.Component.NavigationSubgroup({el:b})}else{a=new JIRA.Projects.Sidebar.Component.NavigationItem({el:b})}return a}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-subgroup.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup");JIRA.Projects.Sidebar.Component.NavigationSubgroup=JIRA.Projects.Sidebar.Component.NavigationGroup.extend({childEvents:{"before:select":function(a,b){JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents["before:select"].apply(this,arguments);if(!b.isPrevented){this.expand()}}},initialize:function(){this.childEvents=_.extend({},JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents,this.childEvents);JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.initialize.apply(this,arguments);this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return this.$el.attr("aria-expanded")==="true"},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected()){return this}var a=this.children.find(function(b){return b.hasASelectedItem()});if(a){return a.getSelectedNavigationItem()}},hasASelectedItem:function(){if(this.isSelected()){return true}return this.children.any(function(a){return a.hasASelectedItem()})}})}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/analytics.js' */
(function(f){AJS.namespace("JIRA.Projects.Sidebar.Analytics");function b(h){return JIRA.Projects.Sidebar.Analytics.Hash.prefixedHash(h||"NONE")}function c(h,i){AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar."+h,data:i})}var e="proj.config";function a(){return f('meta[name="admin.active.section"]').attr("content")==="atl.jira.proj.config"}function g(h){return d.indexOf([e,h].join("."))!==-1}JIRA.Projects.Sidebar.Analytics=function(j){var i=AJS.sidebar(j);var h=f();h=h.add(i.$el);h=h.add(i.submenus.inlineDialog);if(!JIRA.API.Sidebar){throw new Error("Error: cannot start analytics before JIRA.Projects.Sidebar.initAPI is called")}if(JIRA.API.Sidebar.isProjectSidebar()){c("load.project")}else{c("load.global")}h.on("click","a",function(){var l=b(f(this).attr("data-link-id"));var k={id:l.hash,prefix:l.prefix};var n=AJS.Meta.get("sidebar-source-page");if(n){k.sidebarSourcePage=n}else{if(f(".issue-tools button.expand").length>0){k.sidebarSourcePage="search-el"}else{if(f(".navigation-tools button.collapse").length>0){k.sidebarSourcePage="fullscreen-el"}else{if(a()){var m=f('meta[name="admin.active.tab"]').attr("content");m=m.replace("com.atlassian.servicedesk.project-ui:","");if(g(m)){k.sidebarSourcePage=[e,m].join(".")}else{k.sidebarSourcePage=e}}}}}if(d.indexOf(k.sidebarSourcePage)===-1){k.sidebarSourcePage="unknown"}c("click.link",k)})};var d=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk","proj.config","proj.config.view_project_summary","proj.config.view_project_issuetypes","proj.config.project-issuetypes-expand","proj.config.view_project_workflows","proj.config.view_project_screens","proj.config.view_project_fields","proj.config.view_project_versions","proj.config.view_project_components","proj.config.view_project_roles","proj.config.view_project_permissions","proj.config.view_project_issuesecurity","proj.config.view_project_notifications","proj.config.devstatus-admin-page-link","proj.config.hipchat-project-admin-page-link","proj.config.view_issue_collectors","proj.config.sd-project-request-types-item","proj.config.sd-project-request-security-item","proj.config.sd-project-portal-settings-item","proj.config.sd-project-feedback-settings-item","proj.config.sd-project-email-settings-item","proj.config.sd-project-confluence-kb-item","proj.config.sd-project-sidebar-sla","proj.config.sd-project-automation-item"]})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/hash.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Analytics");var d=[];function b(e,f){return e.indexOf(f)===0}function c(e,f){return e.substring(b(e,f)?f.length:0)}function a(f){var e;var h=0;if(!f){return""}for(var g=0;g<f.length;g+=1){e=f.charCodeAt(g);h=((h*32)-h)+e;h|=0}return h}JIRA.Projects.Sidebar.Analytics.Hash={prefixedHash:function(e){var f=_.find(d,_.partial(b,e))||"";return{prefix:f,hash:f+a(c(e,f))}},addPrefix:function(e){if(e&&!_.contains(d,e)){d.push(e)}},clearPrefixes:function(){d.length=0}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ScopeFilter.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter.Templates == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter.Templates = {}; }


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer = function(opt_data, opt_ignored) {
  return '<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.selectableScopes || opt_data.createActions) {
    output += '<div class="aui-nav-heading" title="' + soy.$$escapeHtml("Boards in this project") + '"><strong class="collapsed-scope-header">' + soy.$$escapeHtml("Boards in this project") + '</strong></div><ul class="aui-nav collapsed-scope-list" title="' + soy.$$escapeHtml("Select a board") + '">';
    if (opt_data.selectedScope) {
      output += '<li class="scope-filter selected-scope-filter" title="' + soy.$$escapeHtml(opt_data.selectedScope.label) + '">' + soy.$$escapeHtml(opt_data.selectedScope.label) + '</li>';
      var scopeFilterList21 = opt_data.selectableScopes;
      var scopeFilterListLen21 = scopeFilterList21.length;
      for (var scopeFilterIndex21 = 0; scopeFilterIndex21 < scopeFilterListLen21; scopeFilterIndex21++) {
        var scopeFilterData21 = scopeFilterList21[scopeFilterIndex21];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'scope-filter', anchorClass: scopeFilterData21.styleClass, label: scopeFilterData21.label, link: scopeFilterData21.link});
      }
    }
    if (opt_data.createActions) {
      var createActionList30 = opt_data.createActions;
      var createActionListLen30 = createActionList30.length;
      for (var createActionIndex30 = 0; createActionIndex30 < createActionListLen30; createActionIndex30++) {
        var createActionData30 = createActionList30[createActionIndex30];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'create-scope-action', anchorClass: createActionData30.styleClass, label: createActionData30.label, link: createActionData30.link});
      }
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.itemClass) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" title="' + soy.$$escapeHtml(opt_data.label) + '"' + ((opt_data.anchorClass) ? ' class="' + soy.$$escapeHtml(opt_data.anchorClass) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/model.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");JIRA.Projects.Sidebar.ScopeFilter.Model=function(c){this.selectedScope=c.selectedScope;this.createScopeActions=c.createScopeActions;if(this.selectedScope){this.selectableScopes=_.reject(c.scopes,function(d){return d.label===this.selectedScope.label&&d.link===this.selectedScope.link},this)}else{this.selectableScopes=c.scopes}var b=this.createScopeActions.length>0;var a=this.selectableScopes.length>0;this.displayWhenSidebarIsCollapsed=b||a};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectedScope=function(){return this.selectedScope};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectableScopes=function(){return this.selectableScopes};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getCreateScopeActions=function(){return this.createScopeActions};JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){return this.displayWhenSidebarIsCollapsed}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-view.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");JIRA.Projects.Sidebar.ScopeFilter.CollapsedView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList,serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},onRender:function(){this.unwrapTemplate()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-controller.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");JIRA.Projects.Sidebar.ScopeFilter.CollapsedController=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(a){this.scopeFilter=a.scopeFilter;var b=JIRA.Projects.Libs.Marionette.Region.extend({attachHtml:function(c){this.$el.empty().append(c.$el)}});this.collapsedScopeFilterContainer=new b({el:a.collapsedScopeFilterContainer})},render:function(){var a=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedView({model:this.scopeFilter});this.collapsedScopeFilterContainer.show(a)},remove:function(){this.collapsedScopeFilterContainer.empty();this.collapsedScopeFilterContainer.$el.empty()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-initializer.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter");function b(d){var c=AJS.$(JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer());d.prepend(c);return c}function a(d,c){d.on("collapse-start",function(){c.render();JIRA.trace("sidebar.scopefilter.collapsed")});d.on("expand-end",function(){c.remove()})}JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(c){this.sidebarAPI=c.sidebarAPI;this.scopeFilterData=c.scopeFilterData;this.sidebar=c.sidebar;this.$sidebarContentContainer=c.$sidebarContentContainer},run:function(){if(!this.sidebarAPI.isProjectSidebar()){return}var e=new JIRA.Projects.Sidebar.ScopeFilter.Model(this.scopeFilterData);if(!e.shouldDisplayWhenSidebarIsCollapsed()){return}var c=b(this.$sidebarContentContainer);var d=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedController({scopeFilter:e,collapsedScopeFilterContainer:c});a(this.sidebar,d);if(this.sidebar.isCollapsed()){d.render()}}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-init.js' */
(function(){JIRA.API.getSidebar().done(function(c){var b=WRM.data.claim("scope-filter-data");if(b){var a=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer({sidebarAPI:c,scopeFilterData:b,sidebar:c.getAUISidebar(),$sidebarContentContainer:c.getContentContainer()});a.run()}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:feature-discovery', location = '/sidebar/feature-discovery/feature-discovery.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.FeatureDiscovery");function a(b){_.each(b,function(d){var c=JIRA.API.Sidebar.getItem(d);if(c){c.removeBadge()}})}JIRA.Projects.Sidebar.FeatureDiscovery={updateBadges:function(){if(typeof JIRA.API.Projects.getCurrentProjectKey()==="undefined"){return}AJS.$.ajax({url:AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(JIRA.API.Projects.getCurrentProjectKey())+"/badges",type:"PUT",contentType:"application/json"}).done(function(b){a(b.badgesToRemove||[])})}}}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-updater.js' */
define("jira/projects/sidebar/lastvisited/updater",["jquery"],function(b){function a(c,d,e){if(!c){return}e=e||function(){JIRA.trace("last.visited.item.saved")};b.ajax({url:AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(c)+"/lastVisited",type:"PUT",contentType:"application/json",data:JSON.stringify({id:d})}).done(e)}return{start:function(d,f){var c=(JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectKey())||null;var e=d.getSelectedNavigationItem();if(e){a(c,e.getId(),f)}d.on("before:navigate:prevented",function(g){a(c,g.emitter.id,f)});d.on("before:select",function(g){if(g.isInitial){a(c,g.emitter.id,f)}})}}});AJS.namespace("JIRA.Projects.Sidebar.LastVisited.Updater",null,require("jira/projects/sidebar/lastvisited/updater"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ProjectShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts.Templates = {}; }


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManage || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' project-shortcuts-group_empty' : '') + '" data-id="project-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml("Project shortcuts") + '</div>' + ((opt_data.canManage) ? '<p class="project-shortcuts-group__description' + ((opt_data.numberOfShortcuts > 0) ? ' hidden' : '') + '">' + soy.$$escapeHtml("Add a link to useful information for your whole team to see.") + '</p>' : '') + '<ul class="aui-nav project-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList24 = opt_data.shortcuts;
      var shortcutListLen24 = shortcutList24.length;
      for (var shortcutIndex24 = 0; shortcutIndex24 < shortcutListLen24; shortcutIndex24++) {
        var shortcutData24 = shortcutList24[shortcutIndex24];
        output += JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id: shortcutData24.id, name: shortcutData24.name, url: shortcutData24.url, icon: shortcutData24.icon, canManage: opt_data.canManage, iconsMap: opt_data.iconsMap, isWithIcon: opt_data.isWithIcons});
      }
    }
    output += ((opt_data.canManage) ? '<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">' + soy.$$escapeHtml("Add link") + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  return '<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="project-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.isWithIcon) ? '<span class="aui-icon aui-icon-large ' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId: opt_data.icon, iconsMap: opt_data.iconsMap}) + '" data-project-shortcuts-icon-id="' + soy.$$escapeHtml(opt_data.icon) + '">' + soy.$$escapeHtml("Project shortcut icon") + '</span>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManage) ? '<a href="#project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-controls="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger project-shortcuts-group__actions"><span>' + soy.$$escapeHtml("Actions") + '</span></a><div id="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml("Edit") + '</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">' + soy.$$escapeHtml("Delete") + '</a></li></ul></div>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.iconsMap) {
    var id__soy83 = opt_data.iconId && opt_data.iconsMap[opt_data.iconId] ? opt_data.iconId : '1';
    output += (opt_data.iconsMap[id__soy83]) ? soy.$$escapeHtml(opt_data.iconsMap[id__soy83].className) : '';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="project-shortcuts-field-group">' + aui.form.textField({name: 'project-shortcuts-url-' + opt_data.action, id: 'project-shortcuts-url-' + opt_data.action, labelContent: "Web address", placeholderText: "e.g. http://www.atlassian.com", extraClasses: 'project-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group project-shortcuts-name">' + aui.form.label({forField: 'project-shortcuts-name-' + opt_data.action, content: "Label"}) + '<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'project-shortcuts-name-' + opt_data.action, id: 'project-shortcuts-name-' + opt_data.action, placeholderText: "e.g. Atlassian website", extraClasses: 'project-shortcuts-name-input' + (opt_data.isWithIcon ? ' project-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker = function(opt_data, opt_ignored) {
  return '<span>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(opt_data) + '</span>' + aui.dropdown2.trigger({menu: {id: 'project-shortcuts-icons-list-' + opt_data.cid}, extraClasses: 'aui-button project-shortcuts-icons-picker', iconClasses: 'aui-icon aui-icon-large  ' + soy.$$escapeHtml(opt_data.icon.className), extraAttributes: {href: '#'}});
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList = function(opt_data, opt_ignored) {
  var output = '<div id="project-shortcuts-icons-list-' + soy.$$escapeHtml(opt_data.cid) + '" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>';
  var iconList136 = opt_data.iconsList;
  var iconListLen136 = iconList136.length;
  for (var iconIndex136 = 0; iconIndex136 < iconListLen136; iconIndex136++) {
    var iconData136 = iconList136[iconIndex136];
    output += '<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="' + soy.$$escapeHtml(iconData136.name) + '"><span class="aui-icon aui-icon-large ' + soy.$$escapeHtml(iconData136.className) + '">' + soy.$$escapeHtml("Project shortcut icon") + '</span></a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml("Add link") + '</h3><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons"><button class="aui-button project-shortcuts-submit">' + soy.$$escapeHtml("Add") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Edit link") + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="project-shortcuts-hidden-submit"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml("Save") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></footer>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml("Delete shortcut") + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml("Are you sure you want to delete this shortcut?") + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml("Delete") + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml("Cancel") + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/services/AvailableIcons.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons");var c=[];var a={};var b=false;JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons={initialize:function(d){c=d||c;a={};_.each(d,function(e){a[e.name]=e})},getIconsList:function(){return c},getIconsMap:function(){return a},getAllIconsClasses:function(){return _.reduce(c,function(d,e){return d+e.className+" "},"")},getIconFromName:function(d){if(this.getIconsMap()[d]){return this.getIconsMap()[d]}if(this.getIconsList()[0]){return this.getIconsList()[0]}return{}},setWithIcons:function(d){b=d},isWithIcons:function(){return b}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcut.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut");function b(d){var f;try{f=JSON.parse(d.responseText)}catch(g){f={message:"We couldn\'t complete the action as there seems to be a communication issue."}}return f}JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut=Backbone.Model.extend({defaults:{url:"",name:"",icon:""},initialize:function(e,d){if(!d||!d.projectKey){throw"Project key is required"}this.projectKey=d.projectKey},urlRoot:function c(){return AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function a(){this.unset("id");this.set("url",this.defaults.url);this.set("name",this.defaults.name);this.set("icon",this.defaults.icon)},save:function(){if(this.saving==true){return}this.saving=true;var e=this;e.trigger("save:start");var h=this.isNew()?"create":"update";this.sync(h,e).always(function d(){e.saving=false;e.trigger("save:finish")}).done(function f(i){e.set(i,{silent:true});JIRA.trace("jira.projects.shortcuts."+h+".success");e.trigger("save:success")}).fail(function g(i){var j=b(i);JIRA.trace("jira.projects.shortcuts."+h+".fail");e.trigger("save:failure",j)})},destroy:function(){if(this.saving==true){return}this.saving=true;var e=this;e.trigger("remove:start");var d=Backbone.Model.prototype.destroy.apply(this,arguments);d.always(function(){e.saving=false;e.trigger("remove:finish")}).done(function f(){e.trigger("remove:success")}).fail(function g(h){var i=b(h);e.trigger("remove:failure",i)});return d}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors");JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors=Backbone.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function a(e,d){var c=d.model;this.listenTo(c,"save:failure remove:failure",function b(f){this.set({urlError:f.errors&&f.errors.url,nameError:f.errors&&f.errors.name,iconError:f.errors&&f.errors.icon,generalError:(f.message||(f.errorMessages&&f.errorMessages.length>0))?f.message||f.errorMessages[0]:undefined})});this.listenTo(c,"save:success remove:success",this.clear)}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcuts.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts");JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts=Backbone.Collection.extend({model:JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut,initialize:function(b,a){this.projectKey=a.projectKey}})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/IconPickerContent.js' */
(function(b){var h="projectShortcutsIconsId";var a="active aui-dropdown2-active";function k(l,p){var o=5;var r=l.ui.iconList.find(".active");var q=l.ui.iconList.find("li").size();var n;switch(p.keyCode){case AJS.keyCode.LEFT:n=-1;break;case AJS.keyCode.RIGHT:n=1;break;case AJS.keyCode.DOWN:n=o;break;case AJS.keyCode.UP:n=-o;break;default:n=0}var m=r.closest("li").index()+n;if(m<0||m>=q){m+=q;m%=q}r.removeClass(a);l.ui.icon.eq(m).addClass(a)}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function i(){var m=this._modelIcon();var l=this.ui.iconPicker.children();l.removeClass(this.iconFactory.getAllIconsClasses());l.addClass(m.className);this.ui.iconPicker.data(h,m.name)},"save:start":function j(){this.ui.iconPicker.attr("aria-disabled",true)},"save:finish":function g(){this.ui.iconPicker.attr("aria-disabled",false)}},events:{"keydown @ui.iconPicker":function e(l){if(!this.isPickerActive()){return}switch(l.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:k(this,l);l.stopPropagation();l.preventDefault();this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker();l.stopPropagation();l.preventDefault();break}}},initialize:function(l){this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons;this.analytics=JIRA.Projects.Sidebar.ProjectShortcuts.Analytics},onRender:function(){var l=this;this.ui.icon.on("click",function m(){var n=b(this).data(h);l.analytics.iconChangeConfirmed(l.model,n);l.analyticsOldIconId="";l.analyticsIconClicked=true;l.model.set("icon",n);l.ui.iconPicker.focus()});this.ui.iconList.on("aui-dropdown2-show",function(){l.ui.iconPicker.focus();l.analyticsIconClicked=false;l.analytics.iconPickerOpened(l.model)});this.ui.iconList.on("aui-dropdown2-hide",function(){l.analytics.iconPickerClosed(l.model,l.analyticsIconClicked)});this.analyticsOldIconId="";this.ui.iconList.on("aui-dropdown2-item-selected",function(n){var o=AJS.$(this).find(".active").data(h);if(l.analyticsOldIconId&&l.analyticsOldIconId!==o){l.analytics.iconChanged(l.model,o,l.analyticsOldIconId)}l.analyticsOldIconId=o});this.ui.iconPicker.data(h,this.model.get("icon"))},hideIconPicker:function(){if(this.isPickerActive()){this.ui.iconPicker.trigger("aui-button-invoke")}},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function c(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function f(){this.model.set("icon",this.ui.iconPicker.data(h)||"")},focus:function d(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/DialogContent.js' */
(function(g){function d(r){r.preventDefault();this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl();if(this.iconPickerContent){this.iconPickerContent.onFormSubmit()}this.model.set("url",this.ui.url.val());this.model.set("name",this.ui.name.val());this.model.save()}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent=JIRA.Projects.Libs.Marionette.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function p(r){r.preventDefault();this.model.clear();this.setNameAutomagically=true;this.errorModel.clear();this.trigger("cancel")},"click @ui.submit":d,"submit @ui.form":d,"blur @ui.url":function q(){this.ensureProtocolPrefix();this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function i(){this.model.set("url",this.ui.url.val());this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function c(){this.setNameAutomagically=false;this.model.set("name",this.ui.name.val())},"keydown @ui.name":function a(r){if(!this.iconPickerContent){return}if(r.shiftKey&&r.keyCode===AJS.keyCode.TAB){r.preventDefault();this.iconPickerContent.focus()}},"keydown @ui.url":function a(r){if(!this.iconPickerContent){return}if(!r.shiftKey&&r.keyCode===AJS.keyCode.TAB){r.preventDefault();this.iconPickerContent.focus()}}},modelEvents:{"save:start":function n(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"save:finish":function m(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"})},"save:failure":function l(){this.render();if(this.errorModel.get("generalError")){var r=require("aui/flag");r({type:"error",title:"We couldn\'t save the link for you",close:"auto",body:this.errorModel.get("generalError")})}if(this.errorModel.get("nameError")){this.ui.name.focus()}if(this.errorModel.get("urlError")){this.ui.url.focus()}return this},"save:success":function b(){this.setNameAutomagically=true}},initialize:function f(s){this.errorModel=s.errorModel;var r=this.model.get("name");this.setNameAutomagically=(r.length==0);this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},serializeData:function k(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){if(this.iconFactory.isWithIcons()){this.iconPickerContent=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent({model:this.model,action:this.action,observable:this});this.getRegion("iconPicker").show(this.iconPickerContent)}else{delete this.iconPickerContent}},hideIconPicker:function(){if(!this.iconPickerContent){return}this.iconPickerContent.hideIconPicker()},setName:function j(r){this.ui.name.val(r);this.model.set("name",r)},setUrl:function e(r){this.ui.url.val(r);this.model.set("url",r)},ensureProtocolPrefix:function o(){var r=this.ui.url.val().trim();if(r.length>0&&!JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlPattern.test(r)){this.setUrl("http://"+r)}},tryToAutomagicallyDeriveNameFromUrl:function h(){var s=this.ui.url.val().trim();if(this.setNameAutomagically){if(JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.test(s)){var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.exec(s);this.setName(r[3])}else{this.setName(s)}}}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/AddDialogContent.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/EditDialogContent.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent");JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog})})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/Shortcut.js' */
(function(d){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut");JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut,initialize:function a(){_.bindAll(this,"toggleDropdown");this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function b(){this.trigger("click:link",this.model)}},onRender:function(){var e=this;this.unwrapTemplate();var i=d(window);var h=d(".aui-sidebar-body");this.ui.edit.on("click",function g(k){k.preventDefault();e.ui.trigger.blur();var j=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit({model:e.model});e.trigger("edit:open",e.model);e.listenToOnce(j,"dialog:close",function l(m){e.trigger("edit:close",e.model,m)})});this.ui.del.on("click",function f(j){j.preventDefault();e.ui.trigger.blur();var k=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:e.model})});this.ui.dropdown.on({"aui-dropdown2-show":function(){e.$el.addClass("aui-nav-selected");h.one("scroll",e.toggleDropdown);i.one("scroll",e.toggleDropdown);e.ui.trigger.focus()},"aui-dropdown2-hide":function(){e.$el.removeClass("aui-nav-selected");h.off("scroll",e.toggleDropdown);i.off("scroll",e.toggleDropdown)}})},serializeData:function(){var e=_.extend(this.model.toJSON(),{canManage:true,isWithIcon:this.iconFactory.isWithIcons()});if(this.iconFactory.isWithIcons()){e=_.extend(e,{iconsMap:JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.getIconsMap()})}return e},toggleDropdown:function c(){this.ui.trigger.trigger("aui-button-invoke")}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/ShortcutsList.js' */
(function(e){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List");JIRA.Projects.Sidebar.ProjectShortcuts.Views.List=JIRA.Projects.Libs.Marionette.CompositeView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content,childView:JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function d(){if(this.collection.length==0&&this.lastCollectionLength!=0||this.collection.length!=0&&this.lastCollectionLength==0){this.lastCollectionLength=this.collection.length;this.ui.description.toggleClass("hidden",this.collection.length>0);this.$el.toggleClass("project-shortcuts-group_empty",this.collection.length==0)}}},initialize:function a(){var g=this;JIRA.API.getSidebar().done(function(j){var k=j.getAUISidebar();k.on("expand-end",function i(){e(".aui-sidebar-submenu-dialog .project-shortcuts-group__dropdown").remove()});k.on("collapse-start",function h(){g.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")})});this.lastCollectionLength=this.collection.length},attachElContent:function(g){var h=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:g});JIRA.API.Sidebar.replaceGroup(this.options.targetGroup,h);this.$el=e(h.getElement());return this},onRender:function f(){var h=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add({sidebarItem:JIRA.API.Sidebar.getGroup("project-shortcuts-group").getItem("project-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(h,"dialog:open",function i(){this.trigger("add:open")});this.listenTo(h,"dialog:close",function g(j){this.trigger("add:close",j)})},serializeData:function b(){return{canManage:true,numberOfShortcuts:this.collection.length}},attachBuffer:function(h,g){this.ui.itemsContainer.prepend(g)},onAddChild:function c(g){this.ui.add.parent().before(g.$el)}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Delete.js' */
(function(g){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete");JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function f(i){i.preventDefault();this.dialog.hide()},"click @ui.submit":function d(i){i.preventDefault();this.model.destroy({wait:true})}},modelEvents:{"remove:start":function c(){this.ui.inputs.prop("disabled",true);this.ui.submit.addClass("loading");this.ui.submit.spin({className:"spinner"})},"remove:finish":function e(){this.ui.inputs.prop("disabled",false);this.ui.submit.removeClass("loading");this.ui.submit.spinStop({className:"spinner"});this.dialog.hide();JIRA.trace("jira.projects.shortcuts.deleted")},"remove:failure":function b(j){if(j.message||(j.errorMessages&&j.errorMessages.length>0)){var i=require("aui/flag");i({type:"error",title:"We couldn\'t delete the link for you",close:"auto",body:j.message||j.errorMessages[0]})}}},initialize:function a(){this.render();this.$el.appendTo("body");this.dialog=AJS.dialog2(this.$el);this.dialog.show();var i=this;this.dialog.on("hide",function(){_.defer(function(){i.destroy()})})},onRender:function h(){this.unwrapTemplate()}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Edit.js' */
(function(b){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit");JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(f){var d=this;_.bindAll(this,"hide");this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(f.model.toJSON(),{projectKey:f.model.projectKey||f.model.collection.projectKey});this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(undefined,{model:this.model});this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent({model:this.model,errorModel:this.errorModel});this.analyticsSave=false;this.view.render();var c=b(JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome({}));this.view.$el.appendTo(c);this.dialog=AJS.dialog2(c);this.dialog.show();this.view.ui.url.focus();this._onResizeWindow=function(){d.hideIconPicker()};b(window).on("resize",this._onResizeWindow);this.listenTo(this.view,"cancel",this.hide);this.listenTo(this.model,"save:success",function g(){this.analyticsSave=true;this.hide();f.model.set(d.model.toJSON())});this.dialog.on("hide",function e(){d.trigger("dialog:close",d.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function a(){this.dialog.hide();b(window).off("resize",this._onResizeWindow)}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Add.js' */
(function(c){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add");JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(o){_.bindAll(this,"hide","refresh","focusForm");var n=this;this.analyticsSave=false;this.sidebarItem=o.sidebarItem;this.projectKey=o.projectKey;this.collection=o.collection;this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(null,{projectKey:this.projectKey});this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model});this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent({model:this.model,errorModel:this.errorModel});this.view.render();var g=c(window);var i=c(document);var m=c(".aui-sidebar-body");this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"project-shortcuts-group__add-dialog",function(r,q,t){n.sidebarItem.$el.addClass("aui-nav-selected");n.view.render();n.view.$el.appendTo(r);n.view.ui.url.focus();g.on("scroll.project-shortcuts",function s(){n.refresh()});m.on("scroll.project-shortcuts",function p(){n.hide()});i.on("showLayer",n.focusForm);g.on("resize",n.refresh);t();return false},{gravity:"w",autoWidth:true,initCallback:function f(){n.trigger("dialog:open");n.analyticsSave=false},hideCallback:function h(){n.sidebarItem.$el.removeClass("aui-nav-selected");n.sidebarItem.ui.link.blur();g.off("scroll.project-shortcuts");m.off("scroll.project-shortcuts");i.off("showLayer",n.focusForm);n.trigger("dialog:close",n.analyticsSave)},persistent:true,closeOnTriggerClick:true,offsetY:function j(p,s){var r=s.target.height();var q=p.height()/2;return q-r-10},arrowOffsetY:function k(p,s){var r=s.target.height()/2;var q=p.height()/2;return -q+22+r}});this.listenTo(this.view,"render",this.refresh);this.listenTo(this.view,"cancel",this.hideAndRender);this.listenTo(this.model,"save:success",function l(){var p=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear();this.collection.add(p);this.analyticsSave=true;this.hide()});this.listenTo(this.sidebarItem,"before:select",function(p){p.preventDefault()});AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide);c(".project-shortcuts-group").on("click","li",this.hide)},hide:function a(){this.view.hideIconPicker();this.dialog.hide()},refresh:function b(){this.view.hideIconPicker();this.dialog.refresh()},hideAndRender:function e(){this.hide()},focusForm:function d(){this.view.ui.url.focus()}})})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var b="a.project-shortcuts-group__link";var a=AJS.DarkFeatures.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(c){this.projectId=c},initShortcutClick:function(g,f){var e=AJS.sidebar(f);var d=AJS.$(g);var c=this;d.on("click",b,function(j){var i=d.find(b);var h=AJS.$(this);AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.clicked",data:{shortcutId:h.data("shortcutId"),shortcutPosition:h.closest("li").index()+1,shortcutIconName:a?h.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:i.size(),isWithIcons:a,isSidebarCollapsed:e.isCollapsed(),projectId:c.projectId}})})},initDialogActions:function(d){var c=this;d.on("childview:edit:open",function(e,g){var f=g.collection.indexOf(g)+1;AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.opened",data:{isWithIcons:a,shortcutId:g.get("id"),shortcutPosition:f,shortcutCount:g.collection.size(),projectId:c.projectId}})});d.on("childview:edit:close",function(e,g,h){var f=g.collection.indexOf(g)+1;AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.closed",data:{isWithIcons:a,isSave:h,shortcutId:g.get("id"),shortcutPosition:f,shortcutCount:g.collection.size(),projectId:c.projectId}})});d.on("add:open",function(){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.opened",data:{isWithIcons:a,projectId:c.projectId}})});d.on("add:close",function(e){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.closed",data:{isWithIcons:a,isSave:e,projectId:c.projectId}})})},iconChanged:function(c,e,d){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.changed",data:{iconName:e,oldIconName:d,shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,projectId:this.projectId}})},iconChangeConfirmed:function(c,d){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.confirmed",data:{oldIconName:c.get("icon"),iconName:d,shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,projectId:this.projectId}})},iconPickerOpened:function(c){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.picker.opened",data:{shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,projectId:this.projectId}})},iconPickerClosed:function(c,d){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.icon.picker.closed",data:{shortcutId:c.isNew()?"":c.get("id"),isNew:c.isNew(),cid:c.cid,isSave:d,projectId:this.projectId}})}}})();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-init.js' */
JIRA.API.getSidebar().done(function(){var b=WRM.data.claim("com.atlassian.jira.projects.shortcuts:project-id");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initialize(b);if(WRM.data.claim("com.atlassian.jira.projects.shortcuts:can-manage")){var d=WRM.data.claim("com.atlassian.jira.projects.shortcuts:with-icons");if(d){JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.initialize(WRM.data.claim("com.atlassian.jira.projects.shortcuts:icons-list"))}JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.setWithIcons(d);var a=JIRA.API.Projects.getCurrentProjectKey();var c=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts(WRM.data.claim("com.atlassian.jira.projects.shortcuts:shortcuts"),{projectKey:a});var e=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.List({collection:c,targetGroup:"project-shortcuts-group"});e.render();JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initDialogActions(e)}JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initShortcutClick(".project-shortcuts-list",".aui-sidebar")});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = '/page/project/report/analytics.js' */
(function reportsPageAnalytics(a){AJS.namespace("JIRA.Projects.Report");JIRA.Projects.Report.Analytics=function(){a(".reports .reports__list__report").on("click",function(c){var b=a(this);AJS.trigger("analyticsEvent",{name:"jira.projects.report.clicked",data:{report:b.attr("data-report-key"),category:b.closest("ul").attr("data-category-key"),listPosition:b.closest("li").prevAll().length+1}})})};a(JIRA.Projects.Report.Analytics)}(AJS.$));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = '/sidebar/reports/reports-link-storage.js' */
(function(){AJS.namespace("JIRA.Projects.Sidebar.Reports");JIRA.Projects.Sidebar.Reports={storeLastViewedReportLink:function(b){if(JIRA.API.Sidebar.isProjectSidebar()){var a=this._createLastViewedReportKey();require("jira/data/local-storage").setItem(a,b);this._setReportsItemLink(b)}JIRA.trace("jira.projects.sidebar.reports.link.stored")},restoreLastViewedReportLink:function(){if(JIRA.API.Sidebar.isProjectSidebar()){var a=this._createLastViewedReportKey();var b=require("jira/data/local-storage").getItem(a);if(b){this._setReportsItemLink(b)}}JIRA.trace("jira.projects.sidebar.reports.link.restored")},_createLastViewedReportKey:function(){var b=JIRA.API.Sidebar.getSelectedScopeFilterId();var a=JIRA.API.Projects.getCurrentProjectKey();var c="last.viewed.report."+a;if(b){c+="."+b}return c},_setReportsItemLink:function(a){JIRA.API.Sidebar.setReportsItemLink(a)}}}());;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = '/sidebar/reports/reports-link-init.js' */
AJS.$(function(){JIRA.API.getSidebar().done(function(){JIRA.Projects.Sidebar.Reports.restoreLastViewedReportLink()})});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/zephyr-test-board-router.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.Router={URL:{}};ZEPHYR.Agile.TestBoard.Router.URL.prefix=contextPath+"/secure/RapidBoard.jspa";ZEPHYR.Agile.TestBoard.Router.URL.setParams=function(){var a=ZEPHYR.Agile.TestBoard.data.view||ZEPHYR.Agile.TestBoard.view,c=ZEPHYR.Agile.TestBoard.data.page,b="&view="+a+"&page="+c;if(ZEPHYR.Agile.TestBoard.data.selectedSprint){b+="&selectedSprint="+ZEPHYR.Agile.TestBoard.data.selectedSprint}if(c==ZEPHYR.Agile.TestBoard.page.sprint){if(ZEPHYR.Agile.TestBoard.data.selectedCycle){b+="&selectedCycle="+ZEPHYR.Agile.TestBoard.data.selectedCycle}if(ZEPHYR.Agile.TestBoard.data.selectedStatus){b+="&selectedStatus="+ZEPHYR.Agile.TestBoard.data.selectedStatus}}else{if(c==ZEPHYR.Agile.TestBoard.page.issues){}}if(ZEPHYR.Agile.TestBoard.data.isVersionsVisible){b+="&versions=visible"}if(ZEPHYR.Agile.TestBoard.data.versionId&&!isNaN(ZEPHYR.Agile.TestBoard.data.versionId)){b+="&selectedVersion="+ZEPHYR.Agile.TestBoard.data.versionId}if(ZEPHYR.Agile.TestBoard.data.projectKey){b="&projectKey="+ZEPHYR.Agile.TestBoard.data.projectKey+b}ZEPHYR.Agile.TestBoard.Router.URL.href=ZEPHYR.Agile.TestBoard.Router.URL.prefix+"?rapidView="+ZEPHYR.Agile.TestBoard.data.agileBoardId+b};ZEPHYR.Agile.TestBoard.Router.URL.getURL=function(){return ZEPHYR.Agile.TestBoard.Router.URL.href};ZEPHYR.Agile.TestBoard.Router.TestBoardRouter=Backbone.Router.extend({initialize:function(){this.testBoardURLRegex=/\?rapidView=(.*)(&projectKey=(.*))+&view=(.*)&page=(.*)/;this.route(/(.*)/,"defaultAction");this.route(this.testBoardURLRegex,"navigateToTestBoard")},navigateToTestBoard:function(d,b,a,c){c=ZephyrURL("?page");ZEPHYR.Agile.TestBoard.initTestBoard(c)},defaultAction:function(c){var b=window.location.href,d=ZephyrURL("?page");if(this.testBoardURLRegex.test(b)){if(d){this.setParamaFromURL();ZEPHYR.Agile.TestBoard.initTestBoard(d)}}else{var a=ZephyrURL("?view");if(a==ZEPHYR.Agile.TestBoard.view||a==ZEPHYR.Agile.TestBoard.viewDetail){this.setParamaFromURL();ZEPHYR.Agile.TestBoard.initTestBoard(d)}}},setParamaFromURL:function(){var d=ZephyrURL("?selectedVersion")||ZEPHYR.Agile.TestBoard.versionAllCycles;var f=(ZephyrURL("?versions")=="visible")?true:false;var c=ZephyrURL("?selectedSprint");var b=ZephyrURL("?selectedCycle");var g=ZephyrURL("?selectedStatus");var i=ZephyrURL("?view");var h=ZephyrURL("?page");var e=(i==ZEPHYR.Agile.TestBoard.viewDetail)?true:false;var a=ZephyrURL("?projectKey");ZEPHYR.Agile.TestBoard.data.versionId=d;ZEPHYR.Agile.TestBoard.data.isVersionsVisible=f;ZEPHYR.Agile.TestBoard.data.selectedSprint=c;ZEPHYR.Agile.TestBoard.data.selectedCycle=b;ZEPHYR.Agile.TestBoard.data.selectedStatus=g;ZEPHYR.Agile.TestBoard.data.view=i;ZEPHYR.Agile.TestBoard.data.page=h;ZEPHYR.Agile.TestBoard.data.isDetailView=e;ZEPHYR.Agile.TestBoard.data.projectKey=a}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/zephyr-test-board-header.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.HeaderView=Backbone.View.extend({initialize:function(){_.bindAll(this,"displayBacklogUI");this.render();ZEPHYR.Agile.TestBoard.globalDispatcher.bind(ZEPHYR.Agile.TestBoard.Events.BOARD_NAME_UPDATE,this.updateHeader,this)},updateHeader:function(a){AJS.$("#zephyr-tb-board-name").html(a)},displayBacklogUI:function(a){a.preventDefault();var b=AJS.$('.aui-nav-item[data-link-id="com.pyxis.greenhopper.jira:project-sidebar-'+ZEPHYR.Agile.TestBoard.data.mode+'-scrum"]');if(!b.length){b=AJS.$('.aui-nav-item[data-link-id="com.pyxis.greenhopper.jira:global-sidebar-'+ZEPHYR.Agile.TestBoard.data.mode+'-scrum"]')}AJS.$("#ghx-view-pluggable, #ghx-controls, .ghx-sprint-meta").show();AJS.$("#zephyr-tb-back-to-boards-wrapper").remove();if(b.length){if(navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0){window.location.href=b.attr("href")}else{ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(b.attr("href"),{trigger:false})}}b.trigger("click")},filterFocus:function(a){AJS.$(a.target).animate({width:"150px"},"fast","linear")},filterBlur:function(a){var c=AJS.$(a.target),b=AJS.$.trim(c.val());if(_.isEmpty(b)){c.animate({width:"48px"},"fast","linear")}},attachEvents:function(){AJS.$("#zephyr-tb-back-to-boards-button").unbind("click").bind("click",this.displayBacklogUI);AJS.$(".zephyr-tb-compact-toggle").unbind("click").bind("click",this.toggleCompactView);AJS.$("#zephyr-tb-sprint-search-input").unbind("keydown").bind("keydown",function(a){a.stopImmediatePropagation()}).unbind("keyup").bind("keyup",this.filterCycles).focus(this.filterFocus).blur(this.filterBlur);AJS.$("#zephyr-tb-issue-search-input").unbind("keydown").bind("keydown",function(a){a.stopImmediatePropagation()}).unbind("keyup").bind("keyup",this.filterIssues).focus(this.filterFocus).blur(this.filterBlur);AJS.$("#zephyr-tb-filter-cycle-icon").unbind("click").bind("click",function(a){a.preventDefault();if(AJS.$(a.target).hasClass("aui-iconfont-remove")){AJS.$("#zephyr-tb-sprint-search-input").val("").trigger("keyup").focus()}});AJS.$("#zephyr-tb-filter-issue-icon").unbind("click").bind("click",function(a){a.preventDefault();if(AJS.$(a.target).hasClass("aui-iconfont-remove")){AJS.$("#zephyr-tb-issue-search-input").val("").trigger("keyup").focus()}});AJS.$("#zephyr-tb-testboard-toggle-button").unbind("click").bind("click",function(b){b.preventDefault();var a=AJS.$(b.target).data("page");AJS.$(b.target).attr("disabled","disabled");ZEPHYR.Agile.TestBoard.navigateToTestBoardView(a)})},filterCycles:function(b){var c=b.which;if(c==13){b.preventDefault();return false}var a=AJS.$(b.target).val();ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.CYCLES_FILTER,a);if(a){AJS.$("#zephyr-tb-filter-cycle-icon").removeClass("aui-iconfont-search-small").addClass("aui-iconfont-remove")}else{AJS.$("#zephyr-tb-filter-cycle-icon").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small")}},filterIssues:function(b){var c=b.which;if(c==13){b.preventDefault();return false}var a=AJS.$(b.target).val();ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.ISSUES_FILTER,a);if(a){AJS.$("#zephyr-tb-filter-issue-icon").removeClass("aui-iconfont-search-small").addClass("aui-iconfont-remove")}else{AJS.$("#zephyr-tb-filter-issue-icon").removeClass("aui-iconfont-remove").addClass("aui-iconfont-search-small")}},toggleCompactView:function(a){a.preventDefault();if(AJS.$("body").hasClass("zephyr-tb-header-compact")){AJS.$("body").removeClass("zephyr-tb-header-compact")}else{AJS.$("body").addClass("zephyr-tb-header-compact")}},render:function(){var b="";if(GH.WorkControls&&GH.WorkControls.rapidViewConfig&&GH.WorkControls.rapidViewConfig.name){b=GH.WorkControls.rapidViewConfig.name}else{b=AJS.$("#ghx-board-name").text()||ZEPHYR.Agile.TestBoard.data.projectKey}AJS.$("#ghx-header, #ghx-operations").hide();AJS.$("#zephyr-tb-header, #zephyr-tb-operations").remove();var c=ZEPHYR.Templates.TestBoard.backToBoardsHTML({boardName:b,page:ZEPHYR.Agile.TestBoard.data.page});AJS.$(c).insertAfter("#ghx-header");var a=ZEPHYR.Templates.TestBoard.testboardOperationsHTML();AJS.$(a).insertAfter("#ghx-operations");this.attachEvents();return this}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/zephyr-test-board-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.Events={RENDER_LAYOUT_SUCCESS:"RENDER_LAYOUT_SUCCESS",VERSION_SELECT_SPRINTS_GET:"VERSION_SELECT_SPRINTS_GET",EXECUTIONS_GET:"EXECUTIONS_GET",CYCLES_FILTER:"CYCLES_FILTER",CYCLES_COUNT_UPDATE:"CYCLES_COUNT_UPDATE",CYCLE_PROGRESS_BAR_UPDATE:"CYCLE_PROGRESS_BAR_UPDATE",VERSION_SELECT:"VERSION_SELECT",BOARD_NAME_UPDATE:"BOARD_NAME_UPDATE",ISSUES_FILTER:"ISSUES_FILTER",ISSUES_COUNT_UPDATE:"ISSUES_COUNT_UPDATE",ISSUE_PROGRESS_BAR_UPDATE:"ISSUE_PROGRESS_BAR_UPDATE",};ZEPHYR.Agile.TestBoard.view="planning.test";ZEPHYR.Agile.TestBoard.viewDetail="planning.test.detail";ZEPHYR.Agile.TestBoard.versionAllCycles="all";ZEPHYR.Agile.TestBoard.page={};ZEPHYR.Agile.TestBoard.page.sprint="sprint";ZEPHYR.Agile.TestBoard.page.issues="issues";ZEPHYR.Agile.TestBoard.executionStatus=[];ZEPHYR.Agile.TestBoard.getTestLevelStatus=function(){AJS.$.ajax({url:getRestURL()+"/util/testExecutionStatus",type:"get",success:function(a){ZEPHYR.Agile.TestBoard.executionStatus=a},error:function(){}})};ZEPHYR.Agile.TestBoard.Loading={showLoadingIndicator:function(){AJS.dim();AJS.$(".aui-blanket").html('<span class="zephyr-tb-wait"></span>')},hideLoadingIndicator:function(){AJS.$(".aui-blanket").remove()}};ZEPHYR.Agile.TestBoard.auiSelect2={DIACRITICS:{"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z"},stripDiacritics:function(e){var b,d,a,f;if(!e||e.length<1){return e}b="";for(d=0,a=e.length;d<a;d++){f=e.charAt(d);b+=ZEPHYR.Agile.TestBoard.auiSelect2.DIACRITICS[f]||f}return b},markMatch:function(g,f,d,a,b){var e=ZEPHYR.Agile.TestBoard.auiSelect2.stripDiacritics(g.toUpperCase()).indexOf(ZEPHYR.Agile.TestBoard.auiSelect2.stripDiacritics(f.toUpperCase())),c=f.length;if(e<0){d.push(a(g));return}d.push(a(g.substring(0,e)));d.push("<span class='select2-match'>");d.push(a(g.substring(e,e+c)));d.push("</span>");d.push(a(g.substring(e+c,g.length)));if(b&&b.length){b.attr("title",g)}},formatResult:function(b,c,e,a){var d=[];ZEPHYR.Agile.TestBoard.auiSelect2.markMatch(b.text,e.term,d,a,c);return d.join("")},formatSelection:function(c,b,a){if(b&&b.length){b.attr("title",c.text).text(c.text)}else{return c?a(c.text):undefined}}};ZEPHYR.Agile.TestBoard.globalDispatcher=_.extend({},Backbone.Events);ZEPHYR.Agile.TestBoard.setTestBoardParams=function(){ZEPHYR.Agile.TestBoard.views={};var b=AJS.$("#zephyr-tb-agile-board-id").val(),a=AJS.$("#zephyr-tb-agile-board-mode").val();ZEPHYR.Agile.TestBoard.data={testBoardElId:"ghx-plan",projectId:JIRA.API.Projects.getCurrentProjectId(),projectKey:JIRA.API.Projects.getCurrentProjectKey(),agileBoardId:b,mode:a}};ZEPHYR.Agile.TestBoard.escapeString=function(a){if(a){return a.toString().replace(/\\/g,"\\\\").replace(/\u0008/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"')}};ZEPHYR.Agile.TestBoard.showErrorMessage=function(a,d,c){var b=false;if(a.status==403){b=true}showErrorMessage(d,3000,b)};ZEPHYR.Agile.TestBoard.navigateToTestBoardView=function(a){ZEPHYR.Agile.TestBoard.setTestBoardParams();ZEPHYR.Agile.TestBoard.data.page=a;ZEPHYR.Agile.TestBoard.Router.URL.setParams();ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(ZEPHYR.Agile.TestBoard.Router.URL.href,{trigger:false});ZEPHYR.Agile.TestBoard.initTestBoard(a)};ZEPHYR.Agile.TestBoard.initTestBoard=function(a){a=a||ZEPHYR.Agile.TestBoard.page.sprint;AJS.$("#ghx-plan").html("").show();AJS.$("#ghx-report, #ghx-work, .ghx-sprint-meta").hide();if(a==ZEPHYR.Agile.TestBoard.page.sprint){ZEPHYR.Agile.TestBoard.getTestLevelStatus();ZEPHYR.Agile.TestBoard.views.sprintBoard=new ZEPHYR.Agile.TestBoard.SprintBoardView({el:"#"+ZEPHYR.Agile.TestBoard.data.testBoardElId});ZEPHYR.Agile.TestBoard.views.sprintBoard.render()}else{if(a==ZEPHYR.Agile.TestBoard.page.issues){ZEPHYR.Agile.TestBoard.getTestLevelStatus();ZEPHYR.Agile.TestBoard.views.issuesBoard=new ZEPHYR.Agile.TestBoard.IssuesBoardView({el:"#"+ZEPHYR.Agile.TestBoard.data.testBoardElId});ZEPHYR.Agile.TestBoard.views.issuesBoard.render()}}ZEPHYR.page="testview-"+a};ZEPHYR.Agile.TestBoard.updateContentAreaHeight=function(){var b=AJS.$("#"+ZEPHYR.Agile.TestBoard.data.testBoardElId);if(b.size()){var a=AJS.$(window).height()-2;var c=b.offset();if(c&&c.top){a-=c.top}b.css({height:a})}};ZEPHYR.Agile.TestBoard.processData=function(c){var b=c.projects||[];if(!b.length){ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator();AJS.messages.warning("#aui-message-bar",{body:"This board does not have any projects or you do not have permission to view it."});return}ZEPHYR.Agile.TestBoard.data.projects=new ZEPHYR.Agile.TestBoard.ProjectCollection(b);ZEPHYR.Agile.TestBoard.data.sprints=new ZEPHYR.Agile.TestBoard.SprintCollection(c.sprints);if(ZEPHYR.Agile.TestBoard.data.page==ZEPHYR.Agile.TestBoard.page.sprint){ZEPHYR.Agile.TestBoard.data.versionList=c.versionData;ZEPHYR.Agile.TestBoard.Menu.init();ZEPHYR.Agile.TestBoard.views.sprintsView=new ZEPHYR.Agile.TestBoard.SprintsView({el:"#zephyr-tb-sprints-column",model:ZEPHYR.Agile.TestBoard.data.sprints});ZEPHYR.Agile.TestBoard.views.sprintsView.render();ZEPHYR.Agile.TestBoard.views.sprintBoard.trigger(ZEPHYR.Agile.TestBoard.Events.RENDER_LAYOUT_SUCCESS)}else{if(ZEPHYR.Agile.TestBoard.data.page==ZEPHYR.Agile.TestBoard.page.issues){var a=c.issues;ZEPHYR.Agile.TestBoard.data.issues=new ZEPHYR.Agile.TestBoard.IssueCollection(a);ZEPHYR.Agile.TestBoard.views.issuesBoard.trigger(ZEPHYR.Agile.TestBoard.Events.RENDER_LAYOUT_SUCCESS)}}ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator()};ZEPHYR.Agile.TestBoard.loadData=function(){var c={rapidViewId:ZEPHYR.Agile.TestBoard.data.agileBoardId};ZEPHYR.Agile.TestBoard.Loading.showLoadingIndicator();var a={url:contextPath+"/rest/greenhopper/1.0/xboard/plan/backlog/data.json",data:c};var b=AJS.$.ajax(a).done(ZEPHYR.Agile.TestBoard.processData);b.fail(function(){ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator()});return b.promise()};ZEPHYR.Agile.TestBoard.TestBoardView=Backbone.View.extend({initialize:function(){ZEPHYR.Agile.TestBoard.globalDispatcher.bind(ZEPHYR.Agile.TestBoard.Events.VERSION_SELECT_SPRINTS_GET,this.fetchSprints,this)},attachViews:function(){var a=new ZEPHYR.Agile.TestBoard.HeaderView()},render:function(){this.renderHTML=ZEPHYR.Templates.TestBoard.testBoardLayout({page:ZEPHYR.Agile.TestBoard.data.page});this.$el.html(this.renderHTML);this.attachViews();ZEPHYR.Agile.TestBoard.loadData();return this}});AJS.$(document).bind("ajaxStop",function(){AJS.$("#zephyr-tb-testboard-toggle-button").removeAttr("disabled")});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/zephyr-test-board-execution.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.EXECUTION_MAX_RESULT_ALLOWED=10;ZEPHYR.Agile.TestBoard.Execution=Backbone.Model.extend();ZEPHYR.Agile.TestBoard.ExecutionCollection=Backbone.Collection.extend({model:ZEPHYR.Agile.TestBoard.Execution,url:function(){if(ZEPHYR.Agile.TestBoard.data.page==ZEPHYR.Agile.TestBoard.page.sprint){return getRestURL()+"/zql/executeSearch"}else{if(ZEPHYR.Agile.TestBoard.data.page==ZEPHYR.Agile.TestBoard.page.issues){return getRestURL()+"/execution/executionsByIssue"}}},parse:function(b,a){this.offset=b.offset;this.currentIndex=b.currentIndex;this.maxResultAllowed=b.maxResultAllowed;this.linksNew=b.linksNew;this.totalCount=b.totalCount;this.executionStatus=b.executionStatuses;return b.executions}});ZEPHYR.Agile.TestBoard.getCycleZQLQuery=function(f,b){var e=f[0],d=f[1],a=f[2],c='project = "'+ZEPHYR.Agile.TestBoard.escapeString(a)+'" AND fixVersion = "'+ZEPHYR.Agile.TestBoard.escapeString(e)+'" AND cycleName in ("'+ZEPHYR.Agile.TestBoard.escapeString(d)+'")';return appendSoyOutputOnCall(encodeURIComponent(c),b)};ZEPHYR.Agile.TestBoard.ExecutionPaginationView=Backbone.View.extend({tagName:"div",events:{"click [id^='zql-pagination-']":"executePaginatedSearch","click [id^='refreshZQLId']":"refreshZQLView"},initialize:function(a){this.eventId=(a.eventId)?"_"+a.eventId:"";this.model.bind("reset",this.render,this)},render:function(){if(this.model.length>0){var a=ZEPHYR.Templates.TestBoard.addZQLPaginationFooterHTML({totalCount:this.model.totalCount,currentIndex:this.model.currentIndex,maxAllowed:this.model.maxResultAllowed,linksNew:this.model.linksNew});this.$el.html(a)}else{this.$el.html("")}return this},executePaginatedSearch:function(ev){ev.preventDefault();this.offset=eval(ev.target.attributes["page-id"].value);this.currentOffset=(this.offset/ZEPHYR.Agile.TestBoard.EXECUTION_MAX_RESULT_ALLOWED)+1;ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.EXECUTIONS_GET+this.eventId,this.offset)},refreshZQLView:function(a){a.preventDefault();ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.EXECUTIONS_GET+this.eventId,this.offset)}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/zephyr-test-board.soy' */
// This file was automatically generated from zephyr-test-board.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ZEPHYR.Templates.TestBoard.
 */

if (typeof ZEPHYR == 'undefined') { var ZEPHYR = {}; }
if (typeof ZEPHYR.Templates == 'undefined') { ZEPHYR.Templates = {}; }
if (typeof ZEPHYR.Templates.TestBoard == 'undefined') { ZEPHYR.Templates.TestBoard = {}; }


ZEPHYR.Templates.TestBoard.testBoardLayout = function(opt_data, opt_ignored) {
  return '<div id="zephyr-tb-plan-group" class="zephyr-tb-plan-group"><div id="zephyr-tb-classification-menu-column" class="zephyr-tb-ide-menu zephyr-tb-classification-menu"/>' + ((opt_data.page == 'sprint') ? '<div id="zephyr-tb-version-column" class="zephyr-tb-version-column zephyr-tb-classification-column"/>' : '') + '<div id="zephyr-tb-sprints-column" class="zephyr-tb-sprints-column"/><div id="zephyr-tb-detail-column" class="zephyr-tb-detail-view" /></div>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.testBoardLayout.soyTemplateName = 'ZEPHYR.Templates.TestBoard.testBoardLayout';
}


ZEPHYR.Templates.TestBoard.classificationMenuHTML = function(opt_data, opt_ignored) {
  return '<ul id="zephyr-tb-classification-menu" class="zephyr-tb-ide-menu zephyr-tb-classification-menu"><li role="button" id="zephyr-tb-version-toggle" data-target-id="zephyr-tb-version-column" class="js-version-toggle zephyr-tb-version-toggle zephyr-tb-active" title="' + soy.$$escapeHtml("Show versions panel") + '"><span class="zephyr-tb-inner" data-target-id="zephyr-tb-version-column">' + soy.$$escapeHtml("Versions") + '</span></li></ul>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.classificationMenuHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.classificationMenuHTML';
}


ZEPHYR.Templates.TestBoard.versionsHTML = function(opt_data, opt_ignored) {
  var output = '<div class="zephyr-tb-classification-group"><div class="zephyr-tb-classification-header"><div class="zephyr-tb-actions"><div class="zephyr-tb-close js-release-toggle zephyr-tb-version-close" title="' + soy.$$escapeHtml("Hide versions panel") + '"><span class="zephyr-tb-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml("Versions") + '</h2></div><div class="zephyr-tb-classification-scrollview"><div class="zephyr-tb-classification-item zephyr-tb-classification-all" data-version-id="' + soy.$$escapeHtml(opt_data.allVersionIds) + '" data-project-id="' + soy.$$escapeHtml(opt_data.allProjectIds) + '"><div class="zephyr-tb-inner"><div class="zephyr-tb-header"><h3 class="zephyr-tb-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml("All cycles") + '</span></h3></div></div></div><div class="zephyr-tb-classification-cards">';
  var versionList26 = opt_data.versions;
  var versionListLen26 = versionList26.length;
  for (var versionIndex26 = 0; versionIndex26 < versionListLen26; versionIndex26++) {
    var versionData26 = versionList26[versionIndex26];
    output += (versionData26.released == false) ? '<div class="zephyr-tb-classification-item zephyr-tb-closed" data-project-id="' + soy.$$escapeHtml(versionData26.projectId) + '" data-version-id="' + soy.$$escapeHtml(versionData26.versionId) + '"><div class="zephyr-tb-inner"><div class="zephyr-tb-header"><h3 class="zephyr-tb-name">' + ((opt_data.showProjectName) ? '<span class="zephyr-tb-project-key" title="' + soy.$$escapeHtml(versionData26.projectId) + '">' + soy.$$escapeHtml(versionData26.projectName) + '</span>' : '') + '<span class="js-version-name" role="button"><span class="field-value js-editable-field js-edit-versionName-trigger" data-fieldname="' + soy.$$escapeHtml(versionData26.name) + '" data-project-id="' + soy.$$escapeHtml(versionData26.projectId) + '" data-fieldvalue="' + soy.$$escapeHtml(versionData26.id) + '">' + soy.$$escapeHtml(versionData26.name) + '</span></span></h3></div></div></div>' : '';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.versionsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.versionsHTML';
}


ZEPHYR.Templates.TestBoard.backToBoardsHTML = function(opt_data, opt_ignored) {
  return '<div id="zephyr-tb-header"><div id="ghx-modes-tools"><span id="ghx-view-pluggable"><div class="ghx-view-section"><div id="zephyr-tb-back-to-boards-wrapper" class="ghx-view-section"><button id="zephyr-tb-testboard-toggle-button" disabled="disabled" data-page="' + ((opt_data.page == 'sprint') ? 'issues' : (opt_data.page == 'issues') ? 'sprint' : '') + '" class="aui-button">' + ((opt_data.page == 'sprint') ? soy.$$escapeHtml("Test View") + '&nbsp;-&nbsp;' + soy.$$escapeHtml("By Issues") : (opt_data.page == 'issues') ? soy.$$escapeHtml("Test View") + '&nbsp;-&nbsp;' + soy.$$escapeHtml("By Sprint") : '') + '</button><button id="zephyr-tb-back-to-boards-button" class="aui-button">' + soy.$$escapeHtml("Back to Boards") + '</button></div></div></span><div id="ghx-view-presentation"><button id="zephyr-tb-compact-toggle" class="aui-button zephyr-tb-compact-toggle js-compact-toggle" title="' + soy.$$escapeHtml("Hide the header ( Z )") + '"><span class="aui-icon ghx-iconfont aui-icon-small aui-iconfont-arrows-up"></span></button></div></div><div id="ghx-view-selector"><h1><span id="zephyr-tb-board-name" class="subnav-page-header">' + soy.$$escapeHtml(opt_data.boardName) + '</span><span class="subnav-container"><span id="subnav-title"><span class="subnavigator-title" title="' + soy.$$escapeHtml("Backlog") + '&nbsp;' + ((opt_data.page == 'sprint') ? '(' + soy.$$escapeHtml("By Sprint") + ')' : (opt_data.page == 'issues') ? '(' + soy.$$escapeHtml("By Issues") + ')' : '') + '">' + soy.$$escapeHtml("Backlog") + '&nbsp;' + ((opt_data.page == 'sprint') ? '(' + soy.$$escapeHtml("By Sprint") + ')' : (opt_data.page == 'issues') ? '(' + soy.$$escapeHtml("By Issues") + ')' : '') + '</span><form onsubmit="return false;" id="zephyr-tb-sprint-search" class="aui">' + ((opt_data.page == 'sprint') ? '<div class="zephyr-tb-sprint-search"><input class="text zephyr-tb-search" title="' + soy.$$escapeHtml("Filter by cycle name") + '" type="text" id="zephyr-tb-sprint-search-input" /><span title="' + soy.$$escapeHtml("Filter by cycle name") + '" id="zephyr-tb-filter-cycle-icon" class="js-search-trigger zephyr-tb-iconfont aui-icon aui-icon-small aui-iconfont-search-small"></span></div>' : (opt_data.page == 'issues') ? '<div class="zephyr-tb-issues-search"><input class="text zephyr-tb-search" title="' + soy.$$escapeHtml("Filter by issue key and summary") + '" type="text" id="zephyr-tb-issue-search-input" /><span title="' + soy.$$escapeHtml("Filter by issue key and summary") + '" id="zephyr-tb-filter-issue-icon" class="js-search-trigger zephyr-tb-iconfont aui-icon aui-icon-small aui-iconfont-search-small"></span></div>' : '') + '</form></span></span></h1></div><div class="active zfj-permission-test-view" id="zfj-permission-message-bar-test-view"/><div id="aui-message-bar" class="zephyr-tb-message-bar"></div>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.backToBoardsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.backToBoardsHTML';
}


ZEPHYR.Templates.TestBoard.testboardOperationsHTML = function(opt_data, opt_ignored) {
  return '<div id="zephyr-tb-operations"><div id="zephyr-tb-controls"><div id="zephyr-tb-controls-plan" class="zephyr-tb-controls-plan zephyr-tb-controls-list"><button class="aui-button zephyr-tb-compact-toggle js-compact-toggle" title="' + soy.$$escapeHtml("Hide the header ( Z )") + '"><span class="aui-icon zephyr-tb-iconfont aui-icon-small aui-iconfont-arrows-down"></span></button></div></div></div>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.testboardOperationsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.testboardOperationsHTML';
}


ZEPHYR.Templates.TestBoard.addZQLPaginationFooterHTML = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group count-pagination navigator-results" id="displayDetailId"><div class="results-count aui-item">' + ((opt_data.currentIndex * opt_data.maxAllowed < opt_data.totalCount) ? '<span class=\'results-count-start\'>' + soy.$$escapeHtml((opt_data.currentIndex - 1) * opt_data.maxAllowed + 1) + '</span><span>-</span><span class="results-count-end">' + soy.$$escapeHtml(opt_data.currentIndex * opt_data.maxAllowed) + '</span><span> of </span><span class="results-count-total results-count-link"> ' + soy.$$escapeHtml(opt_data.totalCount) + ' </span>' : '<span class=\'results-count-start\'>' + soy.$$escapeHtml((opt_data.currentIndex - 1) * opt_data.maxAllowed + 1) + '</span><span>-</span><span class="results-count-end">' + soy.$$escapeHtml(opt_data.totalCount) + '</span><span> of </span><span class="results-count-total results-count-link"> ' + soy.$$escapeHtml(opt_data.totalCount) + ' </span>') + '<a href="#" id=\'refreshZQLId\' class="refresh-table" title="Refresh results"><span class="aui-icon aui-icon-small aui-iconfont-build"/></a></div>';
  if (opt_data.linksNew.length > 0) {
    output += '<div class="pagination aui-item" id="zqlPageId">' + ((opt_data.currentIndex > 1) ? '<a href=\'#\' id=\'zql-pagination-' + soy.$$escapeHtml(opt_data.currentIndex - 2) + ' * ' + soy.$$escapeHtml(opt_data.maxAllowed) + '\' page-id=\'' + soy.$$escapeHtml(opt_data.currentIndex - 2) + '*' + soy.$$escapeHtml(opt_data.maxAllowed) + '\' class=\'icon icon-previous push-state\'><span>Previous &gt;&gt;</span></a>' : '');
    var linkList152 = opt_data.linksNew;
    var linkListLen152 = linkList152.length;
    for (var linkIndex152 = 0; linkIndex152 < linkListLen152; linkIndex152++) {
      var linkData152 = linkList152[linkIndex152];
      output += (linkData152 == opt_data.currentIndex) ? '<strong>' + soy.$$escapeHtml(linkData152) + '&nbsp;</strong>' : '<a href=\'#\' id=\'zql-pagination-' + soy.$$escapeHtml(linkData152 - 1) + '*' + soy.$$escapeHtml(opt_data.maxAllowed) + '\' page-id=\'' + soy.$$escapeHtml(linkData152 - 1) + '*' + soy.$$escapeHtml(opt_data.maxAllowed) + '\'>' + soy.$$escapeHtml(linkData152) + '&nbsp;</a>';
    }
    output += ((opt_data.currentIndex * opt_data.maxAllowed < opt_data.totalCount) ? '<a href=\'#\' id=\'zql-pagination-' + soy.$$escapeHtml(opt_data.currentIndex) + ' * ' + soy.$$escapeHtml(opt_data.maxAllowed) + '\' page-id=\'' + soy.$$escapeHtml(opt_data.currentIndex) + ' * ' + soy.$$escapeHtml(opt_data.maxAllowed) + '\' class=\'icon icon-next\'><span>Next &gt;&gt;</span></a>' : '') + '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.addZQLPaginationFooterHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.addZQLPaginationFooterHTML';
}


ZEPHYR.Templates.TestBoard.defectColumnValue = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.defects && opt_data.defects.length) {
    var defectList187 = opt_data.defects;
    var defectListLen187 = defectList187.length;
    for (var defectIndex187 = 0; defectIndex187 < defectListLen187; defectIndex187++) {
      var defectData187 = defectList187[defectIndex187];
      var defectStatus__soy188 = '' + convertToLowerCase([defectData187.defectStatus]);
      output += '<a ' + ((defectData187.defectResolutionId) ? ' style="text-decoration:line-through;"' : '') + ' href="' + soy.$$escapeHtml(contextPath) + '/browse/' + soy.$$escapeHtml(defectData187.defectKey) + '" data-defect-resolution="' + soy.$$escapeHtml(defectData187.defectResolutionId) + '" data-issueKey="' + soy.$$escapeHtml(defectData187.defectKey) + '" data-status="' + soy.$$escapeHtml(defectData187.defectStatus) + '" data-summary="' + soy.$$escapeHtml(defectData187.defectSummary) + '">' + soy.$$escapeHtml(defectData187.defectKey) + '</a>' + ((! (defectIndex187 == defectListLen187 - 1)) ? ', ' : '');
    }
  } else {
    output += soy.$$escapeHtml("-");
  }
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.defectColumnValue.soyTemplateName = 'ZEPHYR.Templates.TestBoard.defectColumnValue';
}


ZEPHYR.Templates.TestBoard.versionProgressHTML = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.summaryList && opt_data.summaryList.executionSummary) {
    output += '<div class="zephyr-tb-versions-table-progress"><div class="zephyr-tb-progressbar-container"><div class="zephyr-tb-progressbar zephyr-tb-progressbar-full">';
    var summaryList219 = opt_data.summaryList.executionSummary;
    var summaryListLen219 = summaryList219.length;
    for (var summaryIndex219 = 0; summaryIndex219 < summaryListLen219; summaryIndex219++) {
      var summaryData219 = summaryList219[summaryIndex219];
      output += (summaryData219.count > 0) ? '<div class="zephyr-tb-progressbar-entry" title="' + soy.$$escapeHtml(summaryData219.statusName) + ' ' + soy.$$escapeHtml(summaryData219.count) + ' / ' + soy.$$escapeHtml(Math.round(summaryData219.count / opt_data.totalExecutions * 100 * 100) / 100) + '%" style="background: ' + soy.$$escapeHtml(summaryData219.statusColor) + '; width:' + soy.$$escapeHtml(summaryData219.count * 160 / opt_data.totalExecutions) + 'px;"></div>' : '';
    }
    output += '</div></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.versionProgressHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.versionProgressHTML';
}
;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/zephyr-test-board-menu.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.Project=Backbone.Model.extend();ZEPHYR.Agile.TestBoard.ProjectCollection=Backbone.Collection.extend({model:ZEPHYR.Agile.TestBoard.Project});ZEPHYR.Agile.TestBoard.Version=Backbone.Model.extend();ZEPHYR.Agile.TestBoard.VersionCollection=Backbone.Collection.extend({model:ZEPHYR.Agile.TestBoard.Version,url:function(){return getRestURL()+"/util/versionBoard-list?projectId="+ZEPHYR.Agile.TestBoard.data.projectId},parse:function(b,a){return b}});ZEPHYR.Agile.TestBoard.VersionsView=Backbone.View.extend({events:{"click .zephyr-tb-version-close":"hideVersionNav","click .zephyr-tb-classification-item":"selectVersion"},initialize:function(a){this.showProjectName=a.showProjectName},selectVersion:function(c){var d=AJS.$(c.target).closest(".zephyr-tb-classification-item"),b=d.data("version-id"),a=d.data("project-id");this.$el.find(".zephyr-tb-classification-item").removeClass("zephyr-tb-selected");d.addClass("zephyr-tb-selected");AJS.$("#zephyr-tb-detail-column").html("").width(0);AJS.$(".zephyr-tb-issue-content").removeClass("zephyr-tb-selected");ZEPHYR.Agile.TestBoard.data.versionId=b;ZEPHYR.Agile.TestBoard.data.selectedSprint=null;ZEPHYR.Agile.TestBoard.data.selectedCycle=null;ZEPHYR.Agile.TestBoard.data.selectedStatus=null;ZEPHYR.Agile.TestBoard.data.projectId=a;if(d.hasClass("zephyr-tb-classification-all")){this.getAllVersions()}else{this.getVersionById(b)}ZEPHYR.Agile.TestBoard.Router.URL.setParams();ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(ZEPHYR.Agile.TestBoard.Router.URL.getURL(),{trigger:false});ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.VERSION_SELECT_SPRINTS_GET)},hideVersionNav:function(){this.$el.hide();AJS.$("#"+ZEPHYR.Agile.TestBoard.data.testBoardElId).removeClass("zephyr-tb-version-expanded");ZEPHYR.Agile.TestBoard.data.isVersionsVisible=false;ZEPHYR.Agile.TestBoard.Router.URL.setParams();ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(ZEPHYR.Agile.TestBoard.Router.URL.getURL(),{trigger:false})},getAllVersionIds:function(){var a=_.pluck(this.model.toJSON(),"versionId");return _.unique(a)},getAllProjectIds:function(){var a=_.pluck(ZEPHYR.Agile.TestBoard.data.projects.toJSON(),"id");return a},getAllVersions:function(){var a=this.model.toJSON()||[];ZEPHYR.Agile.TestBoard.data.versions=a},getVersionById:function(b){var a=this.model.toJSON()||[];ZEPHYR.Agile.TestBoard.data.versions=[];if(a.length){_.each(a,function(c){if(c.versionId==b){ZEPHYR.Agile.TestBoard.data.versions.push(c)}})}},render:function(){var a=this.model.toJSON()||[];var c=this.getAllVersionIds();var b=this.getAllProjectIds();var e=ZEPHYR.Templates.TestBoard.versionsHTML({versions:a,allVersionIds:c,allProjectIds:b,showProjectName:this.showProjectName});this.$el.html(e);if(!AJS.$("#"+ZEPHYR.Agile.TestBoard.data.testBoardElId+".zephyr-tb-version-expanded").length){this.$el.hide()}var d=this.$el.find('.zephyr-tb-classification-item[data-version-id="'+ZEPHYR.Agile.TestBoard.data.versionId+'"]');if(d.length){if(d.hasClass("zephyr-tb-classification-all")){d.filter(".zephyr-tb-classification-all").addClass("zephyr-tb-selected");this.getAllVersions()}else{d.addClass("zephyr-tb-selected");this.getVersionById(ZEPHYR.Agile.TestBoard.data.versionId)}ZEPHYR.Agile.TestBoard.data.projectId=d.data("project-id")}else{ZEPHYR.Agile.TestBoard.data.versionId=this.$el.find(".zephyr-tb-classification-all").data("version-id");ZEPHYR.Agile.TestBoard.data.projectId=this.$el.find(".zephyr-tb-classification-all").data("project-id");this.$el.find(".zephyr-tb-classification-all").addClass("zephyr-tb-selected");this.getAllVersions()}return this}});ZEPHYR.Agile.TestBoard.Menu={init:function(){this.attachClassificationMenuWrapper();this.attachViews()},attachClassificationMenuWrapper:function(){var b=(ZEPHYR.Agile.TestBoard.data.projects)?ZEPHYR.Agile.TestBoard.data.projects.length:0;var a=ZEPHYR.Templates.TestBoard.classificationMenuHTML();AJS.$("#zephyr-tb-classification-menu-column").html(a);if(ZEPHYR.Agile.TestBoard.data.isVersionsVisible){AJS.$("#"+ZEPHYR.Agile.TestBoard.data.testBoardElId).addClass("zephyr-tb-version-expanded")}else{AJS.$("#"+ZEPHYR.Agile.TestBoard.data.testBoardElId).removeClass("zephyr-tb-version-expanded")}this.attachEvents()},attachEvents:function(){AJS.$("#zephyr-tb-classification-menu-column").find("#zephyr-tb-version-toggle").unbind("click").bind("click",function(b){b.preventDefault();var a=AJS.$(b.target).data("target-id");AJS.$("#"+ZEPHYR.Agile.TestBoard.data.testBoardElId).addClass("zephyr-tb-version-expanded");AJS.$("#"+a).show();ZEPHYR.Agile.TestBoard.data.isVersionsVisible=true;ZEPHYR.Agile.TestBoard.Router.URL.setParams();ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(ZEPHYR.Agile.TestBoard.Router.URL.getURL(),{trigger:false})})},attachViews:function(){this.attachVersionsView()},attachVersionsView:function(a){var c=(ZEPHYR.Agile.TestBoard.data.projects.length>1)?true:false;this.versions=new ZEPHYR.Agile.TestBoard.VersionCollection(b);var b=this.processVersions(this.versions);this.versionsView=new ZEPHYR.Agile.TestBoard.VersionsView({model:this.versions,el:"#zephyr-tb-version-column",showProjectName:c});this.versionsView.render()},processVersions:function(a){var b=ZEPHYR.Agile.TestBoard.data.versionList.versionsPerProject;if(ZEPHYR.Agile.TestBoard.data.projects.length){_.each(ZEPHYR.Agile.TestBoard.data.projects.models,function(d){a.add({id:-1+"-"+d.get("id"),versionId:-1,name:"Unscheduled",released:false,projectId:d.get("id"),projectKey:d.get("key"),projectName:d.get("name")});var c=_(b[d.id]).map(function(e,f){e.versionId=e.id;e.projectId=d.get("id");e.projectKey=d.get("key");e.projectName=d.get("name");return e});a.add(c)})}}};;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/sprint/zephyr-sprint-board-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.SprintBoardView=ZEPHYR.Agile.TestBoard.TestBoardView.extend({initialize:function(){_.bindAll(this,"removeDOMListeners");ZEPHYR.Agile.TestBoard.TestBoardView.prototype.initialize.call(this);this.bind(ZEPHYR.Agile.TestBoard.Events.RENDER_LAYOUT_SUCCESS,this.attachSprintsView,this)},fetchSprints:function(){ZEPHYR.Agile.TestBoard.Loading.showLoadingIndicator();ZEPHYR.Agile.TestBoard.views.sprintsView.render();ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator()},attachEvents:function(){try{AJS.whenIType("T").execute(function(){if(ZEPHYR.Agile.TestBoard.data.isDetailView){AJS.$(".zephyr-tb-detail-close").trigger("click")}else{if(ZEPHYR.Agile.TestBoard.data.selectedCycle){AJS.$('.zephyr-tb-cycle-content[data-cycle-id="'+ZEPHYR.Agile.TestBoard.data.selectedCycle+'"]').click()}}})}catch(a){console.log(a.message)}},attachSprintsView:function(){this.attachEvents()},removeDOMListeners:function(){this.unbind();if(typeof this.stopListening=="function"){this.stopListening()}}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/sprint/zephyr-sprint-board.soy' */
// This file was automatically generated from zephyr-sprint-board.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ZEPHYR.Templates.TestBoard.Sprint.
 */

if (typeof ZEPHYR == 'undefined') { var ZEPHYR = {}; }
if (typeof ZEPHYR.Templates == 'undefined') { ZEPHYR.Templates = {}; }
if (typeof ZEPHYR.Templates.TestBoard == 'undefined') { ZEPHYR.Templates.TestBoard = {}; }
if (typeof ZEPHYR.Templates.TestBoard.Sprint == 'undefined') { ZEPHYR.Templates.TestBoard.Sprint = {}; }


ZEPHYR.Templates.TestBoard.Sprint.sprintsHTML = function(opt_data, opt_ignored) {
  var output = '<div id="zephyr-tb-sprints-wrapper" class="zephyr-tb-sprints-wrapper zephyr-tb-border-left">';
  var sprintList4 = opt_data.sprints;
  var sprintListLen4 = sprintList4.length;
  for (var sprintIndex4 = 0; sprintIndex4 < sprintListLen4; sprintIndex4++) {
    var sprintData4 = sprintList4[sprintIndex4];
    output += '<div id="zephyr-tb-sprints-module-' + soy.$$escapeHtml(sprintData4.id) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData4.id) + '" class="module toggle-wrap expanded zephyr-je-sprint-group zephyr-tb-sprints-module"><div id="sprint-module-heading" class="mod-header sprint-module-heading"><h3 class="toggle-title"><span class="pseudo">&</span></h3><div class="zephyr-tb-name">' + soy.$$escapeHtml(sprintData4.name) + '</div><div class="zephyr-tb-issue-count" id="zephyr-tb-cycle-count"></div><div class="zephyr-tb-controls aui-group"><div class="aui-item"><a href="#sprint-module-dropdown-' + soy.$$escapeHtml(sprintData4.id) + '" aria-owns="sprint-module-dropdown-' + soy.$$escapeHtml(sprintData4.id) + '" class="aui-button aui-style-default aui-dropdown2-trigger zephyr-je-dropdown-trigger" data-sprint-id="' + soy.$$escapeHtml(sprintData4.id) + '" tabindex="0"><span class="aui-icon zephyr-tb-iconfont aui-icon-small aui-iconfont-more"></span></a><div id="sprint-module-dropdown-' + soy.$$escapeHtml(sprintData4.id) + '" class="aui-style-default aui-dropdown2"><ul class="aui-list-truncate"><li id="zephyr-tb-link-test-cycles_' + soy.$$escapeHtml(sprintData4.id) + '" class="zephyr-tb-link-test-cycles"><a href="#">' + soy.$$escapeHtml("Link Test Cycle(s)") + '</a></li></ul></div></div></div></div><div class="mod-content" id="sprint-content-container-' + soy.$$escapeHtml(sprintData4.id) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData4.id) + '"><div id="sprint-cycle-container-' + soy.$$escapeHtml(sprintData4.id) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData4.id) + '" class="sprint-cycle-container zephyr-tb-cycles js-cycle-list zephyr-tb-has-cycles"></div></div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.sprintsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.sprintsHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.cyclesHTML = function(opt_data, opt_ignored) {
  var output = '';
  var cycleIdList35 = soy.$$getMapKeys(opt_data.cycles);
  var cycleIdListLen35 = cycleIdList35.length;
  for (var cycleIdIndex35 = 0; cycleIdIndex35 < cycleIdListLen35; cycleIdIndex35++) {
    var cycleIdData35 = cycleIdList35[cycleIdIndex35];
    output += '<div class="zephyr-tb-cycle-compact' + ((cycleIdIndex35 == 0) ? ' zephyr-tb-cycle-compact-first' : '') + ((cycleIdIndex35 == cycleIdListLen35 - 1) ? ' zephyr-tb-cycle-compact-last' : '') + '" data-cycle-id="' + soy.$$escapeHtml(cycleIdData35) + '"><div class="zephyr-tb-cycle-content aui-group" data-cycle-id="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].id) + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].sprintId) + '" data-cycle-name="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].name) + '" data-version-name="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].versionName) + '" data-project-key="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].projectKey) + '"><div class="zephyr-tb-row aui-item"><span class="zephyr-tb-type" title="' + soy.$$escapeHtml(AJS.format("Click to view test execution in {0}",opt_data.cycles[cycleIdData35].versionId)) + '"><img src="' + soy.$$escapeHtml(contextPath) + '/download/resources/com.thed.zephyr.je/images/icons/repository_24x24.png"></span><div class="zephyr-tb-key"><a href=' + soy.$$escapeHtml(contextPath) + '/secure/enav/#?query=' + ZEPHYR.Agile.TestBoard.getCycleZQLQuery([opt_data.cycles[cycleIdData35].versionName, opt_data.cycles[cycleIdData35].name, opt_data.cycles[cycleIdData35].projectKey]) + ' title="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].name) + '" class="zephyr-tb-cycle-link js-key-link">' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].name) + '</a></div></div><div class="zephyr-tb-end zephyr-tb-row aui-item"><div class="zephyr-tb-version" title="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].versionName) + '"><span class="zephyr-tb-inner"><span class="aui-lozenge aui-lozenge-subtle zephyr-tb-version-lozenge">' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].versionName) + '</span></span></div><span class="zephyr-tb-versions-table zephyr-tb-end">' + ((opt_data.cycles[cycleIdData35].totalExecutions == 0) ? '<!--<span>' + soy.$$escapeHtml("No Tests") + '</span>-->' : ZEPHYR.Templates.TestBoard.versionProgressHTML({summaryList: opt_data.cycles[cycleIdData35].executionSummaries, totalExecutions: opt_data.cycles[cycleIdData35].totalExecutions}) + ((opt_data.cycles[cycleIdData35].totalExecutions > 0) ? '<span class="zephyr-tb-version-progress-percentage">' + soy.$$escapeHtml(Math.round(opt_data.cycles[cycleIdData35].totalExecuted * 100 / opt_data.cycles[cycleIdData35].totalExecutions * 100) / 100) + '%</span>' : '')) + '</span><span data-id="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].id) + '" title="' + soy.$$escapeHtml("Remove Cycle from Sprint") + '" data-version-id="' + soy.$$escapeHtml(opt_data.cycles[cycleIdData35].versionId) + '" class="aui-icon aui-icon-small aui-iconfont-remove zephyr-tb-cycle-remove"></span></div></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.cyclesHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.cyclesHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.cycleDetailsHTML = function(opt_data, opt_ignored) {
  return '<div id="zephyr-tb-detail-contents" class="zephyr-tb-detail-contents"><div id="zephyr-tb-detail-issue" class="zephyr-tb-detail-issue" data-cycle-id=""><div id="zephyr-tb-detail-head" class="zephyr-tb-detail-head js-issue-fields"><div class="zephyr-tb-controls"><div class="zephyr-tb-detail-close js-detailclose" title="' + soy.$$escapeHtml("Close detail ( T )") + '"><span class="zephyr-tb--iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml("Close detail ( T )") + '</span></div></div><div class="zephyr-tb-group"><span class="zephyr-tb-project-avatar"><img src="' + soy.$$escapeHtml(contextPath) + '/download/resources/com.thed.zephyr.je/images/icons/repository_24x24.png"></span><span id="zephyr-tb-js-sizer" class="zephyr-tb-sizer ui-resizable-handle ui-resizable-w" title="' + soy.$$escapeHtml("Resize Detail View") + '"><span class="zephyr-tb-icon zephyr-tb-icon-sizer"></span></span><div class="zephyr-tb-key-group"><div class="zephyr-tb-key js-view-in-jira"><span><a href=' + soy.$$escapeHtml(contextPath) + '/secure/enav/#?query=' + ZEPHYR.Agile.TestBoard.getCycleZQLQuery([opt_data.versionName, opt_data.cycleName, opt_data.projectKey]) + ' title="' + soy.$$escapeHtml(opt_data.cycleName) + '" >' + soy.$$escapeHtml(opt_data.cycleName) + '</a></span></div></div></div></div><div class="zephyr-tb-statistic-group"><div class="zephyr-tb-detail-statistic zephyr-tb-estimate js-estimate zephyr-tb-empty"><dl class="zephyr-tb-detail-list"><dt class="zephyr-tb-detail-term zephyr-tb-detail-filter">' + soy.$$escapeHtml("Filter By Status") + ':</dt><dd class="zephyr-tb-detail-description"><form class="aui">' + ZEPHYR.Templates.TestBoard.Sprint.executionStatusSelectHTML(opt_data) + '</form></dd></dl></div></div><div class="zephyr-tb-detail-nav-content" id="zephyr-tb-detail-execution-section"><div id="zephyr-tb-detail-section" class="zephyr-tb-detail-section" /><div id="execution-pagination-container" /><div id="zephyr-tb-executions-clear-height" style="clear: both; height: 10px;"></div></div><div class="zephyr-tb-detail-nav-menu" id="zephyr-tb-detail-execution-nav-menu"></div></div></div>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.cycleDetailsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.cycleDetailsHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.executionStatusSelectHTML = function(opt_data, opt_ignored) {
  var output = '<select class="aui select aui-ss-select"  multiple="multiple" id="zephyr-tb-status-dd" style="max-width: 80%">';
  var statusList119 = opt_data.executionStatus;
  var statusListLen119 = statusList119.length;
  for (var statusIndex119 = 0; statusIndex119 < statusListLen119; statusIndex119++) {
    var statusData119 = statusList119[statusIndex119];
    output += '<option value="' + soy.$$escapeHtml(statusData119.id) + '" data-id="' + soy.$$escapeHtml(statusData119.id) + '" data-name="' + soy.$$escapeHtml(statusData119.id) + '" rel="' + soy.$$escapeHtml(statusData119.name) + '" title="' + soy.$$escapeHtml(statusData119.description) + '">' + soy.$$escapeHtml(statusData119.name) + '</option>';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.executionStatusSelectHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.executionStatusSelectHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.executionDetailNavHTML = function(opt_data, opt_ignored) {
  return '<ul><li class="zephyr-tb-detail-nav-item zephyr-tb-selected"><a><span class="zephyr-tb-iconfont"><img src="' + soy.$$escapeHtml(contextPath) + '/download/resources/com.thed.zephyr.je/images/project/zephyr_feather_20x20.png"></span><b>' + soy.$$escapeHtml(opt_data.executionCount) + '</b></a></li></ul>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.executionDetailNavHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.executionDetailNavHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.executionsHTML = function(opt_data, opt_ignored) {
  var output = '<div class="zephyr-tb-container"><table class="aui" id="zephyr-tb-executions-table"><thead><tr><th id="sub-key" class="ghx-nowrap">' + soy.$$escapeHtml("ID") + '</th><th id="sub-status" class="">' + soy.$$escapeHtml("Status") + '</th><th id="sub-summary">' + soy.$$escapeHtml("Summary") + '</th><th id="sub-actions">' + soy.$$escapeHtml("Defect") + '</th><th></th></tr></thead><tbody>';
  if (opt_data.executions.length) {
    var executionList153 = opt_data.executions;
    var executionListLen153 = executionList153.length;
    for (var executionIndex153 = 0; executionIndex153 < executionListLen153; executionIndex153++) {
      var executionData153 = executionList153[executionIndex153];
      output += '<tr><td><a href="' + soy.$$escapeHtml(contextPath) + '/browse/' + soy.$$escapeHtml(executionData153.issueKey) + '">' + soy.$$escapeHtml(executionData153.issueKey) + '</a></td><td class="zephyr-break-word execution-status-td"><div class="field-group execution-status-container"><div id="execution-status-value-schedule-' + soy.$$escapeHtml(executionData153.id) + '" class="labels exec-status-container"><dl class="zfj-editable-field"><dd id="current-execution-status-dd-schedule-' + soy.$$escapeHtml(executionData153.id) + '" class="new-session-status" style="background-color:' + soy.$$escapeHtml(executionData153.status.color) + ';" title="' + soy.$$escapeHtml(executionData153.status.name) + ':' + soy.$$escapeHtml(executionData153.status.description) + '">' + soy.$$escapeHtml(executionData153.status.name) + '</dd><a id="executionStatus-labels-schedule-' + soy.$$escapeHtml(executionData153.id) + '" href="#" class="zfj-overlay-icon icon icon-edit-sml"><span rel="' + soy.$$escapeHtml(executionData153.status.id) + '">' + soy.$$escapeHtml(executionData153.status.name) + '</span></a></dl></div><div id="execution-field-select-schedule-' + soy.$$escapeHtml(executionData153.id) + '" style="display: none; "><select id="exec_status-schedule-' + soy.$$escapeHtml(executionData153.id) + '" class="select" style="height:auto; max-height: 200px; width:150px; z-index:10;" size="4">';
      var execList183 = opt_data.executionStatusList;
      var execListLen183 = execList183.length;
      for (var execIndex183 = 0; execIndex183 < execListLen183; execIndex183++) {
        var execData183 = execList183[execIndex183];
        output += (execData183.id == executionData153.status.id) ? '<option value="' + soy.$$escapeHtml(execData183.id) + '" selected="selected" rel="' + soy.$$escapeHtml(execData183.color) + '" title="' + soy.$$escapeHtml(execData183.description) + '">' + soy.$$escapeHtml(execData183.name) + '</option>' : '<option value="' + soy.$$escapeHtml(execData183.id) + '" rel="' + soy.$$escapeHtml(execData183.color) + '" title="' + soy.$$escapeHtml(execData183.description) + '">' + soy.$$escapeHtml(execData183.name) + '</option>';
      }
      output += '</select></div></div></td><td class="zephyr-break-word"><a href="' + soy.$$escapeHtml(contextPath) + '/browse/' + soy.$$escapeHtml(executionData153.issueKey) + '" title="' + soy.$$escapeHtml(executionData153.issueKey) + ' - ' + soy.$$escapeHtml(executionData153.issueSummary) + '">' + soy.$$escapeHtml(executionData153.issueSummary) + '</a></td><td class="zephyr-break-word">' + ((executionData153.totalDefectCount > 0) ? '<div class="zfj-defect-hover" data-issueKey="' + soy.$$escapeHtml(executionData153.issueKey) + '" data-executionId="' + soy.$$escapeHtml(executionData153.id) + '" data-color="' + soy.$$escapeHtml(executionData153.status.color) + '"><span class="aui-lozenge aui-lozenge-defects">' + soy.$$escapeHtml(executionData153.executionDefectCount) + ' | ' + soy.$$escapeHtml(executionData153.stepDefectCount) + '</span>' : '') + ZEPHYR.Templates.TestBoard.defectColumnValue({defects: executionData153.executionDefects}) + ((executionData153.defects) ? '</div>' : '') + '</td><td><button id="zephyr-td-detail-execute-test" class="aui-button zephyr-td-detail-execute-test" title="' + soy.$$escapeHtml("Execute Test") + '" data-index="' + soy.$$escapeHtml(executionIndex153) + '" data-href="' + soy.$$escapeHtml(contextPath) + '/secure/enav/#' + soy.$$escapeHtml(executionData153.id) + '?query=">E</a></button></td></tr>';
    }
  } else {
    output += '<tr><td colspan="4">' + soy.$$escapeHtml("No Tests found matching the request.") + '</td></tr>';
  }
  output += '</tbody></table></div>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.executionsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.executionsHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesHTML = function(opt_data, opt_ignored) {
  var output = '<div class="zephyr-tb-eval-lic"/><form class="aui"><div id="zephyr-tb-module"><div class="field-group"><label for="zephyr-tb-link-tests-project-select">' + soy.$$escapeHtml("Select Project") + '</label><select id="zephyr-tb-link-tests-project-select" class="select">';
  if (opt_data.projects && opt_data.projects.length != 0) {
    var projectList256 = opt_data.projects;
    var projectListLen256 = projectList256.length;
    for (var projectIndex256 = 0; projectIndex256 < projectListLen256; projectIndex256++) {
      var projectData256 = projectList256[projectIndex256];
      output += '<option value="' + soy.$$escapeHtml(projectData256.id) + '"' + ((opt_data.selectedProjectId == projectData256.id) ? ' selected=selected' : '') + '>' + soy.$$escapeHtml(projectData256.name) + '</option>';
    }
  }
  output += '</select></div><br/><div class="field-group"><label for="zephyr-tb-link-tests-version-select">' + soy.$$escapeHtml("Select Version") + '</label><select id="zephyr-tb-link-tests-version-select" class="select" /></div><br/><div class="field-group"><label for="zephyr-tb-link-tests-cycle-select">' + soy.$$escapeHtml("Select Test Cycle") + '</label><select id="zephyr-tb-link-tests-cycle-select" class="select"/></div></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesCheckboxHTML = function(opt_data, opt_ignored) {
  return '<span><input type="checkbox" id="zephyr-tb-add-more-cycle" class="zephyr-tb-add-more-cycle" ' + ((opt_data.isLinked) ? 'checked="checked"' : '') + '><label title="' + soy.$$escapeHtml("Link to more Test Cycle(s)") + '" for="zephyr-tb-add-more-cycle">&nbsp;&nbsp;' + soy.$$escapeHtml("Link to more Test Cycle(s)") + '&nbsp;&nbsp;</label></span>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesCheckboxHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesCheckboxHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesConfirmationHTML = function(opt_data, opt_ignored) {
  return '<div class="zephyr-tb-eval-lic-confirm"/><form class="aui"><div class="form-body"><div id="cycle-aui-message-bar"><div class="aui-message warning" id=""><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format("The Cycle {0} will be moved from Sprint {1} to {2}.",opt_data.cycleName,opt_data.sprintName,opt_data.selectedSprintName)) + '</div></div><label for="unresolved-ignore" id="unresolved-ignore-label">' + soy.$$escapeHtml("Are you sure you want to continue?") + '</label></div></form>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesConfirmationHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesConfirmationHTML';
}


ZEPHYR.Templates.TestBoard.Sprint.removeCycleFromSprintHTML = function(opt_data, opt_ignored) {
  return '<div class="zephyr-tb-eval-lic"/><form class="aui"><div class="form-body"><div id="cycle-aui-message-bar"><div class="aui-message warning" id=""><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format("The Cycle {0} will be removed from Sprint {1}.",opt_data.cycleName,opt_data.sprintName)) + '</div></div><label for="unresolved-ignore" id="unresolved-ignore-label">' + soy.$$escapeHtml("Are you sure you want to continue?") + '</label></div></form>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Sprint.removeCycleFromSprintHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Sprint.removeCycleFromSprintHTML';
}
;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/issues/zephyr-issues-board-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}if(typeof ZEPHYR.Agile.TestBoard.Issues=="undefined"){ZEPHYR.Agile.TestBoard.Issues={}}ZEPHYR.Agile.TestBoard.IssuesBoardView=ZEPHYR.Agile.TestBoard.TestBoardView.extend({initialize:function(){_.bindAll(this,"removeDOMListeners");ZEPHYR.Agile.TestBoard.TestBoardView.prototype.initialize.call(this);this.bind(ZEPHYR.Agile.TestBoard.Events.RENDER_LAYOUT_SUCCESS,this.attachSprintsView,this)},attachSprintsView:function(){ZEPHYR.Agile.TestBoard.views.sprintsView=new ZEPHYR.Agile.TestBoard.Issues.SprintsView({el:"#zephyr-tb-sprints-column",model:ZEPHYR.Agile.TestBoard.data.sprints});ZEPHYR.Agile.TestBoard.views.sprintsView.render();ZEPHYR.defectHover.INLINE_DIALOG_OPTIONS.gravity=undefined},removeDOMListeners:function(){this.unbind();if(typeof this.stopListening=="function"){this.stopListening()}}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/issues/zephyr-issues-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}if(typeof ZEPHYR.Agile.TestBoard.Issues=="undefined"){ZEPHYR.Agile.TestBoard.Issues={}}ZEPHYR.Agile.TestBoard.Issues.ACTION_EXPAND="expand";ZEPHYR.Agile.TestBoard.Issues.ACTION_COLLAPSE="collapse";ZEPHYR.Agile.TestBoard.Issues.ClassNames={ACTION_ICON_EXPANDED:"aui-iconfont-expanded",ACTION_ICON_COLLAPSED:"aui-iconfont-collapsed",ACTION_ISSUES_EXPANDED:"zephyr-tb-issues-expanded"};ZEPHYR.Agile.TestBoard.Issue=Backbone.Model.extend();ZEPHYR.Agile.TestBoard.IssueCollection=Backbone.Collection.extend({model:ZEPHYR.Agile.TestBoard.Issue});ZEPHYR.Agile.TestBoard.Issues.SprintIssueView=Backbone.View.extend({initialize:function(a){_.bindAll(this,"toggleExecutions");this.issueId=this.model.get("id");this.sprintId=a.sprintId;this.attachEvents();ZEPHYR.Agile.TestBoard.globalDispatcher.off(ZEPHYR.Agile.TestBoard.Events.ISSUE_PROGRESS_BAR_UPDATE+"_"+this.issueId);ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.ISSUE_PROGRESS_BAR_UPDATE+"_"+this.issueId,this.updateExecutionSummaryDetails,this)},updateExecutionSummaryDetails:function(b){var a=this,c=parseInt(b);this.fetchIssuesBySprintAndIds(function(d){if(!d.successful){return}var e=d.successful[a.issueId];if(e){a.model.set(e);var g=ZEPHYR.Templates.TestBoard.versionProgressHTML({summaryList:a.model.get("executionSummaries"),totalExecutions:a.model.get("totalExecutions")}),f=((a.model.get("totalExecuted")*100)/a.model.get("totalExecutions")).toFixed(2);a.$el.find("span.zephyr-tb-versions-table").html(g).append('<span class="zephyr-tb-version-progress-percentage">'+f+"%</span>");if(a.model.get("action")){_.each(a.$el.find("#zephyr-tb-executions-table .zephyr-tb-sprint-issue-execution"),function(h){var i=AJS.$(h).attr("data-execution-id");if(i==c){a.executionView.fetchExecutions()}})}}})},fetchIssuesBySprintAndIds:function(b){var a=this;AJS.$.ajax({url:getRestURL()+"/execution/executionSummariesBySprintAndIssue",type:"POST",contentType:"application/json",data:JSON.stringify({sprintId:this.sprintId,issueIdOrKeys:this.issueId}),timeout:0,success:function(c){b(c)},error:function(c){AJS.$(".zephyr-tb-message-bar").html("");var e=JSON.parse(c.responseText);var d=e.message||e.errorDescHtml;ZEPHYR.Agile.TestBoard.showErrorMessage(c,d,3000,notFadeMessage)}})},attachViews:function(a){var b=this.model.get("id");if(!this.executions){this.executions=new ZEPHYR.Agile.TestBoard.ExecutionCollection()}if(!this.executionView){this.executionView=new ZEPHYR.Agile.TestBoard.Issues.ExecutionsView({el:"#zephyr-tb-issue-execution-container-"+b,model:this.executions,issueId:b})}this.executionView.action=a;return this},attachEvents:function(){var b=this.model.get("action"),d=this.model.get("id"),a=this.model.get("totalExecutions");this.$el.find(".zephyr-tb-toggle-header").unbind("click").bind("click",this.toggleExecutions);if(b==ZEPHYR.Agile.TestBoard.Issues.ACTION_EXPAND&&a>0){var c="#zephyr-tb-toggle-header-"+d;this.updateExecutionExpandAction(c);this.executionView.fetchExecutions()}},updateExecutionExpandAction:function(a){AJS.$(a).removeClass(ZEPHYR.Agile.TestBoard.Issues.ClassNames.ACTION_ICON_COLLAPSED).addClass(ZEPHYR.Agile.TestBoard.Issues.ClassNames.ACTION_ICON_EXPANDED);this.$el.addClass(ZEPHYR.Agile.TestBoard.Issues.ClassNames.ACTION_ISSUES_EXPANDED);this.model.set("action",ZEPHYR.Agile.TestBoard.Issues.ACTION_EXPAND);this.attachViews(ZEPHYR.Agile.TestBoard.Issues.ACTION_EXPAND)},updateExecutionCollapseAction:function(b){var a=this.model.get("id");AJS.$(b).removeClass(ZEPHYR.Agile.TestBoard.Issues.ClassNames.ACTION_ICON_EXPANDED).addClass(ZEPHYR.Agile.TestBoard.Issues.ClassNames.ACTION_ICON_COLLAPSED);this.$el.removeClass(ZEPHYR.Agile.TestBoard.Issues.ClassNames.ACTION_ISSUES_EXPANDED);AJS.$("#issue-execution-pagination-container-"+a).html("");this.model.set("action",ZEPHYR.Agile.TestBoard.Issues.ACTION_COLLAPSE);this.attachViews(ZEPHYR.Agile.TestBoard.Issues.ACTION_COLLAPSE)},toggleExecutions:function(b){var a=AJS.$(b.target).hasClass("aui-iconfont-collapsed");if(a){this.updateExecutionExpandAction(b.target)}else{this.updateExecutionCollapseAction(b.target)}this.executionView.fetchExecutions()}});ZEPHYR.Agile.TestBoard.Issues.SprintIssuesView=Backbone.View.extend({initialize:function(a){this.model.bind("reset",this.render,this);this.sprintId=a.sprintId;ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.ISSUES_FILTER,this.filterIssues,this)},filterIssues:function(b){b=(b)?b.toString().toLowerCase():"";var a=this.model.filter(function(c){var e=c.get("key").toLowerCase();var d=c.get("summary").toLowerCase();return(e.indexOf(b)>-1||d.indexOf(b)>-1)}).map(function(c){return c.attributes});this.displayIssues(a);ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.ISSUES_COUNT_UPDATE+"_"+this.sprintId,a.length)},attachIssueView:function(){var a=this;_.each(this.$el.find(".zephyr-tb-issue-compact"),function(d){var e=AJS.$(d).data("issue-id");var c=a.model.get(e);if(c){var b=new ZEPHYR.Agile.TestBoard.Issues.SprintIssueView({el:d,model:c,sprintId:a.sprintId})}})},displayIssues:function(b){var a=ZEPHYR.Templates.TestBoard.Issues.issuesHTML({issues:b});this.$el.html(a);this.attachIssueView()},render:function(){var a=this.model.toJSON();this.displayIssues(a);ZEPHYR.Agile.TestBoard.updateContentAreaHeight();ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator();return this}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/issues/zephyr-issues-sprints.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}if(typeof ZEPHYR.Agile.TestBoard.Issues=="undefined"){ZEPHYR.Agile.TestBoard.Issues={}}ZEPHYR.Agile.TestBoard.Issues.SprintView=Backbone.View.extend({initialize:function(){this.attachViews();this.sprintId=this.model.get("id");ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.ISSUES_COUNT_UPDATE+"_"+this.sprintId,this.displayIssuesCount,this);this.selectedCycleIds=[]},displayIssuesCount:function(b){var a;if(b<this.issueCount){a=AJS.format("{0} of {1} issues visible",b,this.issueCount)}else{a=AJS.format("{0} issues",b)}this.$el.find("#zephyr-tb-issues-count").html(a)},attachViews:function(){var b=this.model.get("id");var a=this;this.setIssuesByIds();this.issueView=new ZEPHYR.Agile.TestBoard.Issues.SprintIssuesView({el:"#sprint-issues-container-"+b,model:this.model.issues,sprintId:b,sprintName:this.model.get("name")});this.issueCount=this.model.issues.length;if(this.issueCount){this.fetchIssuesBySprintAndIds()}return this},getIssueIds:function(){var a=this.model.get("issuesIds");return a.toString()},fetchIssuesBySprintAndIds:function(){var c=this.model.get("id"),b=this.getIssueIds(),a=this;this.$el.find(".zephyr-tb-by-issues-sprint-wait").removeAttr("title");this.$el.find(".zephyr-tb-by-issues-sprint-wait").show();setTimeout(function(){a.$el.find(".zephyr-tb-by-issues-sprint-wait").attr("title","This operation is taking longer than expected.")},6000);AJS.$.ajax({url:getRestURL()+"/execution/executionSummariesBySprintAndIssue",type:"POST",contentType:"application/json",data:JSON.stringify({sprintId:c,issueIdOrKeys:b}),timeout:0,success:function(d){a.setIssueSatus(d);a.issueView.render();a.$el.find(".zephyr-tb-by-issues-sprint-wait").hide()},error:function(d){a.$el.find(".zephyr-tb-by-issues-sprint-wait").hide();var f=JSON.parse(d.responseText);if(d.status==403&&f.PERM_DENIED){AJS.$(".zfj-permission-test-view").addClass("active");showPermissionError(d);AJS.$(".zfj-permission-test-view").removeClass("active");a.issueView.render();return}if(!ZEPHYR.globalVars.unloaded){AJS.$(".zephyr-tb-message-bar").html("");var e=f.message||f.errorDescHtml||f.PERM_DENIED;ZEPHYR.Agile.TestBoard.showErrorMessage(d,e,3000)}}})},setIssueSatus:function(a){if(!a.successful){return}var b=a.successful;_.each(b,function(c,e){var d=this.model.issues.get(e);if(d){d.set(c)}},this);return this},setIssuesByIds:function(){var a=this.model.get("issuesIds");this.model.issues.reset([]);_.each(a,function(c){var b=ZEPHYR.Agile.TestBoard.data.issues.get(c);this.model.issues.add(b)},this)}});ZEPHYR.Agile.TestBoard.Issues.SprintsView=Backbone.View.extend({events:{"click .zephyr-tb-cycle-content":"displayCycleDetails"},initialize:function(){this.model.bind("reset",this.render,this);this.sprintRows=[]},attachSprintView:function(){var a=this;_.each(this.$el.find(".zephyr-tb-sprints-module"),function(b){var e=AJS.$(b).data("sprint-id");var d=a.model.get(e);if(d){var c=new ZEPHYR.Agile.TestBoard.Issues.SprintView({el:b,model:d});a.sprintRows.push(c)}})},render:function(){var a=this.model.toJSON();var b=ZEPHYR.Templates.TestBoard.Issues.sprintsHTML({sprints:a});this.$el.html(b);this.attachSprintView();ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator();return this}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/issues/zephyr-issues-executions.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}if(typeof ZEPHYR.Agile.TestBoard.Issues=="undefined"){ZEPHYR.Agile.TestBoard.Issues={}}ZEPHYR.Agile.TestBoard.Issues.ExecutionsView=Backbone.View.extend({events:{"click .zephyr-td-detail-execute-test":"navigateToExecuteTest"},initialize:function(a){_.bindAll(this,"getExecutionsBasedOnStatusUpdate");this.offset=0;this.issueId=a.issueId;this.attachViews();ZEPHYR.Agile.TestBoard.globalDispatcher.off(ZEPHYR.Agile.TestBoard.Events.EXECUTIONS_GET+"_"+this.issueId);ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.EXECUTIONS_GET+"_"+this.issueId,this.getExecutionsBasedOnOffset,this);jQuery(document).off("ScheduleUpdated");jQuery(document).on("ScheduleUpdated",this.getExecutionsBasedOnStatusUpdate)},getExecutionsBasedOnOffset:function(a){this.offset=a;this.fetchExecutions()},getExecutionsBasedOnStatusUpdate:function(b,a){_.each(AJS.$(".zephyr-tb-issue-compact"),function(c){if(AJS.$(c).find("span.zephyr-tb-versions-table")){var d=AJS.$(c).attr("data-issue-id");ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.ISSUE_PROGRESS_BAR_UPDATE+"_"+d,a)}})},navigateToExecuteTest:function(b){b.preventDefault();var d=AJS.$(b.target),a=d.data("index"),c=d.data("href");window.location.href=c},attachViews:function(){this.executionPaginationView=new ZEPHYR.Agile.TestBoard.ExecutionPaginationView({el:"#issue-execution-pagination-container-"+this.issueId,model:this.model,eventId:this.issueId})},getExecutionDataParams:function(b){var a={issueIdOrKey:this.issueId,offset:b,maxRecords:10,expand:"executionStatus",action:this.action};return a},fetchExecutions:function(){var b=this,a=this.getExecutionDataParams(this.offset);ZEPHYR.Agile.TestBoard.Loading.showLoadingIndicator();this.model.fetch({reset:true,data:a,timeout:0,success:function(d,c){if(b.action=="expand"){b.render()}else{b.$el.html("");AJS.$("#issue-execution-pagination-container-"+b.issueId).html("")}ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator()},error:function(d,c){ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator();AJS.$(".zephyr-tb-message-bar").html("");var f=JSON.parse(c.responseText);var e=f.error[0]||f.message||f.errorDescHtml;ZEPHYR.Agile.TestBoard.showErrorMessage(c,e,3000)}})},render:function(){var d=this.model.executionStatus,c=this.model.toJSON()||[],a=ZEPHYR.Templates.TestBoard.Issues.executionsHTML({executions:c,executionStatusList:d,issueId:this.issueId});this.$el.html(a);var b=AJS.$("#zephyr-tb-executions-table div.field-group.execution-status-container");AJS.$.each(b,function(e,g){var f=new ZEPHYR.Schedule.executionStatusView({el:g,elBeforeEdit:AJS.$(g).find("[id^=execution-status-value-schedule]"),elOnEdit:AJS.$(g).find("[id^=execution-field-select-schedule]")})});return this}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/issues/zephyr-issues-board.soy' */
// This file was automatically generated from zephyr-issues-board.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ZEPHYR.Templates.TestBoard.Issues.
 */

if (typeof ZEPHYR == 'undefined') { var ZEPHYR = {}; }
if (typeof ZEPHYR.Templates == 'undefined') { ZEPHYR.Templates = {}; }
if (typeof ZEPHYR.Templates.TestBoard == 'undefined') { ZEPHYR.Templates.TestBoard = {}; }
if (typeof ZEPHYR.Templates.TestBoard.Issues == 'undefined') { ZEPHYR.Templates.TestBoard.Issues = {}; }


ZEPHYR.Templates.TestBoard.Issues.sprintsHTML = function(opt_data, opt_ignored) {
  var output = '<div id="zephyr-tb-sprints-wrapper" class="zephyr-tb-sprints-wrapper">';
  var sprintList4 = opt_data.sprints;
  var sprintListLen4 = sprintList4.length;
  for (var sprintIndex4 = 0; sprintIndex4 < sprintListLen4; sprintIndex4++) {
    var sprintData4 = sprintList4[sprintIndex4];
    output += '<div id="zephyr-tb-sprints-module-' + soy.$$escapeHtml(sprintData4.id) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData4.id) + '" class="module toggle-wrap expanded zephyr-je-sprint-group zephyr-tb-sprints-module"><div id="sprint-module-heading" class="mod-header sprint-module-heading"><h3 class="toggle-title"><span class="pseudo">&</span></h3><div class="zephyr-tb-name">' + soy.$$escapeHtml(sprintData4.name) + '</div><div class="zephyr-tb-issue-count" id="zephyr-tb-issues-count">' + soy.$$escapeHtml(AJS.format("{0} issues",sprintData4.issuesIds.length)) + '</div><span class="aui-icon aui-icon-wait zfj-icon-wait zephyr-tb-by-issues-sprint-wait" style="display:none">Loading...</span></div><div class="mod-content" id="sprint-content-container-' + soy.$$escapeHtml(sprintData4.id) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData4.id) + '"><div id="sprint-issues-container-' + soy.$$escapeHtml(sprintData4.id) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData4.id) + '" class="sprint-issues-container zephyr-tb-issues js-issue-list"></div></div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Issues.sprintsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Issues.sprintsHTML';
}


ZEPHYR.Templates.TestBoard.Issues.issuesHTML = function(opt_data, opt_ignored) {
  var output = '<div id="zephyr-tb-issues-wrapper" class="zephyr-tb-issues-wrapper">';
  var issueList26 = opt_data.issues;
  var issueListLen26 = issueList26.length;
  for (var issueIndex26 = 0; issueIndex26 < issueListLen26; issueIndex26++) {
    var issueData26 = issueList26[issueIndex26];
    output += '<div class="js-issue zephyr-tb-issue-compact aui-group" data-issue-id="' + soy.$$escapeHtml(issueData26.id) + '" data-issue-key="' + soy.$$escapeHtml(issueData26.key) + '"><div class="zephyr-tb-issue-content"><div class="zephyr-tb-row aui-item">' + ((issueData26.totalExecutions > 0) ? '<span id="zephyr-tb-toggle-header-' + soy.$$escapeHtml(issueData26.id) + '" data-issue-id="' + soy.$$escapeHtml(issueData26.id) + '" class="aui-icon aui-icon-small aui-iconfont-collapsed zephyr-tb-toggle-header"/>' : '') + '<span class="zephyr-tb-type" title="' + soy.$$escapeHtml(issueData26.typeName) + '"><img src="' + soy.$$escapeHtml(issueData26.typeUrl) + '"></span><div class="zephyr-tb-flags"><span class="zephyr-tb-priority" title="' + soy.$$escapeHtml(issueData26.priorityName) + '"><img src="' + soy.$$escapeHtml(issueData26.priorityUrl) + '"></span></div><div class="zephyr-tb-key' + ((issueData26.done) ? ' zephyr-tb-line-through"' : '"') + '><a href="' + soy.$$escapeHtml(contextPath) + '/browse/' + soy.$$escapeHtml(issueData26.key) + '" title="' + soy.$$escapeHtml(issueData26.key) + '" class="js-key-link">' + soy.$$escapeHtml(issueData26.key) + '</a></div><div class="zephyr-tb-summary" title="' + soy.$$escapeHtml(issueData26.summary) + '"><span class="zephyr-tb-inner">' + soy.$$escapeHtml(issueData26.summary) + '</span></div></div></div><div class="zephyr-tb-end zephyr-tb-row aui-item">' + ((issueData26.totalExecutions > 0) ? '<div class="zephyr-tb-status"><span class="zephyr-tb-inner zephyr-tb-defect-hover-wrapper">' + ZEPHYR.Templates.TestBoard.Issues.defectCountHTML({totalDefectCount: issueData26.totalDefectCount, totalOpenDefectCount: issueData26.totalOpenDefectCount}) + '</span></div><span class="zephyr-tb-versions-table zephyr-tb-end">' + ZEPHYR.Templates.TestBoard.versionProgressHTML({summaryList: issueData26.executionSummaries, totalExecutions: issueData26.totalExecutions}) + '<span class="zephyr-tb-version-progress-percentage">' + soy.$$escapeHtml(Math.round(issueData26.totalExecuted * 100 / issueData26.totalExecutions * 100) / 100) + '%</span></span>' : '') + '</div><div class="zephyr-tb-issue-content-container" id="zephyr-tb-issue-content-container-' + soy.$$escapeHtml(issueData26.id) + '" data-issue-id="' + soy.$$escapeHtml(issueData26.id) + '"><div id="zephyr-tb-issue-execution-container-' + soy.$$escapeHtml(issueData26.id) + '" data-issue-id="' + soy.$$escapeHtml(issueData26.id) + '" class="zephyr-tb-issue-execution-container zephyr-tb-issue-executions js-execution-list"></div><div id="issue-execution-pagination-container-' + soy.$$escapeHtml(issueData26.id) + '" class="issue-execution-pagination-container" /></div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Issues.issuesHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Issues.issuesHTML';
}


ZEPHYR.Templates.TestBoard.Issues.executionsHTML = function(opt_data, opt_ignored) {
  var output = '<div class="zephyr-tb-container"><table class="aui aui-table-rowhover" id="zephyr-tb-executions-table"><thead><tr><th id="sub-key" class="ghx-nowrap">' + soy.$$escapeHtml("ID") + '</th><th id="sub-status" class="">' + soy.$$escapeHtml("Status") + '</th><th id="sub-summary">' + soy.$$escapeHtml("Summary") + '</th><th id="sub-cycle">' + soy.$$escapeHtml("Cycle") + '</th><th id="sub-actions">' + soy.$$escapeHtml("Defect") + '</th><th id="sub-executed-by">' + soy.$$escapeHtml("Executed By") + '</th><th id="sub-executed-on">' + soy.$$escapeHtml("Executed On") + '</th><th id="sub-execute-button"></th></tr></thead><tbody>';
  if (opt_data.executions.length) {
    var executionList110 = opt_data.executions;
    var executionListLen110 = executionList110.length;
    for (var executionIndex110 = 0; executionIndex110 < executionListLen110; executionIndex110++) {
      var executionData110 = executionList110[executionIndex110];
      output += '<tr class="zephyr-tb-sprint-issue-execution" data-execution-id="' + soy.$$escapeHtml(executionData110.id) + '"><td><a href="' + soy.$$escapeHtml(contextPath) + '/browse/' + soy.$$escapeHtml(executionData110.issueKey) + '">' + soy.$$escapeHtml(executionData110.issueKey) + '</a></td><td class="zephyr-break-word execution-status-td"><div class="field-group execution-status-container"><div id="execution-status-value-schedule_' + soy.$$escapeHtml(opt_data.issueId) + '-' + soy.$$escapeHtml(executionData110.id) + '" class="labels exec-status-container"><dl class="zfj-editable-field"><dd id="current-execution-status-dd-schedule_' + soy.$$escapeHtml(opt_data.issueId) + '-' + soy.$$escapeHtml(executionData110.id) + '" class="new-session-status" style="background-color:' + soy.$$escapeHtml(executionData110.status.color) + ';" title="' + soy.$$escapeHtml(executionData110.status.name) + ':' + soy.$$escapeHtml(executionData110.status.description) + '">' + soy.$$escapeHtml(executionData110.status.name) + '</dd><a id="executionStatus-labels-schedule_' + soy.$$escapeHtml(opt_data.issueId) + '-' + soy.$$escapeHtml(executionData110.id) + '" href="#" class="zfj-overlay-icon icon icon-edit-sml"><span rel="' + soy.$$escapeHtml(executionData110.status.id) + '">' + soy.$$escapeHtml(executionData110.status.name) + '</span></a></dl></div><div id="execution-field-select-schedule_' + soy.$$escapeHtml(opt_data.issueId) + '-' + soy.$$escapeHtml(executionData110.id) + '" style="display: none; "><select id="exec_status-schedule_' + soy.$$escapeHtml(opt_data.issueId) + '-' + soy.$$escapeHtml(executionData110.id) + '" class="select" style="height:auto; max-height: 200px; width:150px; z-index:10;" size="4">';
      var execList152 = opt_data.executionStatusList;
      var execListLen152 = execList152.length;
      for (var execIndex152 = 0; execIndex152 < execListLen152; execIndex152++) {
        var execData152 = execList152[execIndex152];
        output += (execData152.id == executionData110.status.id) ? '<option value="' + soy.$$escapeHtml(execData152.id) + '" selected="selected" rel="' + soy.$$escapeHtml(execData152.color) + '" title="' + soy.$$escapeHtml(execData152.description) + '">' + soy.$$escapeHtml(execData152.name) + '</option>' : '<option value="' + soy.$$escapeHtml(execData152.id) + '" rel="' + soy.$$escapeHtml(execData152.color) + '" title="' + soy.$$escapeHtml(execData152.description) + '">' + soy.$$escapeHtml(execData152.name) + '</option>';
      }
      output += '</select></div></div></td><td class="zephyr-break-word zephyr-td-issues-summary-td"><div class="zephyr-td-issues-summary-td-cell"><a href="' + soy.$$escapeHtml(contextPath) + '/browse/' + soy.$$escapeHtml(executionData110.issueKey) + '" title="' + soy.$$escapeHtml(executionData110.issueKey) + ' - ' + soy.$$escapeHtml(executionData110.issueSummary) + '">' + soy.$$escapeHtml(executionData110.issueSummary) + '</a></div></td><td class="zephyr-break-word zephyr-td-issues-summary-td"><div class="zephyr-td-issues-summary-td-cell"><a href="' + soy.$$escapeHtml(contextPath) + '/DisplayCycle.jspa?cycleId=' + soy.$$escapeHtml(executionData110.cycleId) + '&versionId=' + soy.$$escapeHtml(executionData110.versionId) + '&issueKey=' + soy.$$escapeHtml(executionData110.issueKey) + '" title="' + soy.$$escapeHtml(executionData110.cycleName) + '" class="zephyr-tb-cycle-link js-key-link">' + soy.$$escapeHtml(executionData110.cycleName) + '</a></div></td><td class="zephyr-break-word">' + ((executionData110.totalDefectCount > 0) ? '<div class="zfj-defect-hover" data-issueKey="' + soy.$$escapeHtml(executionData110.issueKey) + '" data-executionId="' + soy.$$escapeHtml(executionData110.id) + '" data-color="' + soy.$$escapeHtml(executionData110.status.color) + '"><span class="aui-lozenge aui-lozenge-defects">' + soy.$$escapeHtml(executionData110.executionDefectCount) + ' | ' + soy.$$escapeHtml(executionData110.stepDefectCount) + '</span>' : '') + ZEPHYR.Templates.TestBoard.defectColumnValue({defects: executionData110.executionDefects}) + ((executionData110.defects) ? '</div>' : '') + '</td><td class="zephyr-td-issues-user-td"><div class="zephyr-td-issues-summary-td-cell"><a class="user-hover" rel="' + soy.$$escapeHtml(executionData110.executedByUserName) + '" href="' + soy.$$escapeHtml(contextPath) + '/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(executionData110.executedByUserName) + '">' + soy.$$escapeHtml(executionData110.executedByDisplay) + '</a></div></td><td>' + soy.$$escapeHtml(executionData110.executedOn) + '</td><td><button id="zephyr-td-detail-execute-test" class="aui-button zephyr-td-detail-execute-test" title="' + soy.$$escapeHtml("Execute Test") + '" data-index="' + soy.$$escapeHtml(executionIndex110) + '" data-href="' + soy.$$escapeHtml(contextPath) + '/secure/enav/#' + soy.$$escapeHtml(executionData110.id) + '">E</a></button></td></tr>';
    }
  } else {
    output += '<tr><td colspan="4">' + soy.$$escapeHtml("No Tests found matching the request.") + '</td></tr>';
  }
  output += '</tbody></table></div>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Issues.executionsHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Issues.executionsHTML';
}


ZEPHYR.Templates.TestBoard.Issues.defectCountHTML = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-defects zephyr-tb-defect-hover" title="' + soy.$$escapeHtml(AJS.format("{0} Open defects of {1} total unique defects",opt_data.totalOpenDefectCount,opt_data.totalDefectCount)) + '">' + soy.$$escapeHtml(opt_data.totalOpenDefectCount) + '</span>';
};
if (goog.DEBUG) {
  ZEPHYR.Templates.TestBoard.Issues.defectCountHTML.soyTemplateName = 'ZEPHYR.Templates.TestBoard.Issues.defectCountHTML';
}
;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/sprint/zephyr-sprint-cycle-detail-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.minWidth=400;ZEPHYR.Agile.TestBoard.containerSelector="#zephyr-tb-sprints-wrapper";ZEPHYR.Agile.TestBoard.resizeUI={getContainer:function(){if(!ZEPHYR.Agile.TestBoard.container){ZEPHYR.Agile.TestBoard.container=AJS.$(ZEPHYR.Agile.TestBoard.containerSelector)}return ZEPHYR.Agile.TestBoard.container},checkBacklogWidth:function(){var a=ZEPHYR.Agile.TestBoard.resizeUI.getContainer().width();if(a<600){AJS.$("body").addClass("ghx-plan-band-1").removeClass("ghx-plan-band-2")}else{AJS.$("body").addClass("ghx-plan-band-2").removeClass("ghx-plan-band-1")}ZEPHYR.Agile.TestBoard.resizeUI.setExecutionDetailWidth();GH.planOnboarding.refresh()},attachResizable:function(){AJS.$("#zephyr-tb-detail-column").resizable({handles:{w:AJS.$("#zephyr-tb-js-sizer")},resize:ZEPHYR.Agile.TestBoard.resizeUI.checkBacklogWidth,stop:ZEPHYR.Agile.TestBoard.resizeUI.storeWidth,maxWidth:ZEPHYR.Agile.TestBoard.resizeUI.getMaxWidth(),minWidth:ZEPHYR.Agile.TestBoard.resizeUI.minWidth});ZEPHYR.Agile.TestBoard.resizeUI.setExecutionDetailWidth()},setExecutionDetailWidth:function(){var a=AJS.$("#zephyr-tb-detail-column").width();AJS.$("#zephyr-tb-detail-execution-section").width((a-40));AJS.$("#zephyr-tb-detail-section").width((a-60))},getMaxWidth:function(){return Math.max(ZEPHYR.Agile.TestBoard.minWidth,(AJS.$("#zephyr-tb-sprints-column").width()+AJS.$("#zephyr-tb-detail-column").width())/2)},setDetailViewWidth:function(a){localStorage.setItem("zephyr.tb.detailViewWidth",a)},getDetailViewWidth:function(){var a=localStorage.getItem("zephyr.tb.detailViewWidth")||400;return a},storeWidth:function(){var c=AJS.$("#zephyr-tb-detail-column").width();var d=c<=ZEPHYR.Agile.TestBoard.minWidth?ZEPHYR.Agile.TestBoard.minWidth:c;ZEPHYR.Agile.TestBoard.resizeUI.setDetailViewWidth(d);var b=function(f){return f>=ZEPHYR.Agile.TestBoard.minWidth&&f<=500};var e=function(f){return f>500&&f<=600};var a=function(f){return f>600}}};ZEPHYR.Agile.TestBoard.SprintCycleDetailView=Backbone.View.extend({events:{"click .zephyr-tb-detail-close":"hideCycleDetails","click .zephyr-td-detail-execute-test":"navigateToExecuteTest"},initialize:function(){_.bindAll(this,"getExecutionsBasedOnStatusUpdate","getZQLQuery","getExecutionDataParams");var a=this;this.cycleName=null;this.cycleId=null;this.clearStatus=false;this.model.bind("reset",this.renderExecutionUI,this);ZEPHYR.Agile.TestBoard.globalDispatcher.off(ZEPHYR.Agile.TestBoard.Events.EXECUTIONS_GET);ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.EXECUTIONS_GET,this.getExecutionsBasedOnOffset,this);jQuery(document).off("ScheduleUpdated");jQuery(document).on("ScheduleUpdated",a.getExecutionsBasedOnStatusUpdate)},attachViews:function(){var b=this;var c;this.attachExecutionStatusSelect();this.executionPaginationView=new ZEPHYR.Agile.TestBoard.ExecutionPaginationView({el:"#execution-pagination-container",model:this.model});var a=this.getExecutionDataParams(this.offset);this.fetchExecutions(a);AJS.$(window).resize(function(){clearTimeout(c);c=setTimeout(function(){b.resizeUIHeight()},250)});ZEPHYR.Agile.TestBoard.resizeUI.attachResizable()},attachExecutionStatusSelect:function(){var a=this;AJS.$("#zephyr-tb-status-dd").val(a.statusJSON.id);AJS.$("#zephyr-tb-status-dd").auiSelect2({allowClear:true}).on("change",function(c){a.statusId=AJS.$(c.target).val();a.offset=0;var b=a.getExecutionDataParams(a.offset);a.fetchExecutions(b);a.setSelectedStatusParams()});AJS.$(".select2-container").css({width:"80%"})},getStatusName:function(){var a=this.statusId,b=[];_.each(a,function(d){var c=ZEPHYR.Agile.TestBoard.executionStatus.filter(function(e){if(e.id==d){return true}});if(c&&c[0]){b.push('"'+ZEPHYR.Agile.TestBoard.escapeString(c[0].name)+'"')}});return b.toString()},getZQLQuery:function(c){var e=this.versionName;var a=this.getStatusName();var f=(a=="")?"":"AND executionStatus in ("+a+") ";var d=(c)?" AND cycleId="+this.cycleId:' AND cycleName in ("'+ZEPHYR.Agile.TestBoard.escapeString(this.cycleName)+'")';var b='project = "'+ZEPHYR.Agile.TestBoard.escapeString(this.projectKey)+'" AND fixVersion = "'+ZEPHYR.Agile.TestBoard.escapeString(e)+'"'+d+" "+f+" ORDER BY Execution ASC";return b},getExecutionDataParams:function(c){var b=this.getZQLQuery(true),a={zqlQuery:b,offset:c,maxRecords:10,expand:"executionStatus"};this.offset=c;return a},getExecutionsBasedOnOffset:function(b){var a=this.getExecutionDataParams(b);this.fetchExecutions(a);this.setSelectedStatusParams()},getExecutionsBasedOnStatusUpdate:function(){var a=this.getExecutionDataParams(this.offset);this.fetchExecutions(a);ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.CYCLE_PROGRESS_BAR_UPDATE+"_"+this.sprintId,this.cycleId)},fetchExecutions:function(c,b){var a=this,d=ZEPHYR.Agile.TestBoard.resizeUI.getDetailViewWidth();AJS.$("#zephyr-tb-detail-column").width(d);ZEPHYR.Agile.TestBoard.Loading.showLoadingIndicator();this.model.fetch({reset:true,data:c,success:function(f,e){if(b){b()}},error:function(f,e){ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator();AJS.$(".zephyr-tb-message-bar").html("");var h=JSON.parse(e.responseText);var g=h.error[0]||h.message||h.errorDescHtml;ZEPHYR.Agile.TestBoard.showErrorMessage(e,g,3000)}})},navigateToExecuteTest:function(c){c.preventDefault();var e=AJS.$(c.target),a=e.data("index"),d=e.data("href"),b=this.getZQLQuery(false);window.location.href=d+encodeURIComponent(b)+"&view=detail&offset="+(this.offset+a+1)},hideCycleDetails:function(a){this.$el.html("").width(0);AJS.$(".zephyr-tb-cycle-content").removeClass("zephyr-tb-selected");ZEPHYR.Agile.TestBoard.data.view=ZEPHYR.Agile.TestBoard.view;ZEPHYR.Agile.TestBoard.data.isDetailView=false;ZEPHYR.Agile.TestBoard.data.selectedStatus=null;ZEPHYR.Agile.TestBoard.Router.URL.setParams();ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(ZEPHYR.Agile.TestBoard.Router.URL.getURL(),{trigger:false})},renderExecutionUI:function(){var d=this.model.executionStatus,c=this.model.toJSON()||[],a=ZEPHYR.Templates.TestBoard.Sprint.executionsHTML({executions:c,executionStatusList:d});ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator();this.$el.find("#zephyr-tb-detail-section").html(a);var e=ZEPHYR.Templates.TestBoard.Sprint.executionDetailNavHTML({executionCount:(this.model.totalCount||0)});AJS.$("#zephyr-tb-detail-execution-nav-menu").html(e);var b=AJS.$("#zephyr-tb-executions-table div.field-group.execution-status-container");AJS.$.each(b,function(f,h){var g=new ZEPHYR.Schedule.executionStatusView({el:h,elBeforeEdit:AJS.$(h).find("[id^=execution-status-value-schedule-]"),elOnEdit:AJS.$(h).find("[id^=execution-field-select-schedule-]")})});this.resizeUIHeight()},resizeUIHeight:function(){var b=AJS.$("#"+ZEPHYR.Agile.TestBoard.data.testBoardElId).height();var a=AJS.$("#zephyr-tb-detail-head").height()+AJS.$(".zephyr-tb-statistic-group").height()+20+88;AJS.$("#zephyr-tb-detail-execution-section").height(b-a);AJS.$(".zephyr-tb-container").height(b-a)},setSelectedStatusParams:function(){var b=null;var a=AJS.$("#zephyr-tb-status-dd").val();if(a){b=a+":"+this.offset}ZEPHYR.Agile.TestBoard.data.selectedStatus=b;ZEPHYR.Agile.TestBoard.Router.URL.setParams();ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(ZEPHYR.Agile.TestBoard.Router.URL.getURL(),{trigger:false})},getPrevSelectedStatusParams:function(){var a={};if(ZEPHYR.Agile.TestBoard.data.selectedStatus){var b=ZEPHYR.Agile.TestBoard.data.selectedStatus;b=b.split(":");a.id=(b[0])?b[0].split(","):null;a.offset=b[1]||0}else{a.id=null;a.offset=0}return a},render:function(){AJS.$("#zephyr-tb-detail-column").resizable("destroy");this.statusJSON=this.getPrevSelectedStatusParams();this.offset=this.statusJSON.offset;var a=ZEPHYR.Templates.TestBoard.Sprint.cycleDetailsHTML({executionStatus:ZEPHYR.Agile.TestBoard.executionStatus,cycleName:this.cycleName,versionName:this.versionName,projectKey:this.projectKey});this.$el.html(a);this.statusId=this.statusJSON.id;this.attachViews();this.clearStatus=true;return this}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/sprint/zephyr-sprint-cycles-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.Cycle=Backbone.Model.extend();ZEPHYR.Agile.TestBoard.CycleCollection=Backbone.Collection.extend({model:ZEPHYR.Agile.TestBoard.Cycle,url:function(){return getRestURL()+"/cycle/cyclesByVersionsAndSprint"},parse:function(b,a){if(b[0]){return b[0].cycles}}});ZEPHYR.Agile.TestBoard.getCycleZQLQuery=function(f,b){var e=f[0],d=f[1],a=f[2],c='project = "'+ZEPHYR.Agile.TestBoard.escapeString(a)+'" AND fixVersion = "'+ZEPHYR.Agile.TestBoard.escapeString(e)+'" AND cycleName in ("'+ZEPHYR.Agile.TestBoard.escapeString(d)+'")';return appendSoyOutputOnCall(encodeURIComponent(c),b)};ZEPHYR.Agile.TestBoard.SprintCyclesView=Backbone.View.extend({events:{"click .zephyr-tb-key .zephyr-tb-cycle-link":"preventDefaultNavigation","click .zephyr-tb-cycle-remove":"removeCycleFromSprintDialogUI"},initialize:function(a){this.sprintId=a.sprintId;this.sprintName=a.sprintName;this.model.bind("reset",this.render,this);ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.CYCLES_FILTER,this.filterCycles,this);this.triggerSelectedClick=true},filterCycles:function(a){a=(a)?a.toString().toLowerCase():"";var b=this.model.filter(function(d){var c=d.get("name").toLowerCase();return(c.indexOf(a)>-1)}).map(function(c){return c.attributes});this.displayCycles(b);ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.CYCLES_COUNT_UPDATE+"_"+this.sprintId,b.length)},removeCycleFromSprintDialogUI:function(d){d.preventDefault();d.stopImmediatePropagation();var b=AJS.$(d.target).data("id"),a=AJS.$(d.target).data("version-id"),c=this.model.get(b).get("name"),g=this.sprintId,f="Remove Cycle from Sprint",k=[{id:"zephyr-je-dialog-remove",name:"Remove"},{id:"zephyr-je-dialog-cancel",name:"Cancel",type:"link"}],h=ZEPHYR.Templates.TestBoard.Sprint.removeCycleFromSprintHTML({cycleName:c,sprintName:this.sprintName}),l="zephyr-tb-remove-test-cycle",e=ZEPHYR.Templates.Dialog.renderDialog({dialogId:l,dialogSize:"aui-dialog2-medium",dialogHeader:f,dialogContent:h,dialogButtons:k,isModal:true}),i=this;AJS.$("body").append(e);var j=AJS.dialog2("#"+l);j.show();ZEPHYR.About.evalMessage({selector:".zephyr-tb-eval-lic"},null,function(){var m=j.$el.find(".dialog2-content").height()+40;j.$el.find(".aui-dialog2-content").css("height",m)});j.$el.find("#zephyr-je-dialog-remove").click(function(m){m.preventDefault();AJS.$("#dialog-icon-wait").show();i.removeCycleFromSprint(b,a,g,function(){if(ZEPHYR.Agile.TestBoard.data.selectedCycle==b){AJS.$(".zephyr-tb-detail-close").trigger("click")}j.hide()})});j.$el.find("#zephyr-je-dialog-cancel").click(function(m){m.preventDefault();j.hide()})},removeCycleFromSprint:function(b,a,d,c){jQuery.ajax({url:getRestURL()+"/cycle",type:"PUT",accept:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify({id:b,projectId:ZEPHYR.Agile.TestBoard.data.projectId,versionId:a,sprintId:""}),timeout:0,success:function(e){if(c){c()}ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.CYCLE_PROGRESS_BAR_UPDATE+"_"+d)},error:function(e){AJS.$(".zephyr-tb-message-bar").html("");var g=JSON.parse(e.responseText);var f=g.message||g.errorDescHtml;if(e.status==403&&!f){showAUIError(e,AJS.$(".message-bar"));AJS.$("#zephyr-je-dialog-remove").attr("disabled","disabled");AJS.$("#dialog-icon-wait").hide();return}else{if(c){c()}}ZEPHYR.Agile.TestBoard.showErrorMessage(e,f,3000)}})},preventDefaultNavigation:function(a){a.preventDefault()},displayCycles:function(b){var a=ZEPHYR.Templates.TestBoard.Sprint.cyclesHTML({cycles:b});this.$el.html(a);if(ZEPHYR.Agile.TestBoard.data.isDetailView&&this.sprintId==ZEPHYR.Agile.TestBoard.data.selectedSprint&&this.triggerSelectedClick){this.$el.find('.zephyr-tb-cycle-content[data-cycle-id="'+ZEPHYR.Agile.TestBoard.data.selectedCycle+'"]').click()}else{this.$el.find('.zephyr-tb-cycle-content[data-cycle-id="'+ZEPHYR.Agile.TestBoard.data.selectedCycle+'"]').addClass("zephyr-tb-selected");this.triggerSelectedClick=true}},render:function(){var a=this.model.toJSON();this.displayCycles(a);ZEPHYR.Agile.TestBoard.updateContentAreaHeight();return this}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/sprint/zephyr-sprint-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.SprintView=Backbone.View.extend({initialize:function(){this.attachViews();this.sprintId=this.model.get("id");ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.CYCLES_COUNT_UPDATE+"_"+this.sprintId,this.displayTestCycleCount,this);ZEPHYR.Agile.TestBoard.globalDispatcher.off(ZEPHYR.Agile.TestBoard.Events.CYCLE_PROGRESS_BAR_UPDATE+"_"+this.sprintId);ZEPHYR.Agile.TestBoard.globalDispatcher.on(ZEPHYR.Agile.TestBoard.Events.CYCLE_PROGRESS_BAR_UPDATE+"_"+this.sprintId,this.updateCycleProgressBar,this);this.selectedCycleIds=[]},displayTestCycleCount:function(a){var b;if(a<this.cycleCount){b=AJS.format("{0} of {1} Test Cycles visible",a,this.cycleCount)}else{b=AJS.format("{0} Test Cycles",a)}this.$el.find("#zephyr-tb-cycle-count").html(b)},attachViews:function(){var b=this.model.get("id");var a=this;this.cyclesView=new ZEPHYR.Agile.TestBoard.SprintCyclesView({el:"#sprint-cycle-container-"+b,model:this.model.cycles,sprintId:b,sprintName:this.model.get("name")});this.fetchCyclesByVersionsAndSprint();AJS.$("#zephyr-tb-link-test-cycles_"+b).unbind("click").bind("click",function(c){c.preventDefault();a.showLinkTestCyclesDialog(null,null,false,false)});return this},getFilteredProjects:function(){var a=ZEPHYR.Agile.TestBoard.data.projects.toJSON();var d=ZEPHYR.Agile.TestBoard.data.projectId.toString().split(",").length;if(d==1){var b=[],c=ZEPHYR.Agile.TestBoard.data.projects.get(ZEPHYR.Agile.TestBoard.data.projectId);if(c){b.push(c.toJSON())}return b}else{return a}},showLinkTestCyclesDialog:function(e,c,f,b){var h="Link this Sprint to Test Cycle(s)",k=[{id:"zephyr-je-dialog-save",name:"Save"},{id:"zephyr-je-dialog-cancel",name:"Cancel",type:"link"}],i=ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesHTML({projects:this.getFilteredProjects(),selectedProjectId:e}),l="zephyr-tb-link-to-test-cycles",g=ZEPHYR.Templates.Dialog.renderDialog({dialogId:l,dialogSize:"aui-dialog2-medium",dialogHeader:h,dialogContent:i,dialogButtons:k,isModal:true}),j=this;AJS.$("body").append(g);var d=AJS.dialog2("#"+l);d.show();ZEPHYR.About.evalMessage({selector:".zephyr-tb-eval-lic"},null,function(){var m=d.$el.find(".dialog2-content").height()+40;d.$el.find(".aui-dialog2-content").css("height",m)});d.$el.find("#zephyr-je-dialog-save").click(function(m){m.preventDefault();d.$el.find("#dialog-icon-wait").show();d.$el.find("#zephyr-je-dialog-save").attr("disabled","disabled");j.saveLinkedTestCycleUI(function(){d.hide()},d.$el.find("#zephyr-tb-add-more-cycle").is(":checked"),b)}).attr("disabled","disabled").before(ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesCheckboxHTML({isLinked:f}));d.$el.find("#zephyr-je-dialog-cancel").click(function(m){m.preventDefault();if(b){ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.VERSION_SELECT_SPRINTS_GET)}d.hide()});var a=e||d.$el.find("#zephyr-tb-link-tests-project-select").val();this.attachProjectsSingleSelect(a,c)},attachProjectsSingleSelect:function(c,d){var b=this;AJS.$("#zephyr-tb-link-tests-project-select").auiSelect2({formatResult:ZEPHYR.Agile.TestBoard.auiSelect2.formatResult,formatSelection:ZEPHYR.Agile.TestBoard.auiSelect2.formatSelection}).on("change",function(f){var g=AJS.$(f.target).val();AJS.$("#dialog-icon-wait").show();AJS.$("#zephyr-je-dialog-save").attr("disabled","disabled");var e=b.getVersionsByProjectId(g);b.attachVersionsSingleSelect(g,e,null);AJS.$(".zephyr-tb-eval-lic").empty()});AJS.$(".select2-container").css({width:"250px"});var a=this.getVersionsByProjectId(c);this.attachVersionsSingleSelect(c,a,d)},attachVersionsSingleSelect:function(c,b,e){var a=this;var g=AJS.$("#zephyr-tb-link-tests-version-select");g.html("");_.each(b,function(h,j){var i=h.name;g.append(AJS.$("<option />").val(h.versionId).attr("title",AJS.escapeHtml(i)).html(AJS.escapeHtml(i)))},this);g.val(e);g.auiSelect2({formatResult:ZEPHYR.Agile.TestBoard.auiSelect2.formatResult,formatSelection:ZEPHYR.Agile.TestBoard.auiSelect2.formatSelection}).on("change",function(k){var j=AJS.$(k.target).val();var i=a.getCycleIds();var h=AJS.$("#zephyr-tb-link-tests-project-select").val();AJS.$("#dialog-icon-wait").show();AJS.$("#zephyr-je-dialog-save").attr("disabled","disabled");a.getCyclesByVersionId(h,j,i);a.toggleSaveButton(j)});var f=e||AJS.$("#zephyr-tb-link-tests-version-select").val();var d=this.getCycleIds();this.getCyclesByVersionId(c,f,d);a.toggleSaveButton(f);AJS.$(".select2-container").css({width:"250px"})},getVersionsByProjectId:function(a){var c=[];if(ZEPHYR.Agile.TestBoard.data.versionId&&!isNaN(ZEPHYR.Agile.TestBoard.data.versionId)){var b=ZEPHYR.Agile.TestBoard.data.versionId;c=_.filter(ZEPHYR.Agile.TestBoard.data.versions,function(d){return(d.versionId==b)}).filter(function(d){return(d.projectId==a&&!d.released)})}else{c=_.filter(ZEPHYR.Agile.TestBoard.data.versions,function(d){return(d.projectId==a&&!d.released)})}return c},filterCyclesByLink:function(c,a){var b={linkedCycles:[],unlinkedCycles:[]};AJS.$.each(c,function(e,d){if(_.contains(a,parseInt(e))){return true}if(e!="recordsCount"&&e!="offsetCount"){d.id=e;if(d.sprintId){b.linkedCycles.push(d)}else{b.unlinkedCycles.push(d)}}});return b},getCycleLabel:function(b,d){if(d){var c=ZEPHYR.Agile.TestBoard.data.sprints.get(d);if(c){var a=c.get("name");return b+" ("+a+")"}else{ZEPHYR.Utility.getSprintDetailsFromId(d,function(f){var e=b+" ("+f.name+")";if(AJS.$("#zephyr-tb-link-tests-cycle-select option:selected").data("sprint-id")==d){AJS.$("#s2id_zephyr-tb-link-tests-cycle-select .select2-chosen").html(e).attr("title",e)}AJS.$("#zephyr-tb-link-tests-cycle-select").find("option[data-sprint-id="+d+"]").html(e).attr("data-sprint-name",f.name)});return b+" ("+d+")"}}return b},validateSprintId:function(c){var a=false;var b=ZEPHYR.Agile.TestBoard.data.sprints.get(c);if(b){a=true}return a},attachCycleOptionHTML:function(b,c,a){_.each(b,function(e,d){var h=(a&&d==0)?"zephyr-tb-sprint-cycle-option zephyr-tb-sprint-cycle-seperator":"zephyr-tb-sprint-cycle-option";var f=this.getCycleLabel(e.name,e.sprintId);var g=e.sprintId?e.sprintId:null;c.append(AJS.$("<option class='"+h+"' data-sprint-id='"+g+"' />").val(e.id).attr("title",AJS.escapeHtml(f)).html(AJS.escapeHtml(f)))},this)},attachCyclesDD:function(e,b){var d=this.filterCyclesByLink(e,b);var a=this;AJS.$("#zephyr-tb-link-tests-cycle-select").empty();if(d.unlinkedCycles.length){this.attachCycleOptionHTML(d.unlinkedCycles,AJS.$("#zephyr-tb-link-tests-cycle-select"),false)}if(d.linkedCycles.length){this.attachCycleOptionHTML(d.linkedCycles,AJS.$("#zephyr-tb-link-tests-cycle-select"),true)}AJS.$("#zephyr-tb-link-tests-cycle-select").auiSelect2({formatResult:ZEPHYR.Agile.TestBoard.auiSelect2.formatResult,formatSelection:ZEPHYR.Agile.TestBoard.auiSelect2.formatSelection}).on("change",function(g){var f=AJS.$(g.target).val();a.toggleSaveButton(f)});var c=AJS.$("#zephyr-tb-link-tests-cycle-select").val();this.toggleSaveButton(c);AJS.$("#dialog-icon-wait").hide();AJS.$(".select2-container").css({width:"250px"})},getCyclesByVersionId:function(b,d,c){var a=this;AJS.$.ajax({url:getRestURL()+"/cycle?versionId="+d+"&projectId="+b,type:"GET",contentType:"application/json",dataType:"json",success:function(e){a.attachCyclesDD(e,c)},error:function(e){var g=JSON.parse(e.responseText);var f=g.message||g.errorDescHtml;if(e.status==403&&f){AJS.dialog2("#zephyr-tb-link-to-test-cycles").hide();ZEPHYR.Agile.TestBoard.showErrorMessage(e,f)}else{if(e.status==403){f=g.PERM_DENIED;AJS.$("#zephyr-je-dialog-save").attr("disabled","disabled")}AJS.$("#dialog-icon-wait").hide();AJS.$(".zephyr-tb-eval-lic").html("");AJS.$(".zfjEvalLic").remove();AJS.messages.error(".zephyr-tb-eval-lic",{title:"Error!",body:f})}}})},toggleSaveButton:function(a){if(!a){AJS.$("#zephyr-je-dialog-save").attr("disabled","disabled")}else{AJS.$("#zephyr-je-dialog-save").removeAttr("disabled")}},getCycleIds:function(){var a=[],b=this.model.cycles.toJSON();_.each(b,function(c){if(c.id){a.push(c.id)}});a.push(-1);a=_.union(a,this.selectedCycleIds);return a},isSprintLinkedToThisCycle:function(c){var b=false;var a=this.model.cycles.filter(function(d){return(d.get("id")==c)}).map(function(d){return d.attributes});if(a[0]&&a[0].versionId){b=true}return b},saveLinkedTestCycle:function(b,e,c,d,a){var f=this.model.get("id");if(!f||!e){return}jQuery.ajax({url:getRestURL()+"/cycle",type:"PUT",accept:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify({id:e,projectId:b,versionId:c,sprintId:f}),timeout:0,success:function(g){ZEPHYR.Agile.TestBoard.data.selectedSprint=f;if(d){d.call()}},error:function(g){AJS.$(".zephyr-tb-message-bar").html("");var i=JSON.parse(g.responseText);var h=i.message||i.errorDescHtml;if(g.status==403&&!h){showAUIError(g,AJS.$(".message-bar"));AJS.$("#zephyr-je-dialog-save").attr("disabled","disabled");AJS.$("#dialog-icon-wait").hide();return}else{if(a){a.call()}}ZEPHYR.Agile.TestBoard.showErrorMessage(g,h,3000)}})},showSaveLinkedCycleConfirmation:function(f,c,b,g,d,n,e,a){var i="Link this Sprint to Test Cycle(s)",m=[{id:"zephyr-je-dialog-save",name:"Save"},{id:"zephyr-je-dialog-cancel",name:"Cancel",type:"link"}],k=ZEPHYR.Templates.TestBoard.Sprint.linkToTestCyclesConfirmationHTML({cycleName:g,sprintName:d,selectedSprintName:n}),o="zephyr-tb-link-to-test-cycles-confirmation",h=ZEPHYR.Templates.Dialog.renderDialog({dialogId:o,dialogSize:"aui-dialog2-medium",dialogHeader:i,dialogContent:k,dialogButtons:m,isModal:true}),l=this;AJS.$("body").append(h);var j=AJS.dialog2("#"+o);j.show();ZEPHYR.About.evalMessage({selector:".zephyr-tb-eval-lic-confirm"},null,function(){var p=j.$el.find(".dialog2-content").height()+40;j.$el.find(".aui-dialog2-content").css("height",p)});j.$el.find("#zephyr-je-dialog-save").click(function(p){p.preventDefault();j.$el.find("#dialog-icon-wait").show();j.$el.find("#zephyr-je-dialog-save").attr("disabled","disabled");l.saveLinkedTestCycle(f,c,b,function(){j.hide();if(e){l.selectedCycleIds.push(parseInt(c));l.showLinkTestCyclesDialog(f,b,e,true)}else{ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.VERSION_SELECT_SPRINTS_GET);l.selectedCycleIds=[]}},function(){j.hide();l.selectedCycleIds=[]})});j.$el.find("#zephyr-je-dialog-cancel").click(function(p){p.preventDefault();if(a){ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.VERSION_SELECT_SPRINTS_GET)}j.hide()})},saveLinkedTestCycleUI:function(g,h,a){var f=AJS.$("#zephyr-tb-link-tests-cycle-select").val(),d=AJS.$("#zephyr-tb-link-tests-version-select").val(),j=AJS.$("#zephyr-tb-link-tests-project-select").val(),i=this.isSprintLinkedToThisCycle(f),k=AJS.$("#zephyr-tb-link-tests-cycle-select option:selected").text(),e=this.model.get("name"),c=AJS.$("#zephyr-tb-link-tests-cycle-select option:selected").data("sprint-id"),m="",l=this;if(!i&&(c&&c!="undefined"&&c!="null")){var b=ZEPHYR.Agile.TestBoard.data.sprints.get(c);if(b){m=b.get("name")}else{m=AJS.$("#zephyr-tb-link-tests-cycle-select option:selected").data("sprint-name");if(!m){m=c}}if(g){g()}this.showSaveLinkedCycleConfirmation(j,f,d,k,m,e,h,a)}else{this.saveLinkedTestCycle(j,f,d,function(){if(g){g()}if(h){l.selectedCycleIds.push(parseInt(f));l.showLinkTestCyclesDialog(j,d,h,true)}else{ZEPHYR.Agile.TestBoard.globalDispatcher.trigger(ZEPHYR.Agile.TestBoard.Events.VERSION_SELECT_SPRINTS_GET);l.selectedCycleIds=[]}},function(){if(g){g()}l.selectedCycleIds=[]})}},fetchCyclesByVersionsAndSprint:function(){var b=ZEPHYR.Agile.TestBoard.data.projectId,c=this.model.get("id"),a=this;this.model.cycles.fetch({reset:true,type:"POST",contentType:"application/json",data:JSON.stringify({projectId:b,versionId:ZEPHYR.Agile.TestBoard.data.versionId,sprintId:c,offset:0,expand:"executionSummaries"}),success:function(e,d){a.cycleCount=(d[0]&&d[0].cycles)?d[0].cycles.length:0;a.displayTestCycleCount(a.cycleCount)},error:function(f,d){AJS.$(".zephyr-tb-message-bar").html("");var g=JSON.parse(d.responseText);var e=g.message||g.errorDescHtml;ZEPHYR.Agile.TestBoard.showErrorMessage(d,e,3000)}})},updateCycleProgressBar:function(){this.cyclesView.triggerSelectedClick=false;this.fetchCyclesByVersionsAndSprint()}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/testboard/sprint/zephyr-sprints-view.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.Agile=="undefined"){ZEPHYR.Agile={}}if(typeof ZEPHYR.Agile.TestBoard=="undefined"){ZEPHYR.Agile.TestBoard={}}ZEPHYR.Agile.TestBoard.Sprint=Backbone.Model.extend({initialize:function(){if(ZEPHYR.Agile.TestBoard.data.page==ZEPHYR.Agile.TestBoard.page.sprint){this.cycles=new ZEPHYR.Agile.TestBoard.CycleCollection()}else{if(ZEPHYR.Agile.TestBoard.data.page==ZEPHYR.Agile.TestBoard.page.issues){this.issues=new ZEPHYR.Agile.TestBoard.IssueCollection()}}},parse:function(a){return a}});ZEPHYR.Agile.TestBoard.SprintCollection=Backbone.Collection.extend({model:ZEPHYR.Agile.TestBoard.Sprint,url:function(){return contextPath+"/rest/agile/1.0/board/"+ZEPHYR.Agile.TestBoard.data.agileBoardId+"/sprint"},parse:function(b,a){return b.values}});ZEPHYR.Agile.TestBoard.SprintsView=Backbone.View.extend({events:{"click .zephyr-tb-cycle-content":"displayCycleDetails"},initialize:function(){this.model.bind("reset",this.render,this);this.sprintRows=[]},attachSprintView:function(){var a=this;_.each(this.$el.find(".zephyr-tb-sprints-module"),function(b){var e=AJS.$(b).data("sprint-id");var d=a.model.get(e);if(d){var c=new ZEPHYR.Agile.TestBoard.SprintView({el:b,model:d});a.sprintRows.push(c)}});this.executions=new ZEPHYR.Agile.TestBoard.ExecutionCollection();this.sprintCycleDetailView=new ZEPHYR.Agile.TestBoard.SprintCycleDetailView({el:"#zephyr-tb-detail-column",model:this.executions});ZEPHYR.defectHover.INLINE_DIALOG_OPTIONS.gravity="w"},displayCycleDetails:function(b){b.stopImmediatePropagation();var a=AJS.$(b.target).closest(".zephyr-tb-cycle-content")||AJS.$(b.target);cycleId=a.data("cycle-id"),cycleName=a.attr("data-cycle-name"),versionName=a.attr("data-version-name"),sprintId=a.data("sprint-id"),projectKey=a.attr("data-project-key");AJS.$(".zephyr-tb-cycle-content").removeClass("zephyr-tb-selected");a.addClass("zephyr-tb-selected");this.sprintCycleDetailView.cycleId=cycleId;this.sprintCycleDetailView.cycleName=cycleName;this.sprintCycleDetailView.versionName=versionName;this.sprintCycleDetailView.sprintId=sprintId;this.sprintCycleDetailView.projectKey=projectKey;if(this.sprintCycleDetailView.clearStatus){ZEPHYR.Agile.TestBoard.data.selectedStatus=null}this.sprintCycleDetailView.render();ZEPHYR.Agile.TestBoard.data.selectedSprint=sprintId;ZEPHYR.Agile.TestBoard.data.selectedCycle=cycleId;ZEPHYR.Agile.TestBoard.data.view=ZEPHYR.Agile.TestBoard.viewDetail;ZEPHYR.Agile.TestBoard.data.isDetailView=true;ZEPHYR.Agile.TestBoard.Router.URL.setParams();ZEPHYR.Agile.TestBoard.Router.tbRouter.navigate(ZEPHYR.Agile.TestBoard.Router.URL.getURL(),{trigger:false})},render:function(){var a=this.model.toJSON();var b=ZEPHYR.Templates.TestBoard.Sprint.sprintsHTML({sprints:a});this.$el.html(b);this.attachSprintView();ZEPHYR.Agile.TestBoard.Loading.hideLoadingIndicator();return this}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/execution/execution-field-view.js' */
ZEPHYR.Schedule.executionFieldView=Backbone.View.extend({events:{"click .cancel":"cancelUpdate",keyup:"cancelOnKeyup","click .zfj-editable-field":"editField","click .zfj-editable-field a.assignee-user-hover":"_stopImmediatePropagation","focusout select":"saveFieldOnUpdate",mousedown:"saveSelectedText","click .zfj-field-button-save":"saveFieldOnClick"},initialize:function(a){this.decorate();this._editDelay=0},_stopImmediatePropagation:function(a){a.stopImmediatePropagation()},decorate:function(){this.$el.addClass("inactive")},_handleEditingStarted:function(a){this.$el.find(":input").prop("disabled",false);this.$el.find(":input:visible:first").focus();this.$el.find(".update_cancel-buttons").attr("tabindex",1)},_handleSavingStarted:function(){this.$el.find(":input").prop("disabled",true);ZEPHYR.Loading.showLoadingIndicator()},_displayWriteMode:function(){this.$el.addClass("inactive").removeClass("active");this.$el.find(".update_cancel-buttons").removeAttr("tabindex")},_displayEditMode:function(){this.options.elBeforeEdit.hide();this.options.elOnEdit.show();this.$el.removeClass("inactive").addClass("active");this._handleEditingStarted();this.containerHasFocus=true;this.trigger("editField")},focus:function(){this.$el.find(":input").removeAttr("disabled");var a=this.$el.find(":input:visible:first");a.focus()},cancelOnKeyup:function(a){if(a.keyCode===27){this.cancelUpdate(a)}},cancelUpdate:function(a){a.preventDefault();a.stopImmediatePropagation();this.containerHasFocus=false;this.trigger("cancelSaveField");AJS.$(this.options.elOnEdit).hide();AJS.$(this.options.elBeforeEdit).show();this._displayWriteMode()},saveFieldOnUpdate:function(b){var c;var d=150;var a=this;if(this.containerHasFocus){if(c){clearTimeout(c)}c=setTimeout(function(e){if(a.containerHasFocus&&a.$el.hasClass("active")){a.trigger("saveField",e);a._displayWriteMode()}},d,b)}},saveFieldOnClick:function(a){a.preventDefault();this.trigger("saveFieldOnClick",a)},editField:function(f){f.preventDefault();var e=AJS.$(f.target).is(".zfj-overlay-icon");var c=this.$el.hasClass("inactive");var d=this._getCurrentlySelectedText()===""&&!this._previouslySelectedText;var b=c&&(e||d);if(this._editDelay!==0){clearTimeout(this._editDelay);this._editDelay=0}else{if(b){var a=this;this._editDelay=setTimeout(function(){if(a.$el.hasClass("inactive")&&a._getCurrentlySelectedText()===""){a._displayEditMode()}a._editDelay=0},250)}}},_getCurrentlySelectedText:function(){if(jQuery(document.activeElement).is(":input")){return""}if(document.selection&&document.selection.createRange){return document.selection.createRange().text||""}if(window.getSelection){return window.getSelection().toString()}return""},updateUIOnAction:function(){ZEPHYR.Loading.hideLoadingIndicator();AJS.$(this.options.elOnEdit).hide();AJS.$(this.options.elBeforeEdit).show();this.$el.closest("#issuetable").siblings(".zfj-notifications").removeClass("active")},saveSelectedText:function(){this._previouslySelectedText=this._getCurrentlySelectedText()}});ZEPHYR.Schedule.performExecution=function(e,c,a,b){var d=jQuery.ajax({url:getRestURL()+"/execution/"+e+"/execute",type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify({status:c,changeAssignee:false}),success:function(f){var i=f;if(AJS.$("#executed-by-schedule-"+e).length>0){var g=AJS.$("#executed-by-schedule-"+e);var j=AJS.$("#executed-on-schedule-"+e);if(i.executedBy!=null){AJS.$("#executed-by-schedule-"+e).parent().show();var h="<a href='"+contextPath+"/secure/ViewProfile.jspa?name="+i.executedBy+"' rel='"+i.executedBy+"' class='user-hover'>"+AJS.escapeHtml(i.executedByDisplay)+"</a>";g.html("<strong>"+h+"</strong>");j.html("<strong>"+i.executedOn+"</strong>");g.fadeTo(1000,0.5,function(){AJS.$(this).css("opacity","");AJS.$(this).html(h)});j.fadeTo(1000,0.5,function(){AJS.$(this).css("opacity","");AJS.$(this).html(i.executedOn)})}else{g.html("");j.html("")}}if(ZEPHYR.Schedule&&ZEPHYR.Schedule.Execute&&ZEPHYR.Schedule.Execute.currentSchedule&&window.standalone){ZEPHYR.Schedule.Execute.currentSchedule.set(i)}if(a){a()}showExecStatusSuccessMessage()},error:function(g){ZEPHYR.Loading.hideLoadingIndicator();if(g&&g.status==403){var f={};try{f=jQuery.parseJSON(g.responseText)}catch(i){console.log(i)}if(f.PERM_DENIED){showPermissionError(g);return}}if(g&&typeof buildExecutionError=="function"){buildExecutionError(g)}else{if(g.status==401){var h=new AJS.Dialog({width:540,height:200,id:"dialog-error"});h.addHeader("Error!");h.addPanel("panel-1","<p></p>","dialog-error-panel-body");AJS.messages.error(AJS.$(".dialog-error-panel-body"),{body:"You do not have the permission to make this request. Login Required.",closeable:false});h.addLink("Close",function(j){j.hide()},"#");h.show()}}if(b){b()}}});d.error(function(f){if(f.status==403&&b){b()}})};ZEPHYR.Schedule.stripTextIfMoreThanAllowed=function(a,d,b,c){AJS.$(a).css("text-overflow","ellipsis");AJS.$(a).css("white-space","nowrap");if(c){AJS.$(a).attr("title",c)}};ZEPHYR.Schedule.getSourceInfoForStatusExecution=function(b){var d=b.split("-");var a=d[d.length-2]+"-"+d[d.length-1];var e=d[d.length-1];var c=d[d.length-2];return{sourceTag:a,sourceId:e,sourceType:c}};ZEPHYR.Schedule.executionStatusView=ZEPHYR.Schedule.executionFieldView.extend({initialize:function(){_.bindAll(this,"removeDOMListeners");this.bind("saveField",this.saveExecutionStatus,this);this.bind("cancelSaveField",this.cancelStatusUpdate,this);ZEPHYR.Schedule.executionFieldView.prototype.initialize.call(this);this.source=ZEPHYR.Schedule.getSourceInfoForStatusExecution(this.options.elOnEdit.attr("id"));this.$el.on("remove",this.removeDOMListeners)},removeDOMListeners:function(){this.unbind();if(typeof this.stopListening=="function"){this.stopListening()}},cancelStatusUpdate:function(b){var a=AJS.$("#execution-field-current-status-"+this.source.sourceTag);AJS.$("#exec_status-"+this.source.sourceTag).val(a.find("a span").attr("rel"))},saveExecutionStatus:function(){var b=this.source;var c=12;var j=this;this._handleSavingStarted();var e=AJS.$("#execution-field-current-status-"+b.sourceTag);if(!e.length){e=AJS.$("a#executionStatus-labels-"+b.sourceTag)}var l=AJS.$("#exec_status-"+b.sourceTag);var k=e.find("a span").attr("rel")||AJS.$("a#executionStatus-labels-"+b.sourceTag).find("span").attr("rel");var f=AJS.$("#exec_status-"+b.sourceTag+" :selected").text();var g=AJS.$("#exec_status-"+b.sourceTag+" :selected").val();if(k==g){this.updateUIOnAction();console.log("Nothing saved, hence skipping save");return}var i=AJS.$("#exec_status-"+b.sourceTag+" :selected").attr("title");var d=AJS.$("#exec_status-"+b.sourceTag+" option:selected").attr("rel");var a=AJS.$("#current-execution-status-dd-"+b.sourceTag);a.css("background-color",d);a.html(f);e.find("a span").attr("rel",g);var h=f+": "+i;ZEPHYR.Schedule.stripTextIfMoreThanAllowed("#current-execution-status-dd-"+b.sourceTag,f,c,h);this.$el.closest("#issuetable").siblings(".zfj-notifications").addClass("active");ZEPHYR.Schedule.performExecution(b.sourceId,g,function(){var m=a.parents("li[id^='cycle']");if(m.length>0){AJS.$(m).trigger("refresh")}j.updateUIOnAction();if(typeof globalDispatcher!="undefined"){globalDispatcher.trigger("scheduleUpdated")}else{jQuery(document).trigger("ScheduleUpdated",b.sourceId)}},function(){var m=l.find("option[value="+k+"]");l.val(k);a.css("background-color",m.attr("rel"));a.html(m.text());e.find("a span").attr("rel",k);j.updateUIOnAction()})}});ZEPHYR.Schedule.executionAssigneeView=ZEPHYR.Schedule.executionFieldView.extend({initialize:function(){_.bindAll(this,"removeDOMListeners");this.bind("editField",this.attachExecutionAssignee,this);this.bind("saveFieldOnClick",this.saveExecutionAssignee,this);this.bind("cancelSaveField",this.cancelStatusUpdate,this);ZEPHYR.Schedule.executionFieldView.prototype.initialize.call(this);this.source=ZEPHYR.Schedule.getSourceInfoForStatusExecution(this.options.elOnEdit.attr("id"));this.$el.on("remove",this.removeDOMListeners)},removeDOMListeners:function(){this.unbind();if(typeof this.stopListening=="function"){this.stopListening()}},cancelStatusUpdate:function(b){var a=AJS.$("#execution-field-current-assignee-"+this.source.sourceTag);AJS.$("input[name=zephyr-je-execution-assignee-quick-"+this.source.sourceId+"-type]").removeAttr("checked");AJS.$("#exec_assignee-"+this.source.sourceTag).val(a.find("a span").attr("rel"));this.options.elOnEdit.find("#assignee-error").html("")},updateAssigneeUIOnSave:function(a){var b="&nbsp;";if(a.assignedToUserName){b='<a href="{$contextPath}/secure/ViewProfile.jspa?name='+a.assignedToUserName+'" rel="'+a.assignedToUserName+'" class="assignee-user-hover user-hover">'+a.assignedToDisplay+"</a>"}else{if(a.assignedToDisplay){b=a.assignedToDisplay}else{if(a.assignedTo){b=a.assignedTo}}}this.options.elBeforeEdit.find("#execution-assignee-label").html("<strong>"+b+"</strong>").attr("data-assigneeUserName",(a.assignedToUserName||null)).attr("data-assigneeType",(a.assigneeType||null));AJS.$("#executiondetails-refresh").trigger("click");this._displayWriteMode();this.updateUIOnAction()},saveExecutionAssignee:function(){var b=ZEPHYR.Execution.Assignee.getSelectedParams("zephyr-je-execution-assignee-quick-"+this.source.sourceId),a=this;if(!b){return}b.changeAssignee=true;var c=jQuery.ajax({url:getRestURL()+"/execution/"+a.source.sourceId+"/execute",type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(b),success:function(d){a.updateAssigneeUIOnSave(d)},error:function(d){AJS.$("#exec_assignee_cancel-schedule-"+a.source.sourceId).click();if(d&&typeof buildExecutionError=="function"){buildExecutionError(d)}else{if(d.status==401){var e=new AJS.Dialog({width:540,height:200,id:"dialog-error"});e.addHeader("Error!");e.addPanel("panel-1","<p></p>","dialog-error-panel-body");AJS.messages.error(AJS.$(".dialog-error-panel-body"),{body:"You do not have the permission to make this request. Login Required.",closeable:false});e.addLink("Close",function(f){f.hide()},"#");e.show()}}}});c.error(function(d){if(d.status==403){AJS.$("#exec_assignee_cancel-schedule-"+a.source.sourceId).click()}})},attachExecutionAssignee:function(){this.options.elOnEdit.css("display","inline-block").find("#assignee-error").html("");var b=this.options.elBeforeEdit.find("#execution-assignee-label").attr("data-assigneeType"),c=null;if(b){var a=this.options.elBeforeEdit.find("#execution-assignee-label").attr("data-assigneeUserName");c={assigneeType:b,assignee:a}}ZEPHYR.Execution.Assignee.init({id:"zephyr-je-execution-assignee-quick-"+this.source.sourceId,clear:true,assigneeeJSON:c});this.initFirstAttempt=false}});;
;
/* module-key = 'com.thed.zephyr.je:zephyr-je-test-board', location = 'includes/js/zephyr/dialog.soy' */
// This file was automatically generated from dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace ZEPHYR.Templates.Dialog.
 */

if (typeof ZEPHYR == 'undefined') { var ZEPHYR = {}; }
if (typeof ZEPHYR.Templates == 'undefined') { ZEPHYR.Templates = {}; }
if (typeof ZEPHYR.Templates.Dialog == 'undefined') { ZEPHYR.Templates.Dialog = {}; }


ZEPHYR.Templates.Dialog.renderDialog = function(opt_data, opt_ignored) {
  var output = '<!-- Render the dialog --><section role="dialog" id="' + opt_data.dialogId + '" class="aui-layer aui-dialog2 ' + opt_data.dialogSize + '" aria-hidden="true" data-aui-remove-on-hide="true"' + ((opt_data.isModal) ? ' data-aui-modal="true"' : '') + '><!-- Dialog header --><header class="aui-dialog2-header"><!-- The dialog\'s title --><h2 class="aui-dialog2-header-main">' + opt_data.dialogHeader + '</h2></header>';
  if (opt_data.menuItems) {
    output += '<div class="dialog-page-menu">';
    var itemList17 = opt_data.menuItems;
    var itemListLen17 = itemList17.length;
    for (var itemIndex17 = 0; itemIndex17 < itemListLen17; itemIndex17++) {
      var itemData17 = itemList17[itemIndex17];
      output += '<span class="page-menu-item"><button class="item-button" id="' + itemData17.id + '">' + itemData17.name + '</button></span>';
    }
    output += '</div>';
  }
  output += '<!-- Main dialog content --><div class="aui-dialog2-content"><span class="message-bar"></span><span class="dialog2-content">' + opt_data.dialogContent + '</span></div><!-- Dialog footer --><footer class="aui-dialog2-footer"><!-- Actions to render on the right of the footer --><div class="aui-dialog2-footer-actions"><span id="dialog-icon-wait" class="aui-icon aui-icon-wait zfj-icon-wait" style="display:none">Loading...</span>';
  var buttonList28 = opt_data.dialogButtons;
  var buttonListLen28 = buttonList28.length;
  for (var buttonIndex28 = 0; buttonIndex28 < buttonListLen28; buttonIndex28++) {
    var buttonData28 = buttonList28[buttonIndex28];
    output += '<button id="' + buttonData28.id + '" class="aui-button ' + ((buttonData28.type == 'link') ? 'aui-button-link' : '') + '">' + buttonData28.name + '</button>';
  }
  output += '</div></footer></section>';
  return output;
};
if (goog.DEBUG) {
  ZEPHYR.Templates.Dialog.renderDialog.soyTemplateName = 'ZEPHYR.Templates.Dialog.renderDialog';
}
;
;
/* module-key = 'com.thed.zephyr.je:zephyr-project-sidebar-test', location = 'includes/js/zephyr/project/panel/project-sidebar.js' */
if(typeof ZEPHYR=="undefined"){var ZEPHYR={}}if(typeof ZEPHYR.PROJECT=="undefined"){ZEPHYR.PROJECT={}}if(typeof ZEPHYR.PROJECT.SIDEBAR=="undefined"){ZEPHYR.PROJECT.SIDEBAR={}}ZEPHYR.PROJECT.SIDEBAR=(function(){var a=function(b){if(b.indexOf("traceability-tab")>-1){b="traceability-tab"}AJS.tabs.change(AJS.$("a[href=#"+b+"]"))};return{showTabByURLParam:a}});var isLoadedInIframe=function(){try{return(window!==window.parent)}catch(a){return false}};var InitPageContent=function(a){if(isLoadedInIframe()){AJS.$(window).load(function(){a()})}else{AJS.$(document).ready(function(){a()})}};InitPageContent(function(){var b=window.location.hash.substr(1);if(b&&b.length>0){var a=new ZEPHYR.PROJECT.SIDEBAR();a.showTabByURLParam(b)}AJS.$("#zephyr-project-view-tabs > ul > li > a").bind("tabSelect",function(f,g){var c,d=window.location.href.indexOf("#");AJS.$(g.pane.selector+"-content").hide();ZEPHYR.Loading.showLoadingIndicator();AJS.$("#zfj-aui-blanket").css("visibility","visible");AJS.$("#zfj-aui-blanket").css("opacity","0.2");if(d&&d>0){c=window.location.href.slice(0,d)}window.location.href=c?(c+g.pane.selector):(window.location.href+g.pane.selector);window.location.reload()})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format("This version of {0} is not a supported browser.",opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml("See our documentation for the list of supported browsers.") + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml("This board has been updated") + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml("Refresh") + '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml("Ignore") + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(c){var b=c("underscore");function a(d){if(d){b.extend(d,a.prototype)}else{d=this}d._bindings=[];return d}a.prototype={on:function(f,e,d){if(d){this._off({type:f,context:d})}this._bindings.push({type:f,handler:e,context:d});return this},off:function(d){if(b.isString(d)){this._off({type:d})}else{if(b.isFunction(d)){this._off({handler:d})}else{if(b.isObject(d)){this._off({context:d})}}}return this},_off:function(d){this._bindings=b.reject(this._bindings,function(h){var g=!d.type||d.type===h.type;var f=!d.context||d.context===h.context;var e=!d.handler||d.handler===h.handler;return g&&f&&e})},trigger:function(e){var d=Array.prototype.slice.call(arguments,1);b.each(this._bindings,function(f){if(f.type===e){f.handler.apply(f.context,d)}});return this}};return a});AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(a){var b=a("jira-agile/rapid/events");return new b()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-namespace.js' */
if(typeof GH!=="object"){window.GH={}}GH.namespace=function(d,c,e){var f=d.split(".");c=c||window;for(var b=0,g=f.length-1;b<g;b++){var a=c[f[b]];c=(a!=null)?a:c[f[b]]={}}c[f[b]]=e||c[f[b]]||{};return c[f[b]]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-config.js' */
GH.namespace("GH.Config");GH.Config={};GH.Config.isSampleDataAvailable=false;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Ajax.js' */
GH.namespace("GH.Ajax");GH.Ajax={};GH.Ajax.CONTEXT_PATH=AJS.contextPath();GH.Ajax.REST_URL_BASE="/rest/greenhopper/1.0";GH.Ajax.PUBLIC_REST_URL_BASE="/rest/agile/1.0";GH.Ajax.xhrRegistery={};GH.Ajax.stallTimeout=300;GH.Ajax.get=function(a,c){AJS.$.extend(a,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var b=GH.Ajax._executeGet(a,c);return b.pipe(function(d,f,e){return AJS.$.Deferred().resolveWith(this,[d.success,f,e])})};GH.Ajax.post=function(a){a=GH.Ajax._getSettings(a,true);AJS.$.extend(a,{type:"POST",contentType:"application/json"});return GH.Ajax._executeStore(a)};GH.Ajax.put=function(a){a=GH.Ajax._getSettings(a,true);a.type="PUT";return GH.Ajax._executeStore(a)};GH.Ajax.del=function(a){a=GH.Ajax._getSettings(a,true);a.type="DELETE";return GH.Ajax._executeStore(a)};GH.Ajax._getSettings=function(a,b){if(!a.bareUrl&&a.url){a.bareUrl=GH.Ajax.buildRestUrl(a.url)}if(a.bareUrl){a.url=a.bareUrl}if(!a.dataType){a.dataType="json"}if(a.data&&b){a.data=JSON.stringify(a.data)}a.contentType="application/json";return a};GH.Ajax._getXhrData=function(b){var a={timestamp:0};if(b){if(GH.Ajax.xhrRegistery[b]){a=GH.Ajax.xhrRegistery[b]}else{a=GH.Ajax.xhrRegistery[b]=a}}return a};GH.Ajax._executeGet=function(c,g){c=GH.Ajax._getSettings(c);var b=GH.Ajax._getXhrData(g);if(b.xhr){GH.log("aborting request for "+g,GH.Logger.Contexts.ajax);b.xhr.abort();delete b.xhr;delete b.xhrAbort;delete b.timeoutId}var f=b.timestamp;b.timestamp=new Date().getTime();if(b.timestamp-f<GH.Ajax.stallTimeout){GH.log("stalling request for "+g+", time since last request: "+(b.timestamp-f),GH.Logger.Contexts.ajax);var a=AJS.$.Deferred();var e;var d=function(){e=GH.Ajax._executeGet(c,g);e.then(a.resolve,a.reject)};b.timeoutId=window.setTimeout(d,GH.Ajax.stallTimeout);b.xhr=a.promise();b.xhr.abort=function(){if(e){e.abort.apply(e,arguments)}else{clearTimeout(b.timeoutId)}}}else{GH.log("executing request for "+g,GH.Logger.Contexts.ajax);b.xhr=GH.Ajax.makeRequest(c)}b.xhrAbort=b.xhr.abort;b.xhr.abort=function(){var i=b.xhr;var h=b.xhrAbort;if(i&&h){return h.apply(i,arguments)}};b.xhr.done(function(){if(b.xhr){delete b.xhr}}).fail(function(){if(b.xhr){delete b.xhr}});return b.xhr};GH.Ajax._executeStore=function(b){b=b||{};if(b.data&&typeof(b.data)==="string"){if(/\?\?/.test(b.data)){var a="\\u003F\\u003F";b.data=b.data.replace(/\?\?/g,a)}}b.dataType="json";return GH.Ajax.makeRequest(b)};GH.Ajax.makeRequest=function(d){var a=AJS.$.Deferred();d=_.extend(d,{success:function(){a.resolveWith(this,arguments)},error:function(){a.rejectWith(this,arguments)}});var c=a.promise(JIRA.SmartAjax.makeRequest(d));var e=c.abort;c.abort=function(f){c.abortMarker=f!="timeout";return e.apply(c,arguments)};var b=c.pipe(GH.Ajax._generateDoneInterceptor(),GH.Ajax._generateFailInterceptor(d.errorsNoAutoEscape));if(!d.deferErrorHandling){b.fail(GH.Ajax._generateErrorHandler(d.onGlobalError,d.errorContextMap,d.contextualErrorRenderer,d.globalErrorDismissable))}return b};GH.Ajax._generateDoneInterceptor=function(){return function(a,c,b){a=a||{};a=GH.Ajax._createExtendedResult(a);if(!GH.Ajax.matchesCurrentUser(b)){return GH.Ajax._handleCurrentUserChanged(b)}if(!a.isSuccess()){return AJS.$.Deferred().rejectWith(this,[a,b,c,null])}return AJS.$.Deferred().resolveWith(this,[a,c,b])}};GH.Ajax._generateFailInterceptor=function(a){return function(d,h,g){if(d.abortMarker){return AJS.$.Deferred()}if(!GH.Ajax.matchesCurrentUser(d)){return GH.Ajax._handleCurrentUserChanged(d)}var c={},b=null;if(d.responseText){try{c=JSON.parse(d.responseText)}catch(f){}}if(c.errors||c.errorMessages){b=GH.Ajax._convertJiraErrors(c,a)}else{if(c.message){b=GH.Ajax._convertFrameworkErrors(c)}}if(!b){b=GH.Ajax._convertGenericErrors(d,g)}return AJS.$.Deferred().rejectWith(this,[b,d,h,g])}};GH.Ajax.handleContextualErrors=function(b,a,c){a=a||{};if(!b.hasContextualErrors()){return false}AJS.$(b.getContextualErrors()).each(function(e,f){var d=a[f.contextId];if(!d){AJS.$(f.errors).each(function(h,i){b.addGlobalError(i)})}else{if(AJS.$.isFunction(d)){d(f,b)}else{d=AJS.$(d);d.siblings(".ghx-error").remove();var g;if(c){g=c(f)}else{g=GH.tpl.rapid.notification.renderContextualErrors({errors:f.errors})}d.after(g)}}});return true};GH.Ajax.handleGlobalErrors=function(c,b,a){if(!c.hasGlobalErrors()){return false}GH.Notification.showErrors({errors:c.getGlobalErrors()},a);if(b&&(b instanceof Function)){b(c)}return true};GH.Ajax.buildRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.buildBareRestUrl(GH.Ajax.REST_URL_BASE+a)};GH.Ajax.buildPublicRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.buildBareRestUrl(GH.Ajax.PUBLIC_REST_URL_BASE+a)};GH.Ajax.buildBareRestUrl=function(a){if(a.indexOf("/")!==0){a="/"+a}return GH.Ajax.CONTEXT_PATH+a};GH.Ajax._createExtendedResult=function(a){if(!a){return GH.Ajax._extendResult({success:true})}else{return GH.Ajax._extendResult({success:a})}};GH.Ajax._extendResult=function(a){return AJS.$.extend(a,{getGlobalErrors:function(){return a.error?a.error.errors:null},getContextualErrors:function(){return a.error?a.error.contextualErrors:null},hasGlobalErrors:function(){return a.error&&a.error.errors&&a.error.errors.length>0},hasContextualErrors:function(){return a.error&&a.error.contextualErrors},addGlobalError:function(b){if(!a.error){a.error={}}if(!a.error.errors){a.error.errors=[]}a.error.errors[a.error.errors.length]=b},getSuccessObject:function(){return a.success},isSuccess:function(){return !a.error}})};GH.Ajax._generateErrorHandler=function(d,b,c,a){return function(e){GH.Ajax.handleContextualErrors(e,b,c);GH.Ajax.handleGlobalErrors(e,d,a)}};GH.Ajax._convertJiraErrors=function(a,e){var c=a.errorMessages?a.errorMessages:[];c=_.map(c,function(f){return{message:f,noAutoescape:e}});var b=a.errors?a.errors:{};b=_.map(b,function(g,f){return{contextId:f,errors:[{message:g,noAutoescape:e}]}});var d={error:{errors:c,contextualErrors:b}};return GH.Ajax._extendResult(d)};GH.Ajax._convertFrameworkErrors=function(a){var b={error:{errors:[{message:a.message}],contextualErrors:[]}};return GH.Ajax._extendResult(b)};GH.Ajax._convertGenericErrors=function(b,c){var a=GH.Ajax._extendResult({});if(b.responseText){GH.log("Got an error response with text that we don't know how to parse: "+b.responseText)}if(b.status===504||b.status===0&&AJS.$.contains(["abort","timeout"],c)){a.addGlobalError({status:504,message:"Request timed out"})}else{if(c){a.addGlobalError({status:b.status,message:c})}else{GH.log("Got an Ajax request error response with empty 'errorThrown' value. Silently logging")}}return a};GH.Ajax._hasUsernameResponseHeader=function(a){return !!a.getResponseHeader("X-AUSERNAME")};GH.Ajax._getUserForResponse=function(a){return a.getResponseHeader("X-AUSERNAME")?decodeURIComponent(a.getResponseHeader("X-AUSERNAME")):"anonymous"};GH.Ajax.getUserFromAJS=function(){var a=AJS.Meta.get("remote-user");return a?a:"anonymous"};GH.Ajax.matchesCurrentUser=function(a){return !a.getResponseHeader||!a.getAllResponseHeaders||!GH.Ajax._hasUsernameResponseHeader(a)||GH.Ajax.getUserFromAJS()===GH.Ajax._getUserForResponse(a)||(a.status===204&&!a.getAllResponseHeaders()&&AJS.$.browser.msie)};GH.Ajax._handleCurrentUserChanged=function(c){var b=GH.Ajax.getUserFromAJS();var a=GH.Ajax._getUserForResponse(c);if(b!=="anonymous"&&a==="anonymous"){GH.log("User changed. original: "+b+" new: "+a+". Redirecting to the login page");location.href=GH.Navigation.getLoginUrl()}else{GH.log("User changed. original: "+b+" new: "+a+". Reloading the page");location.reload()}return AJS.$.Deferred()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Logger.js' */
GH.namespace("GH.Logger");GH.Logger={};GH.Logger.Contexts={};GH.Logger.Contexts.ajax="ajax";GH.Logger.Contexts.event="event";GH.Logger.Contexts.state="state";GH.Logger.Contexts.ui="ui";GH.Logger.Contexts.callback="callback";GH.Logger.Contexts.refresh="refresh";GH.Logger.enabledContexts=[GH.Logger.Contexts.ajax,GH.Logger.Contexts.event,GH.Logger.Contexts.state,GH.Logger.Contexts.ui,GH.Logger.Contexts.callback,GH.Logger.Contexts.refresh];GH.Logger.log=function(c,b){if(!b||_.contains(GH.Logger.enabledContexts,b)){var a=b?GH.Logger.pad(b,6)+": "+c:c;AJS.log(a)}};GH.Logger.pad=function(b,a){if(b.length<a){return b+"                               ".substr(0,a-b.length)}return b};GH.Logger.timeMap={};GH.Logger.timeStart=function(a){if(!a){throw ("start: If starting a timer manually a name must be set")}else{GH.Logger.timeMap[a]=(new Date()).getTime()}};GH.Logger.timeStop=function(a){if(a in GH.Logger.timeMap){var b=(new Date()).getTime()-GH.Logger.timeMap[a];delete GH.Logger.timeMap[a];GH.Logger.log(b+"ms on "+a,GH.Logger.Contexts.ui)}else{throw ("stop:"+a+" not found")}};GH.log=GH.Logger.log;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/ui/notification/Notification.js' */
GH.namespace("GH.Notification");GH.Notification={};GH.Notification.autoHideEnabled=true;GH.Notification.showErrors=function(d,a){var b=GH.Notification.prepareNotificationDiv();var c=GH.tpl.rapid.notification.renderErrorMessages(d);if(typeof a=="undefined"){a=true}AJS.messages.error(b,{title:"Error",body:c,closeable:a});if(GH.Notification._divStyle(b)){b.css(GH.Notification._divStyle(b))}b.show()};GH.Notification.showWarnings=function(f,e){var b={autoHide:true,autoHideDelay:5000,preRendered:false,showTitle:false};e=_.extend({},b,e);var c=GH.Notification.prepareNotificationDiv();var a;if(!e.preRendered){a=GH.tpl.rapid.notification.renderErrorMessages({errors:f})}else{a=f}var d={body:a,closeable:true};if(e.showTitle){d.title="Warning"}AJS.messages.warning(c,d);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();if(e.autoHide&&GH.Notification.autoHideEnabled){setTimeout(function(){c.hide()},e.autoHideDelay)}};GH.Notification.showWarning=function(b){var a=GH.Notification.prepareNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});if(GH.Notification._divStyle(a)){a.css(GH.Notification._divStyle(a))}a.show()};GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()};GH.Notification.handleDateFormatMismatchError=function(c){var b='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';b+="Advanced Settings";b+="</a>";var a=AJS.format("It appears your JIRA date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",b);GH.Notification.showWarnings(a,{autoHide:false,preRendered:true})};GH.Notification.auiMessage=function(b){var a=_.extend({type:"generic",icon:true,messageHtml:false},b);return GH.tpl.rapid.notification.renderAuiMessage({type:a.type,title:a.title,icon:a.icon,messageHtml:a.messageHtml,message:a.message})};GH.Notification.Handler={_defaultNotificationHandler:function(){var a=AJS.$("<div/>");AJS.$(".global-msg").remove();a.addClass("global-msg").appendTo("body");return a},_defaultDivStyleHandler:function(a){return{marginLeft:-a.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(a){this._customDivStyleHandler=a;this._useDefault=false},_useDefault:true,setCustomNotificationHandler:function(a){this._customNotificationHandler=a;this._useDefault=false},removeCustomHandlers:function(){this._useDefault=true},getNotificationHandler:function(){if(!this._useDefault&&this._customNotificationHandler!=null){return this._customNotificationHandler}else{return this._defaultNotificationHandler}},getDivStyleHandler:function(){if(!this._useDefault&&this._customDivStyleHandler!=null){return this._customDivStyleHandler}else{return this._defaultDivStyleHandler}}};GH.Notification._divStyle=function(b){var a=GH.Notification.Handler.getDivStyleHandler();return a(b)};GH.Notification.prepareNotificationDiv=function(){var a=GH.Notification.Handler.getNotificationHandler();return a()};GH.Notification.showSuccess=function(d,b){clearTimeout(GH.Notification.current);var a={timeout:5000,closeable:true,shadowed:true};b=_.extend(a,b,{body:d});var c=GH.Notification.prepareNotificationDiv();AJS.messages.success(c,b);if(GH.Notification._divStyle(c)){c.css(GH.Notification._divStyle(c))}c.show();if(GH.Notification.autoHideEnabled){GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},b.timeout)}};GH.Notification.showIssueMessage=function(d){var c=JIRA.SessionStorage;var b=null;var a=null;if(!d){d=c.getItem("selectedIssueId")}if(d){a=c.getItem("selectedIssueKey");b=c.getItem("selectedIssueMsg");GH.Notification.showIssueMessageImpl(d,b,a)}c.removeItem("selectedIssueId");c.removeItem("selectedIssueKey");c.removeItem("selectedIssueMsg")};GH.Notification.showIssueMessageImpl=function(d,c,a){if(!c){c="thanks_issue_updated"}var b=AJS.params[c];if(b&&a){b=AJS.format(b,a);GH.Notification.showSuccess(b)}};GH.Notification.addPageLoadMessage=function(c,a){var b=GH.storage.get("gh.pageloadmessages",true)||[];b.push({message:c,type:a||"success"});GH.storage.put("gh.pageloadmessages",b,true)};GH.Notification._displayPageLoadMessages=function(){var c=GH.storage.get("gh.pageloadmessages",true);if(c){var a=c[0].type;var b="";_.each(c,function(d){if(b.length>0){b+="<br>"}b+=d.message});switch(a){case"warning":GH.Notification.showWarning(b);break;case"success":default:GH.Notification.showSuccess(b);break}GH.storage.put("gh.pageloadmessages",null,true)}};GH.Notification.showBoardUpdatedMessage=function(){GH.Notification.clearBoardUpdatedMessage();var b=AJS.$.Deferred();var a=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");a.data("deferred",b);a.find(".js-refresh-now").click(function(c){c.preventDefault();a.removeData("deferred");GH.Notification.clearBoardUpdatedMessage();b.resolve()});a.find(".js-ignore-refresh").click(function(c){c.preventDefault();GH.Notification.clearBoardUpdatedMessage()});return b.promise()};GH.Notification.clearBoardUpdatedMessage=function(){var a=AJS.$("#ghx-update-message");if(a.length){var b=a.data("deferred");if(b&&b.reject){b.reject()}a.remove()}};GH.Notification.isBoardUpdatedMessageVisible=function(){var a=AJS.$("#ghx-update-message");return a.length>0};AJS.$(document).ready(function(){GH.Notification.showIssueMessage();if(GH.storage){GH.Notification._displayPageLoadMessages()}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/state/storage.js' */
GH.namespace("GH.storage");GH.storage={};GH.storage.get=function(a,d){var c;if(d){c=sessionStorage.getItem(a)}else{c=localStorage.getItem(a)}if(typeof c==="string"){try{return JSON.parse(c)}catch(b){GH.log("GH.storage: Caught error: "+b);GH.log("GH.storage: Cannot parse json string retrieved from "+(d?"session":"local")+" storage. Ignoring value "+c);return undefined}}else{return c}};GH.storage.put=function(b,c,d){if(c===null||c===undefined){if(d){sessionStorage.removeItem(b)}else{localStorage.removeItem(b)}}else{try{if(d){sessionStorage.setItem(b,JSON.stringify(c))}else{localStorage.setItem(b,JSON.stringify(c))}}catch(a){return false}}return true};if(!window.localStorage||!window.sessionStorage){GH.storage.get=function(){return null};GH.storage.put=function(){return false}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Validation.js' */
GH.namespace("GH.Validation");GH.Validation={};GH.Validation.notBlank=function(c,b,a){var d=GH.Validation.applyRules(c,b,a,function(){return AJS.$.trim(AJS.$(c).val()).length>0});return d};GH.Validation.maxLength=function(d,a,c,b){var e=GH.Validation.applyRules(d,c,b,function(){return AJS.$.trim(AJS.$(d).val()).length<=a});return e};GH.Validation.isPositiveInteger=function(c,b,a){var d=GH.Validation.applyRules(c,b,a,function(){return(/^\d*$/).test(AJS.$.trim(AJS.$(c).val()))});return d};GH.Validation.applyRules=function(d,b,a,c){d=AJS.$(d);errorCtx=a?AJS.$(a):d;var e=c.call(this);if(!e){GH.Validation.showContextualErrors(errorCtx,b);return false}return true};GH.Validation.showContextualErrors=function(e,a,d,c,b){GH.Validation.clearContextualErrors(e);e.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:AJS.I18n.getText(a,d,c,b)}]}))};GH.Validation.clearContextualErrors=function(a){a=AJS.$(a);a.find(".ghx-error").remove();a.siblings(".ghx-error").remove()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-helppaths.js' */
GH.namespace("GH.HelpPaths");GH.HelpPaths.getHelpPath=function(a){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-message.js' */
GH.namespace("GH.Message");GH.Message={};GH.Message.showIssueMessage=function(d){var c=JIRA.SessionStorage;var b=null;var a=null;if(!d){if(!d){d=c.getItem("selectedIssueId")}}if(d){a=c.getItem("selectedIssueKey");b=c.getItem("selectedIssueMsg");GH.Message.showIssueMessageImpl(d,b,a)}c.removeItem("selectedIssueId");c.removeItem("selectedIssueKey");c.removeItem("selectedIssueMsg")};GH.Message.showIssueMessageImpl=function(d,c,a){if(!c){c="thanks_issue_updated"}var b=AJS.params[c];if(b&&a){b=AJS.format(b,a);GH.Message.showSuccess(b)}};GH.Message.prepareNotificationDiv=function(){var a=AJS.$("#gh-notification");if(a.length==0){a=AJS.$('<div id="gh-notification"></div>');AJS.$("#gh").append(a)}a.text("");return a};GH.Message.preparePresistentNotificationDiv=function(){var a=AJS.$("#gh-persistent-notification");if(a.length==0){a=AJS.$('<div id="gh-persistent-notification"></div>');AJS.$("#gh").append(a)}a.text("");return a};GH.Message.showSuccess=function(b){var a=GH.Message.prepareNotificationDiv();AJS.messages.success(a,{body:b});a.show();setTimeout('AJS.$("#gh-notification").hide()',5000)};GH.Message.showWarning=function(b){var a=GH.Message.prepareNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});a.show()};GH.Message.showPersistentWarning=function(b){var a=GH.Message.preparePresistentNotificationDiv();AJS.messages.warning(a,{body:b,closeable:true});a.show()};GH.Message.addPageLoadMessage=function(c,a){var b=GH.storage.get("gh.pageloadmessages",true)||[];b.push({message:c,type:a||"success"});GH.storage.put("gh.pageloadmessages",b,true)};GH.Message._displayPageLoadMessages=function(){var c=GH.storage.get("gh.pageloadmessages",true);if(c){var a=c[0].type;var b="";_.each(c,function(d){if(b.length>0){b+="<br>"}b+=d.message});switch(a){case"warning":GH.Message.showWarning(b);break;case"success":default:GH.Message.showSuccess(b);break}GH.storage.put("gh.pageloadmessages",null,true)}};AJS.$(document).ready(function(){GH.Message.showIssueMessage();if(GH.storage){GH.Message._displayPageLoadMessages()}});AJS.$(document).ready(function(){var a=AJS.$("#footer");var b=a.find(".footer-body:first ul:first");var c=a.find("#ghx-footer");b.before(c);c.css({visibility:""})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/Util.js' */
GH.namespace("GH.Util");GH.Util.getPluginKey=function(){return AJS.$('meta[name="ghx-plugin-key"]').attr("content")};GH.Util.wrapPreventDefault=function(b,a){return function(c){c.preventDefault();return b.apply(a||this,arguments)}};GH.Util.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}};GH.Util.andThen=function(b){var a=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return AJS.$.Deferred(function(c){_.each(a,function(g){var d=g.on,e=g.trigger;var f=_.isFunction(g.filter)&&g.filter;b[d](function(){var h=f&&f.apply(this,arguments);if(h&&_.isFunction(h.promise)){h.promise().done(c.resolve).fail(c.reject).progress(c.notify)}else{var i;if(h&&_.isArray(h._needsSplice)){i=h._needsSplice}else{if(f){i=[h]}else{i=arguments}}c[e](_.isFunction(this.promise)?c.promise():this,i)}})})}).promise()};AJS.$._OriginalDeferred=AJS.$.Deferred;AJS.$.Deferred=function(a){return AJS.$._OriginalDeferred(function(c){c.andThen=function(){var d=Array.prototype.slice.call(arguments);d.unshift(c);return GH.Util.andThen.apply(this,d)};var b=c.promise;c.promise=function(){var d=b.apply(this,arguments);d.andThen=function(){var e=Array.prototype.slice.call(arguments);e.unshift(d);return GH.Util.andThen.apply(this,e)};return d};if(a){a.call(c,c)}})};GH.Util.indexOf=function(d,c,b){var a=-1;if(b){d=d.slice().reverse()}_.some(d,function(f,e){if(c(f,e)){a=b?d.length-1-e:e;return true}return false});return a};GH.Util.swapArrayItems=function(d,a,c){var b;if(d&&a!==c&&Math.min(a,c)>=0&&Math.max(a,c)<d.length){b=d[c];d[c]=d[a];d[a]=b;return true}return false};GH.Util.roundToDecimalPlaces=function(d,c){if(typeof d!=="number"||d===Math.round(d)){return d}if(c===0){return Math.round(d)}var g=d.toString();if(g.indexOf("e")>=0){return d}var a=d<0;var f=g.split(".");var e=+(f[1].charAt(c));f[1]=f[1].substr(0,c);if(e>5||(!a&&e===5)){var b=/^0*/.exec(f[1])[0];f[1]=b+(+f[1]+1);if(f[1].length>c){if(b){f[1]=f[1].substr(f[1].length-c)}else{f[0]=+f[0]+1;f[1]=0}}}return parseFloat(f.join("."))};GH.Util.isElementHidden=function(b){var a=AJS.$(b);return !a.is(":hidden")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/rapid/UserData.js' */
GH.namespace("GH.UserData");GH.UserData={};GH.UserData.remoteUser=AJS.Meta.get("remote-user");GH.UserData.loggedIn=!!GH.UserData.remoteUser;GH.UserData.hasUser=function(){return GH.UserData.loggedIn};GH.UserData.getUserName=function(){return GH.UserData.remoteUser};GH.UserData.canCreateProject=function(){return GH.UserData.userConfig.canCreateProject};GH.UserData.setGlobalConfig=function(a){GH.UserData.quickCreateDefaultIssueTypeId=a.quickCreateDefaultIssueTypeId;GH.UserData.userConfig=a.userConfig;if(GH.UserData.userConfig&&GH.UserData.userConfig.canCreateProject){GH.UserData.userConfig.canCreateProject=!GH.Features.DISABLE_CREATE_PROJECT.isEnabled()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh-features.js' */
(function(){function a(b){this.featureKey=b;this.featureEmergencyDisabledKey=b+".emergencyDisabled"}a.prototype.isEnabled=function(){return AJS.DarkFeatures.isEnabled(this.featureKey)&&!AJS.DarkFeatures.isEnabled(this.featureEmergencyDisabledKey)};GH.namespace("GH.Features");GH.Features={DISABLE_CREATE_PROJECT:new a("jag.DISABLE_CREATE_PROJECT"),EDITABLE_DETAIL_VIEW_ENABLED:new a("com.atlassian.jira.agile.darkfeature.editable.detailsview")}})();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'includes/js/gh/navigation/Navigation.js' */
GH.namespace("GH.Navigation");GH.Navigation={};GH.Navigation.gotoDefaultRapidBoardPage=function(b,a){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(b,a)};GH.Navigation.getDefaultRapidBoardPageUrl=function(c,a){var b=(_.isUndefined(a)?"":("&view="+a));return GH.Navigation.getCanonicRapidBoardPageUrl(c)+b};GH.Navigation.getCanonicRapidBoardPageUrl=function(a){return GH.Ajax.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+a};GH.Navigation.getLoginUrl=function(){return GH.Ajax.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/dialog.js' */
GH.namespace("GH.Dialog");GH.Dialog.baseExtension={_getDefaultOptions:function(){return AJS.$.extend(this._super(),{onDialogFinished:function(){this.handleSuccess()}})},_performRedirect:function(){this.redirected=true;this.handleSuccess()},hide:function(b,a){if(JIRA.Dialog.current!==this){return false}this._super(b);if(a!==true&&a&&(a.reason===JIRA.Dialog.HIDE_REASON.escape||a.reason===JIRA.Dialog.HIDE_REASON.cancel)){this.doCancelCleanup()}},doCancelCleanup:function(){},handleSuccess:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ops/DialogExtension.js' */
GH.namespace("GH.Dialog.XBoardExtension");GH.Dialog.XBoardExtension.getActionInfo=function(b){var a="workflow-transition-";var c=b.options.id;if(c.substring(0,a.length)===a){return{formId:c,isTransition:true,transitionId:c.substring(a.length)}}else{return{formId:c,isTransition:false}}};GH.Dialog.XBoardExtension.handleSuccess=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue();this.hide(true,true);this._hideloadingIndicator();var b=GH.Dialog.XBoardExtension.getActionInfo(this);var c=GH.IssueOperationShortcuts.getSelectedIssueId();var a=GH.IssueOperationShortcuts.getSelectedIssueKey();if(GH.WorkController.isActive()){GH.Dialog.handleWorkModeUpdate(c,a,b)}else{if(GH.PlanController.isActive()){GH.Dialog.handlePlanModeUpdate(c,a,b)}}GH.Notification.showIssueMessage(c);GH.WorkDragAndDrop.transitionTargetStatus=undefined};GH.Dialog.handlePlanModeUpdate=function(e,b,d){if(!GH.IssueOperationShortcuts.isOverrideSelectedIssueActive()){var a=0;var f=null;var c=GH.BacklogModel.findModelWithIssue(b);if(c){if(GH.SprintModel.isSprintModel(c)){f=c.getSprintId()}a=c.getIssueList().getIssueIndex(b)}GH.PlanController.reload(function(){var i=GH.BacklogSelectionController.getSelectedIssueKey();if(i){return}var g=null;var h=null;if(f){h=GH.BacklogModel.getSprintModel(f)}if(!h){h=GH.BacklogModel.getBacklogModel2()}GH.BacklogSelectionController.selectIssue(h.getIssueList().getIssueKeyAtIndex(a))})}};GH.Dialog.handleWorkModeUpdate=function(i,d,h){var k=GH.Dialog.createParentCompletedCheckCallback(d);var j=GH.Dialog.createSelectMostAppropriateIssueCallback(d);if(h.isTransition){if(GH.WorkDragAndDrop.transitionTargetStatus){var l=GH.WorkDragAndDrop.transitionTargetStatus;var g=GH.GridDataController.getModel();var b=g.getIssueDataByKey(d);var c=g.getIssuePositionByKey(d);var e=g.getColumns();var f=c.columnId;var a=GH.GridColumnsData.getColumnIdForStatus(e,l);g.moveIssueToColumn(d,f,a);b.status=l;g.updateIssueData(b);GH.SwimlaneView.rerenderCell(c.swimlaneId,f);GH.SwimlaneView.rerenderCell(c.swimlaneId,a);k()}else{GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"ParentWithAllSubsCompletedCheck",k)}}GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"SelectMostAppropriateIssueCallback",j);GH.WorkController.reload()};GH.Dialog.createParentCompletedCheckCallback=function(a){return function(){var c=GH.GridDataController.getModel();if(!_.isUndefined(c.data.issues[a])&&!_.isUndefined(c.data.issues[a].parentKey)){var b=c.data.issues[a].parentKey;if(_.contains(c.data.columnIssueMapping[_.last(c.data.columns).id],a)){var d=c.data.columnIssueMapping[_.last(c.data.columns).id];var f=_.reduce(_.toArray(c.data.issues),function(g){return !_.contains(d,g)});var e=_.find(f,function(g){return c.data.issues[g].parentKey===b});if(!e){GH.WorkController.resolveParentTask(c.data.issues[b])}}}}};GH.Dialog.createSelectMostAppropriateIssueCallback=function(a){var b=GH.GridDataController.getModel().getIssuePositionByKey(a);return function(){var d=GH.GridDataController.getModel().getIssueDataByKey(a);if(d){return}var c=GH.GridDataController.getModel().getIssueKeyAtPosition(b);if(c){GH.WorkSelectionController.selectIssue(c,{pushState:false,dontUpdateUI:true});GH.RapidBoard.State.replaceState()}else{GH.WorkSelectionController.selectIssue(undefined,{pushState:false,dontUpdateUI:true});GH.RapidBoard.State.replaceState()}}};GH.Dialog.XBoardExtension.doCancelCleanup=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue();GH.WorkDragAndDrop.transitionTargetStatus=undefined};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/form-dialog.js' */
GH.namespace("GH.FormDialog");GH.FormDialog=JIRA.FormDialog.extend(GH.Dialog.baseExtension);GH.FormDialog=GH.FormDialog.extend(GH.Dialog.XBoardExtension);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/dialog/labels-dialog.js' */
define("jira-agile/dialog/labels-dialog",["jira/dialog/labels-dialog"],function(b){var a=b.extend(GH.Dialog.baseExtension);a=a.extend(GH.Dialog.XBoardExtension);a=a.extend({_handleSubmitResponse:function(d,e,c){if(this.serverIsDone){if(this.options.onSuccessfulSubmit){this.options.onSuccessfulSubmit.call(this,d,e,c)}if(this.options.autoClose){this.hide()}if(this.options.onDialogFinished){this.options.onDialogFinished.call(this,d,e,c)}}},decorateContent:function(){this._super();var c=this.get$popupContent();var e=c.find("input[name=customFieldId]");if(e.length===1){var d=c.find("#hint");d.hide()}}});return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'includes/js/rapid/ui/dialog/DialogUtil.js' */
GH.namespace("GH.Dialog");GH.Dialog.create=function(c){AJS.$("#"+c.id).remove();c=_.defaults(c,{bindEscape:true});var d=new AJS.Dialog(c);var b=d.show;var a=function(){GH.Dialog.preShow();GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv);GH.Notification.Handler.setCustomDivStyleHandler(function(){return""});b.call(d);var e=AJS.$("#"+c.id).find(".dialog-button-panel .aui-button");if(e.is(":enabled")){e.focus()}AJS.$("#"+c.id).addClass("ghx-dialog")};_.extend(d,{dispose:GH.Dialog.generateCloseHandler(d),cancel:GH.Dialog.generateCloseHandler(d,c.onCancelFn),submit:GH.Dialog.generateCloseHandler(d,c.onConfirmFn),show:a,disableControls:GH.Dialog.generateDisableControlsFn(d),enableControls:GH.Dialog.generateEnableControlsFn(d),showSpinner:GH.Dialog.generateShowSpinnerFn(d),hideSpinner:GH.Dialog.generateHideSpinnerFn(d)});GH.Dialog.bindEscapeHandler(d,!c.bindEscape);return d};GH.Dialog.prepareNotificationDiv=function(){var a=AJS.$(".dialog-page-body:visible"),b=a.find(".dialog-panel-body:first-child");if(b.length==0){b=AJS.$("<div/>").addClass("dialog-panel-body").prependTo(a)}return AJS.$("<div/>").prependTo(b)};GH.Dialog.addCancelButton=function(a){a.addCancel("Cancel",function(b){a.cancel(a)})};GH.Dialog.bindEscapeHandler=function(a,b){if(!b){AJS.$(document).bind("keyup."+a.id,function(c){if(c.keyCode==27){a.cancel(a)}})}else{JIRA.bind("Dialog.beforeHide",function(f,c,d,g){if(g===a.id&&d===JIRA.Dialog.HIDE_REASON.escape){f.preventDefault()}})}};GH.Dialog.generateCloseHandler=function(a,b){return function(){a.remove();GH.Dialog.undim();AJS.$(document).unbind("keyup."+a.id);AJS.unbind("remove.dialog");if(b){b(a)}GH.Notification.Handler.removeCustomHandlers();return false}};GH.Dialog.generateDisableControlsFn=function(a){return function(){AJS.$("#"+a.id+" button").attr("disabled","disabled")}};GH.Dialog.generateEnableControlsFn=function(a){return function(){AJS.$("#"+a.id+" button").removeAttr("disabled")}};GH.Dialog.generateShowSpinnerFn=function(a){return function(){AJS.$("#"+a.id).find(".button-panel-cancel-link").css("visibility","hidden").before('<span class="ghx-spinner"/>')}};GH.Dialog.generateHideSpinnerFn=function(a){return function(){AJS.$("#"+a.id).find(".ghx-spinner").remove().end().find(".button-panel-cancel-link").css("visibility","visible")}};GH.Dialog.sanitizeAJSDim=function(){var a=AJS.dim;AJS.dim=function(){try{a.apply(this,arguments)}catch(b){}}};GH.Dialog.registerDialog=function(a,c,b){AJS.$(document).undelegate(a,"click").delegate(a,"click",function(d){var e=AJS.$(this);if(e.hasClass("disabled")){return}d.preventDefault();c(d,b)})};GH.Dialog.dim=function(){AJS.dim();AJS.$(".aui-blanket").html('<span class="ghx-wait"></span>')};GH.Dialog.undim=function(){AJS.undim();AJS.$(".aui-blanket").empty()};GH.Dialog.preShow=function(){AJS.$(".aui-blanket").empty()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/CreateViewMessage.js' */
GH.namespace("GH.PersistentMessages.CreateViewMessage");GH.PersistentMessages.CreateViewMessage={};GH.PersistentMessages.CreateViewMessage.setView=function(e,a,b,d){var c={id:e,name:a,type:b,subType:d};GH.storage.put("gh.createViewMessage",c,true)};GH.PersistentMessages.CreateViewMessage.clear=function(){GH.storage.put("gh.createViewMessage",null,true)};GH.PersistentMessages.CreateViewMessage.renderMessage=function(c){if(c){GH.log(c.type+" handled","GH.PersistentMessages.CreateViewMessage.renderMessage")}var b=GH.storage.get("gh.createViewMessage",true);if(b){var a=null;b.name=AJS.escapeHTML(String(b.name));var d;if(b.type=="advanced"){d=GH.tpl.board.x.renderCreateViewMessage}else{if(b.subType=="kanban"){d=GH.tpl.board.x.renderWelcomeViewMessageKanban}else{if(b.subType=="scrum"){d=GH.tpl.board.x.renderWelcomeViewMessageScrum}}}a=d({rapidView:b,url:AJS.parseUri(window.location.href)});GH.Notification.showSuccess(a,{title:"Success",timeout:10000});GH.PersistentMessages.CreateViewMessage.clear()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'includes/js/rapid/ui/persistent-messages/WelcomeMessage.js' */
GH.namespace("GH.PersistentMessages.WelcomeMessage");GH.PersistentMessages.WelcomeMessage={};GH.PersistentMessages.WelcomeMessage.show=function(a){GH.storage.put("gh.welcomeMessage",a,true)};GH.PersistentMessages.WelcomeMessage.renderMessage=function(){var c=GH.storage.get("gh.welcomeMessage",true);if(c){var a=null;c.rapidView.name=AJS.escapeHTML(String(c.rapidView.name));c.project.name=AJS.escapeHTML(String(c.project.name));var b=null;if(/kanban/.test(c.preset)){if(c.sample){b=GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban}else{b=GH.tpl.board.x.renderWelcomeProjectMessageKanban}}else{if(/scrum/.test(c.preset)){if(c.sample){b=GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum}else{b=GH.tpl.board.x.renderWelcomeProjectMessageScrum}}}a=b({project:c.project,rapidView:c.rapidView,url:AJS.parseUri(window.location.href)});GH.Notification.showSuccess(a,{title:"Success",timeout:10000});GH.storage.put("gh.welcomeMessage",null,true)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-project-picker', location = 'includes/js/projects/project-picker.js' */
define("jira-agile/projects/project-picker",[],function(){var a=function(b){if(!b||!b.selector){throw new Error("Project picker requires a selector")}this.$select=AJS.$(b.selector);if(b.currentProjectId){this.currentProjectId=b.currentProjectId;this.currentProject=null}this.multiselect=new AJS.MultiSelect({element:this.$select,width:300,itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.buildRestUrl("/project.json"),formatResponse:this._processAjax.bind(this)}});if(typeof b.change==="function"){this.$select.bind("unselect",b.change);this.$select.bind("change",b.change)}if(!this.currentProjectId){return}this.multiselect.requestSuggestions(true).then(function(){if(!this.currentProject){return}this.multiselect.addItem(this._getProjectDescriptor(this.currentProject))}.bind(this))};a.prototype.show=function(){AJS.warn("ProjectPicker.show is deprecated. It is no longer needed as all initialisation occurs in the constructor")};a.prototype.hasValue=function(){return !!this.$select.val()};a.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0};a.prototype.getValue=function(){return this.$select.val()};a.prototype.getElement=function(){return this.$select};a.prototype._findProject=function(b,c){return(b||[]).filter(function(d){return c&&d.id===c}.bind(this))[0]};a.prototype._findUnmatchingProjects=function(b,c){return(b||[]).filter(function(d){return !c||(d.id!==c)}.bind(this))};a.prototype._processAjax=function(b){if(!b||!b.projects||!b.projects.length){return[]}this.currentProject=this._findProject(b.projects,this.currentProjectId);var c=this._findUnmatchingProjects(b.projects,this.currentProjectId).map(this._getProjectDescriptor.bind(this));if(!this.currentProject){return c}return[this._getProjectDescriptor(this.currentProject)].concat(c)};a.prototype._getProjectDescriptor=function(b){if(!b){throw new Error("ProjectPicker.prototype._getProjectDescriptor requires a project")}return new AJS.ItemDescriptor({value:b.id+"",label:b.displayName,html:AJS.escapeHTML(String(b.displayName))})};return a});AJS.namespace("GH.ProjectPicker",null,require("jira-agile/projects/project-picker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.soy' */
// This file was automatically generated from WizardView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.startwizard.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.startwizard == 'undefined') { GH.tpl.startwizard = {}; }


GH.tpl.startwizard.renderMethodologySelectionStep = function(opt_data, opt_ignored) {
  return '<form class="aui ghx-halved-vertical"><div class="aui-group"><div class="aui-item"><h2>' + soy.$$escapeHtml("Scrum") + '</h2><p>' + soy.$$escapeHtml("Scrum focuses on planning, committing and delivering time-boxed chunks of work called Sprints.") + '</p></div><div class="aui-item"><h2>' + soy.$$escapeHtml("Kanban") + '</h2><p>' + soy.$$escapeHtml("Kanban focuses on visualising your workflow and limiting work-in-progress to facilitate incremental improvements to your existing process.") + '</p></div></div><div class="aui-group ghx-button-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum" class="aui-button">' + soy.$$escapeHtml("Create a Scrum board") + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban" class="aui-button">' + soy.$$escapeHtml("Create a Kanban board") + '</button></div></div>' + ((opt_data.isSampleDataAvailable && opt_data.canCreateProject) ? '<div class="aui-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml("Create a Scrum board with sample data") + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml("Create a Kanban board with sample data") + '</button></div></div>' : '') + '</form>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodologySelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodologySelectionStep';
}


GH.tpl.startwizard.renderMethodSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split" id="js-method-choice"><div class="aui-item"><form class="aui"><fieldset class="group ghx-space-saver">' + ((opt_data.canCreateProject) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-new-project" name="ghx-wizard-method" value="newProject" ' + ((opt_data.selectedOption == 'newProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-new-project">' + soy.$$escapeHtml("Board created with new Software project") + '</label><div class="description">' + soy.$$escapeHtml("A new board based on a new Software project") + '</div></div>' : '') + ((opt_data.hasProjectsAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-project" name="ghx-wizard-method" value="existingProject" ' + ((opt_data.selectedOption == 'existingProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-project">' + soy.$$escapeHtml("Board from an existing project") + '</label><div class="description">' + soy.$$escapeHtml("Boards can contain one or more projects.") + '</div></div>' : '') + ((opt_data.hasFiltersAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-filter" name="ghx-wizard-method" value="existingFilter" ' + ((opt_data.selectedOption == 'existingFilter') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-filter">' + soy.$$escapeHtml("Board from an existing Saved Filter") + '</label><div class="description">' + soy.$$escapeHtml("An advanced option using a JQL filter.") + '</div></div>' : '') + '</fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodSelectionStep';
}


GH.tpl.startwizard.renderProjectSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-project-board-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-project-board-name" maxlength="155"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml("Project(s)") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-choose-project" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml("Select one or more projects to be included in this board.") + '</div></div></fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectSelectionStep';
}


GH.tpl.startwizard.renderFilterSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-filter-view-name">' + soy.$$escapeHtml("Board name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-filter-view-name" name="name" maxlength="155"></div><div class="field-group" id="ghx-filter-picker"><label for="ghx-wizard-filter-select">' + soy.$$escapeHtml("Saved filter") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-filter-select" class="hidden"></select><div id="ghx-filter-error"></div></div><div id="ghx-create-permissioninfo-container"></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml("Saved Filters") + '</h3><div class="description">' + soy.$$escapeHtml("Choose from a list of existing filters as a base for your new board. To create a new Saved Filter, save a search in the Issue Navigator.") + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderFilterSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderFilterSelectionStep';
}


GH.tpl.startwizard.renderProjectCreationStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui"><fieldset><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname">' + soy.$$escapeHtml("Project name") + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectName) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey">' + soy.$$escapeHtml("Project key") + '<span class="aui-icon icon-required"></span></label><input class="text short-field" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectKey) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead">' + soy.$$escapeHtml("Project lead") + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead" class="js-default-user-picker hidden"><option' + ((opt_data.user.avatarUrl) ? ' style="background-image:url(\'' + soy.$$escapeHtml(opt_data.user.avatarUrl) + '\')"' : '') + 'selected="selected" value="' + soy.$$escapeHtml(opt_data.user.name) + '">' + soy.$$escapeHtml(opt_data.user.displayName) + '</option></select><div class="description">' + soy.$$escapeHtml("Start typing to get a list of possible matches.") + '</div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml("Creating a project") + '</h3><div class="description">' + soy.$$escapeHtml("A board will be created with your project, and will be named after your project. You can rename your board in the board configuration screen.") + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectCreationStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectCreationStep';
}


GH.tpl.startwizard.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml("Shares") + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '</div><div class="field-group"><label>' + soy.$$escapeHtml("Owner") + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.owner.displayName) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderPermissionInfo.soyTemplateName = 'GH.tpl.startwizard.renderPermissionInfo';
}


GH.tpl.startwizard.createProjectTimeout = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("The operation has timed out, the project and board might have been created already. You can confirm this by checking the \x3ca href\x3d\x22{0}\x22\x3eManage Boards\x3c/a\x3e page.",opt_data.manageBoardURL));
};
if (goog.DEBUG) {
  GH.tpl.startwizard.createProjectTimeout.soyTemplateName = 'GH.tpl.startwizard.createProjectTimeout';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/configuration/RapidView.soy' */
// This file was automatically generated from RapidView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.view.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.view == 'undefined') { GH.tpl.rapid.view = {}; }


GH.tpl.rapid.view.renderConfigurationHeader = function(opt_data, opt_ignored) {
  return '<div id="ghx-modes-tools">' + aui.buttons.button({text: "Back to board", type: 'subtle', href: GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidViewId + '&useStoredSettings=true', id: 'back-to-board', iconType: 'aui', iconText: "Back to board", iconClass: 'aui-icon-small aui-iconfont-back-page'}) + '</div><h2>' + soy.$$escapeHtml("Configure") + ' <span id="js-nav-view-name">' + soy.$$escapeHtml(opt_data.name) + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationHeader.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationHeader';
}


GH.tpl.rapid.view.renderConfigurationTabs = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-header"></div><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml("Configuration") + '</strong></div><ul id="ghx-config-nav" class="aui-nav">';
  var configurationTabList21 = opt_data.configurationTabs;
  var configurationTabListLen21 = configurationTabList21.length;
  for (var configurationTabIndex21 = 0; configurationTabIndex21 < configurationTabListLen21; configurationTabIndex21++) {
    var configurationTabData21 = configurationTabList21[configurationTabIndex21];
    output += '<li data-tabitem="' + soy.$$escapeHtml(configurationTabData21.key) + '"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=' + soy.$$escapeHtml(configurationTabData21.key) + '">' + soy.$$escapeHtml(configurationTabData21.label) + '</a></li>';
  }
  output += '</ul></div></nav></div><section id="ghx-config-panel-content" class="aui-page-panel-content">';
  var configurationTabList35 = opt_data.configurationTabs;
  var configurationTabListLen35 = configurationTabList35.length;
  for (var configurationTabIndex35 = 0; configurationTabIndex35 < configurationTabListLen35; configurationTabIndex35++) {
    var configurationTabData35 = configurationTabList35[configurationTabIndex35];
    output += '<div class="ghx-page-panel-content-item" id="' + soy.$$escapeHtml(configurationTabData35.key) + '">' + soy.$$filterNoAutoescape(configurationTabData35.html) + '</div>';
  }
  output += '</section></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationTabs.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationTabs';
}


GH.tpl.rapid.view.renderViewNameEditForm = function(opt_data, opt_ignored) {
  return '<label for="ghx-field-viewname">' + soy.$$escapeHtml("Board name") + '</label>' + GH.tpl.rapid.view.renderViewNameField(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameEditForm';
}


GH.tpl.rapid.view.renderViewNameField = function(opt_data, opt_ignored) {
  return '<span class="field-value ' + ((opt_data.canEdit) ? 'js-edit-rapidViewName' : '') + '" data-fieldname="viewname" data-fieldvalue="' + soy.$$escapeHtml(opt_data.rapidViewName) + '"><span id="ghx-field-viewname" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>' + soy.$$escapeHtml(opt_data.rapidViewName) + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameField.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameField';
}


GH.tpl.rapid.view.renderViewBoardAdminsEditForm = function(opt_data, opt_ignored) {
  var output = '<label for="ghx-field-view-board-admins">' + soy.$$escapeHtml("Administrators") + '</label><span  class="field-value' + ((opt_data.canEdit) ? ' js-edit-rapidViewBoardAdmin' : '') + '" ><span id="ghx-field-view-board-admins-span" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>';
  var itemList77 = opt_data.model;
  var itemListLen77 = itemList77.length;
  if (itemListLen77 > 0) {
    for (var itemIndex77 = 0; itemIndex77 < itemListLen77; itemIndex77++) {
      var itemData77 = itemList77[itemIndex77];
      output += soy.$$escapeHtml(itemData77.displayName) + ((! (itemIndex77 == itemListLen77 - 1)) ? '<span>, </span>' : '');
    }
  } else {
    output += '<span class="ghx-fa">' + soy.$$escapeHtml("None") + '</span>';
  }
  output += '</span></span><span id="ghx-field-view-board-admins">' + ((opt_data.canUsePicker) ? '<select id="ghx-board-admins" multiple="multiple" class="hidden"></select>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardAdminsEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardAdminsEditForm';
}


GH.tpl.rapid.view.renderBoardAdminsEditNoPicker = function(opt_data, opt_ignored) {
  var output = '<span class="ghx-margin-right"><strong>' + soy.$$escapeHtml("Groups") + '</strong>: <input class="text medium-field" id="ghx-board-admin-edit-groups" value="';
  var itemList96 = opt_data.model.groupKeys;
  var itemListLen96 = itemList96.length;
  for (var itemIndex96 = 0; itemIndex96 < itemListLen96; itemIndex96++) {
    var itemData96 = itemList96[itemIndex96];
    output += soy.$$escapeHtml(itemData96.key) + ((! (itemIndex96 == itemListLen96 - 1)) ? ',' : '');
  }
  output += '" /></span><strong>' + soy.$$escapeHtml("Users") + '</strong>: <input class="text medium-field " id="ghx-board-admin-edit-users" value="';
  var itemList105 = opt_data.model.userKeys;
  var itemListLen105 = itemList105.length;
  for (var itemIndex105 = 0; itemIndex105 < itemListLen105; itemIndex105++) {
    var itemData105 = itemList105[itemIndex105];
    output += soy.$$escapeHtml(itemData105.key) + ((! (itemIndex105 == itemListLen105 - 1)) ? ',' : '');
  }
  output += '" /><div class="description">' + soy.$$escapeHtml("Separate user keys and group names with commas.") + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderBoardAdminsEditNoPicker.soyTemplateName = 'GH.tpl.rapid.view.renderBoardAdminsEditNoPicker';
}


GH.tpl.rapid.view.renderConfigPermissionsWarning = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.canEdit != true) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span><strong>' + soy.$$escapeHtml("Contact a JIRA or Board Administrator to configure this board.") + '</strong></p></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigPermissionsWarning.soyTemplateName = 'GH.tpl.rapid.view.renderConfigPermissionsWarning';
}


GH.tpl.rapid.view.renderFilterDetails = function(opt_data, opt_ignored) {
  var output = '<form class="aui" id="ghx-savedfilter-form"><div class="aui-message warning hidden" id="unmapped-issues-warning"><span class="aui-icon icon-warning"></span><p>' + soy.$$escapeHtml("Some issues in the Saved Filter will not be shown on the board.") + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=columns" id="js-view-columns">' + soy.$$escapeHtml("View unmapped statuses which contain these issues.") + '</a></p></div><div class="field-group"><label>' + soy.$$escapeHtml("Saved Filter") + '</label><span id="ghx-filter-change" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</span><select id="ghx-filter-change-select" class="hidden"></select><p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&requestId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + ((opt_data.canEdit) ? soy.$$escapeHtml("Edit Filter Query") : soy.$$escapeHtml("View Filter Query")) + '</a></p></div>' + GH.tpl.rapid.view.renderPermissionInfo(opt_data) + '<div class="field-group ghx-jql-preview"><label>' + soy.$$escapeHtml("Filter Query") + '</label><span class="field-value">' + ((opt_data.savedFilter.query) ? soy.$$escapeHtml(opt_data.savedFilter.query) : '') + '</span></div><div class="field-group"><label>' + soy.$$escapeHtml("Ranking") + '</label><span class="field-value">';
  if (opt_data.savedFilter.isOrderedByRank) {
    output += soy.$$escapeHtml("Using Rank");
  } else {
    if (! opt_data.savedFilter.orderByWarnings) {
      output += soy.$$escapeHtml("Ranking is disabled, as the Filter Query is not ordered by Rank");
    } else {
      var warningList167 = opt_data.savedFilter.orderByWarnings.errorMessages;
      var warningListLen167 = warningList167.length;
      for (var warningIndex167 = 0; warningIndex167 < warningListLen167; warningIndex167++) {
        var warningData167 = warningList167[warningIndex167];
        output += soy.$$escapeHtml(warningData167) + '<br>';
      }
    }
    output += (opt_data.savedFilter.canEdit && opt_data.savedFilter.canBeFixed) ? '<p><button class="aui-button js-update-filter-order-by">' + soy.$$escapeHtml("Add Rank") + '</button></p>' : '';
  }
  output += '</span></div>';
  if (opt_data.savedFilter.queryProjects) {
    output += '<div class="field-group"><label>' + soy.$$escapeHtml("Projects in board") + '</label><ul id="ghx-show-projects-in-board">';
    if (opt_data.savedFilter.queryProjects.displayMessage) {
      output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.queryProjects.displayMessage) + '</span>';
    } else {
      var avatarSize__soy188 = 'small';
      var projectList189 = opt_data.savedFilter.queryProjects.projects;
      var projectListLen189 = projectList189.length;
      for (var projectIndex189 = 0; projectIndex189 < projectListLen189; projectIndex189++) {
        var projectData189 = projectList189[projectIndex189];
        output += '<li>' + aui.avatar.avatar({isProject: 'true', size: '' + soy.$$escapeHtml(avatarSize__soy188), avatarImageUrl: soy.$$escapeHtml("") + '/secure/projectavatar?size=' + soy.$$escapeHtml(avatarSize__soy188) + '&pid=' + soy.$$escapeHtml(projectData189.id), extraClasses: 'jira-system-avatar'}) + '<strong>' + soy.$$escapeHtml(projectData189.name) + '</strong><p>';
        var viewProjectPermissionText__soy207 = "View permission";
        output += ((projectData189.isValidEditProjectConfigAction) ? '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(projectData189.key) + '/permissions">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a>' : '<a class="disabled">' + soy.$$escapeHtml(viewProjectPermissionText__soy207) + '</a><span class="aui-icon aui-icon-small aui-iconfont-info" title="' + soy.$$escapeHtml("You are not allowed to view this Project Permission") + '"></span>') + '</p></li>';
      }
    }
    output += '</ul></div>';
  }
  output += ((opt_data.isSubqueriesConfigurable) ? '<div class="field-group ghx-jql"><label for="ghx-sub-jql">' + soy.$$escapeHtml("Kanban board sub-filter") + '</label><div id="js-sub-container-work">' + GH.tpl.rapid.view.renderSubQueryView({section: 'board.kanban.work', queryValue: opt_data.subqueries[0], canEdit: opt_data.canEdit}) + '</div><div class="description">' + soy.$$escapeHtml("Further filtering of issues for unreleased work.") + '</div></div>' : '') + '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderFilterDetails.soyTemplateName = 'GH.tpl.rapid.view.renderFilterDetails';
}


GH.tpl.rapid.view.renderSubQueryView = function(opt_data, opt_ignored) {
  return '<span id="ghx-sub-work" class="field-value' + ((opt_data.canEdit) ? ' js-editable ghx-editable ghx-jql' : '') + '">' + ((opt_data.queryValue) ? soy.$$escapeHtml(opt_data.queryValue) : (opt_data.canEdit) ? '<em>' + soy.$$escapeHtml("Add Sub-Filter") + '</em>' : soy.$$escapeHtml("No sub-filter")) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryView.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryView';
}


GH.tpl.rapid.view.renderSubQueryControls = function(opt_data, opt_ignored) {
  return '<textarea class="js-jql-autocomplete-field textarea" id="ghx-sub-jql" data-section="' + soy.$$escapeHtml(opt_data.section) + '" cols="20" rows="2">' + soy.$$escapeHtml(opt_data.queryValue) + '</textarea><span id="ghx-sub-jql-errormsg" class="icon jqlgood js-jql-autocomplete-error"><span></span></span><button class="aui-button js-subquery-submit">' + soy.$$escapeHtml("Update") + '</button><button class="aui-button js-subquery-cancel">' + soy.$$escapeHtml("Cancel") + '</button>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryControls.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryControls';
}


GH.tpl.rapid.view.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml("Shares") + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + ((opt_data.savedFilter.canEdit) ? '<p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/EditFilter!default.jspa?filterId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + soy.$$escapeHtml("Edit Filter Shares") + '</a></p>' : '</div><div class="field-group"><label>' + soy.$$escapeHtml("Owner") + '</label><span class="field-value">' + soy.$$filterNoAutoescape(opt_data.savedFilter.owner.renderedLink) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionInfo.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionInfo';
}


GH.tpl.rapid.view.renderPermissionEntries = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.permissionEntries.length > 0) {
    output += '<span class="field-value"><ul id="ghx-create-permissioninfo">';
    var permissionEntryList294 = opt_data.permissionEntries;
    var permissionEntryListLen294 = permissionEntryList294.length;
    for (var permissionEntryIndex294 = 0; permissionEntryIndex294 < permissionEntryListLen294; permissionEntryIndex294++) {
      var permissionEntryData294 = permissionEntryList294[permissionEntryIndex294];
      output += '<li>';
      var permissionValueList296 = permissionEntryData294.values;
      var permissionValueListLen296 = permissionValueList296.length;
      for (var permissionValueIndex296 = 0; permissionValueIndex296 < permissionValueListLen296; permissionValueIndex296++) {
        var permissionValueData296 = permissionValueList296[permissionValueIndex296];
        output += ((permissionValueData296.type == "Shared with the public") ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-unlocked" title="' + soy.$$escapeHtml("Sharing unrestricted") + '">' + soy.$$escapeHtml("Sharing unrestricted") + '</span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml("Sharing restricted") + '">' + soy.$$escapeHtml("Sharing restricted") + '</span>') + ((permissionValueData296.name) ? '<strong>' + soy.$$escapeHtml(permissionValueData296.type) + ':</strong><span>' + soy.$$escapeHtml(permissionValueData296.name) + '</span>' : '<strong>' + soy.$$escapeHtml(permissionValueData296.type) + '</strong>');
      }
      output += '</li>';
    }
    output += '</ul></span>';
  } else {
    output += '<span class="field-value">' + soy.$$escapeHtml("No shares") + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionEntries.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionEntries';
}


GH.tpl.rapid.view.deleteForm = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.deleteForm.soyTemplateName = 'GH.tpl.rapid.view.deleteForm';
}


GH.tpl.rapid.view.confirmForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml("Confirmation") + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><div class="form-footer buttons-container"><div class="buttons"><input id="submit" class="button" type="submit" value="' + soy.$$escapeHtml("Confirm") + '" /><a role="button" href="#" class="cancel">' + soy.$$escapeHtml("Cancel") + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.confirmForm.soyTemplateName = 'GH.tpl.rapid.view.confirmForm';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/startwizard/WizardView.js' */
GH.StartWizardView={};GH.StartWizardView.dialog=undefined;GH.StartWizardView.model=undefined;GH.StartWizardView.stepsNameStack=undefined;GH.StartWizardView.pages={};GH.StartWizardView.filterPicker=undefined;GH.StartWizardView.projectPicker=undefined;(function(){var a=require("jira-agile/rapid/analytics-tracker");GH.StartWizardView.analytics=new a("gh.create.wizard")})();GH.StartWizardView.wizardStepPreRenderCallbacks=[];GH.StartWizardView.wizardStepPostRenderCallbacks=[];GH.StartWizardView.wizardStepOnValidateCallbacks=[];GH.StartWizardView.wizardStepOnCreateCallbacks=[];GH.StartWizardView.steps={methodologySelection:{render:function(a){var b={isSampleDataAvailable:GH.Config.isSampleDataAvailable,canCreateProject:GH.UserData.canCreateProject()};return{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodologySelectionStep(b)}},bind:function(b,a){AJS.$("#ghx-wizard-methodology-scrum").click(function(c){c.preventDefault();a.sampleData=false;GH.StartWizardView.selectMethodology("scrum",a)});AJS.$("#ghx-wizard-methodology-kanban").click(function(c){c.preventDefault();a.sampleData=false;GH.StartWizardView.selectMethodology("kanban",a)});AJS.$("#ghx-wizard-methodology-scrum-sample").click(function(c){c.preventDefault();a.sampleData=true;GH.StartWizardView.selectMethodology("scrum",a)});AJS.$("#ghx-wizard-methodology-kanban-sample").click(function(c){c.preventDefault();a.sampleData=true;GH.StartWizardView.selectMethodology("kanban",a)})}},methodSelection:{render:function(a){var b=a.method;if(!b){b=(GH.UserData.userConfig.canCreateProject)?"newProject":"existingProject"}return{header:"Create an Agile board",content:GH.tpl.startwizard.renderMethodSelectionStep(_.extend({},a,{canCreateProject:GH.UserData.userConfig.canCreateProject,hasProjectsAccessible:GH.UserData.userConfig.hasProjectsAccessible,hasFiltersAccessible:GH.UserData.userConfig.hasFiltersAccessible,selectedOption:b}))}},bind:function(a){},next:function(c,b){var d=c.find("input[name=ghx-wizard-method]").filter(":checked").val();b.method=d;var a=AJS.$.Deferred();if(d==="newProject"){a.resolve("projectCreation")}else{if(d==="existingProject"){a.resolve("projectSelection")}else{if(d==="existingFilter"){a.resolve("filterSelection")}else{a.reject(new Error("Unknown board creation method : "+d))}}}return a.promise()}},projectCreation:{render:function(a){a.prefix="project";return GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"project",sampleInfo:{projectName:"",projectKey:""}})},bind:function(b,a){GH.StartWizardView.bindProjectCreation(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.createProject(GH.StartWizardView.dialog,a)}},sampleProjectCreation:{render:function(a){a.prefix="sample";return GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"sample",sampleInfo:a.sampleInfo})},bind:function(b,a){GH.StartWizardView.bindProjectCreation(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.createSampleProject(GH.StartWizardView.dialog,a)}},projectSelection:{render:function(a){return{header:"Name this board",content:GH.tpl.startwizard.renderProjectSelectionStep()}},bind:function(b,a){GH.StartWizardView.bindProjectSelection(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.validateProjectSelection(a)}},filterSelection:{render:function(a){return{header:"Name this board",content:GH.tpl.startwizard.renderFilterSelectionStep()}},bind:function(b,a){GH.StartWizardView.bindFilterSelection(b,a)},completeActionName:"Create board",complete:function(a){return GH.StartWizardView.validateFilterSelection(a)}}};GH.StartWizardView.show=function(a){if(!GH.StartWizardView.dialog){GH.StartWizardView.dialog=GH.Dialog.create({width:840,height:400,id:"ghx-wizard-dialog",onCancelFn:function(){GH.StartWizardView.disposeWizard();GH.StartWizardView.analytics.trigger("cancel")}});GH.StartWizardView.model={};GH.StartWizardView.stepsNameStack=[];GH.StartWizardView.dialog.show();GH.StartWizardView.analytics.trigger("start");GH.StartWizardView.preventSubmitOnEnter()}};GH.StartWizardView.preventSubmitOnEnter=function(){var a=function(b){if(b.keyCode==13&&b.target.id!="ghx-wizard-filter-select-field"){b.preventDefault();return false}};AJS.$("input").keydown(a)};GH.StartWizardView.showStep=function(g){if(!_.has(GH.StartWizardView.steps,g)){throw new Error("Unknown wizard step "+g)}var c=GH.StartWizardView.dialog;if(!GH.StartWizardView.pages[g]){var a=GH.StartWizardView.steps[g];var f=a.render(GH.StartWizardView.model);_.each(GH.StartWizardView.wizardStepPreRenderCallbacks,function(h){h(g)});c.addPage();GH.StartWizardView.pages[g]=c.curpage;c.addHeader(f.header);var b=AJS.$(f.content);c.addPanel(null,b,"ghx-wizard-panel");_.each(GH.StartWizardView.wizardStepPostRenderCallbacks,function(h){h(g,c)});if(GH.StartWizardView.stepsNameStack.length>0){c.addButton("Back",function(){var h=GH.StartWizardView.stepsNameStack.pop();GH.StartWizardView.showStep(h)},"aui-button")}if(_.has(a,"complete")){var e=function(){var h=AJS.$(this);var i=h.attr("aria-disabled");if(i=="true"){return}a.complete(GH.StartWizardView.model)};c.addButton(a.completeActionName,e,"aui-button aui-button-primary js-wizard-button-complete")}else{if(_.has(a,"next")){var d=function(){var j=AJS.$(this);var k=j.attr("aria-disabled");if(k=="true"){return}var l=a.next(b,GH.StartWizardView.model);var i=function(n){GH.StartWizardView.stepsNameStack.push(g);GH.StartWizardView.showStep(n)};var m=function(n){console.log(n);c.updateHeight()};var h=true;_.each(GH.StartWizardView.wizardStepOnValidateCallbacks,function(n){if(!n(g,c)){h=false}});l.done(function(n){if(h){i(n)}else{m("GH project create extension callback returned failure")}}).fail(m)};c.addButton("Next",d,"aui-button aui-button-primary js-wizard-button-next")}}c.addCancel("Cancel",function(){c.cancel()});a.bind(b,GH.StartWizardView.model)}else{c.gotoPage(GH.StartWizardView.pages[g]);GH.StartWizardView.dialog.popup.element.find(".dialog-panel-body .aui-message-error").remove()}c.updateHeight();GH.StartWizardView.preventSubmitOnEnter()};GH.StartWizardView.startWizard=function(){GH.StartWizardView.show();GH.StartWizardView.showStep("methodologySelection")};GH.StartWizardView.disposeWizard=function(){GH.StartWizardView.dialog=undefined;GH.StartWizardView.pages={}};GH.StartWizardView.genStartFunction=function(a,b){return function(){GH.StartWizardView.show();GH.StartWizardView.model.sampleData=b;GH.StartWizardView.selectMethodology(a,GH.StartWizardView.model)}};GH.StartWizardView.bindWelcomePage=function(){GH.Dialog.registerDialog(".js-wizard-scrum",GH.StartWizardView.genStartFunction("scrum",false));GH.Dialog.registerDialog(".js-wizard-scrum-sample",GH.StartWizardView.genStartFunction("scrum",true));GH.Dialog.registerDialog(".js-wizard-kanban",GH.StartWizardView.genStartFunction("kanban",false));GH.Dialog.registerDialog(".js-wizard-kanban-sample",GH.StartWizardView.genStartFunction("kanban",true))};GH.StartWizardView.getCreateProjectRequest=function(b){var c=b.project;var a={projectName:c.name,projectKey:c.key,projectLeadUserName:c.lead,boardName:b.boardName,preset:b.methodology,sampleData:b.sampleData};return a};GH.StartWizardView.createProject=function(b,a){GH.StartWizardView.populateProjectCreationProperties(a);var d=GH.StartWizardView.getCreateProjectRequest(a);b.disableControls();b.showSpinner();var c={url:"/welcome/createProject",data:d,errorContextMap:{projectName:"#ghx-wizard-"+a.prefix+"-projectname",projectKey:"#ghx-wizard-"+a.prefix+"-projectkey",projectLead:"#ghx-wizard-"+a.prefix+"-projectlead"},timeout:2*60*1000,deferErrorHandling:true};return GH.Ajax.put(c).done(function(e){e.success.sample=a.sampleData;GH.PersistentMessages.WelcomeMessage.show(e.success);var g=function(){GH.StartWizardView.gotoCreatedView(e.success.rapidView.id,a.methodology)};function f(){if(GH.StartWizardView.wizardStepOnCreateCallbacks.length==0){g()}else{var h=GH.StartWizardView.wizardStepOnCreateCallbacks.pop();h(b,f,a)}}f()}).fail(function(h,g,f,e){_.each(h.getGlobalErrors(),function(i){if(i.status==504){i.message=GH.tpl.startwizard.createProjectTimeout({manageBoardURL:GH.RapidBoard.getManageViewsPageUrl()});i.noAutoescape=true}});GH.Ajax.handleContextualErrors(h,c.errorContextMap);GH.Ajax.handleGlobalErrors(h,c.errorContextMap);b.hideSpinner();b.enableControls();b.updateHeight()})};GH.StartWizardView.validateProjectSelection=function(b){GH.StartWizardView.dialog.disableControls();GH.StartWizardView.dialog.showSpinner();var a=AJS.$("#ghx-wizard-project-board-name");GH.Validation.clearContextualErrors(GH.StartWizardView.projectPicker.getElement());GH.Validation.clearContextualErrors(a);return GH.Ajax.post({url:"/rapidview/create/presets",data:{name:a.val(),projectIds:GH.StartWizardView.projectPicker.getValue(),preset:b.methodology},errorContextMap:{name:"#ghx-wizard-project-board-name",projectIds:GH.StartWizardView.projectPicker.selector}}).done(function(c){console.log("mode: "+b);GH.StartWizardView.handleCreate(c,"simple",b.methodology)}).fail(function(){GH.StartWizardView.dialog.enableControls();GH.StartWizardView.dialog.hideSpinner();GH.StartWizardView.dialog.updateHeight()})};GH.StartWizardView.validateFilterSelection=function(c){var a=AJS.$("#ghx-wizard-filter-view-name");var d=GH.StartWizardView.filterPicker.getElement();var e=AJS.$(GH.StartWizardView.filterPicker.selector);GH.Validation.clearContextualErrors(a);GH.Validation.clearContextualErrors(d);var b=e.val()?e.val()[0]:null;GH.StartWizardView.dialog.disableControls();GH.StartWizardView.dialog.showSpinner();return GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:a.val(),filterId:b,methodology:c.methodology},errorContextMap:{name:"#ghx-wizard-filter-view-name",filterId:GH.StartWizardView.filterPicker.selector}}).done(function(f){GH.StartWizardView.handleCreate(f,"simple",c.methodology)}).fail(function(){GH.StartWizardView.dialog.hideSpinner();GH.StartWizardView.dialog.enableControls();GH.StartWizardView.dialog.updateHeight()})};GH.StartWizardView.handleCreate=function(a,b,c){var d=b!=c?c:false;GH.PersistentMessages.CreateViewMessage.setView(a.success.id,a.success.name,b,d);GH.StartWizardView.analytics.trigger("complete");GH.StartWizardView.gotoCreatedView(a.success.id,c)};GH.StartWizardView.gotoCreatedView=function(c,b){var a=b=="scrum"?"planning":null;GH.Navigation.gotoDefaultRapidBoardPage(c,a)};GH.StartWizardView.selectMethodology=function(e,c){c.methodology=e;GH.StartWizardView.stepsNameStack.push("methodologySelection");if(c.sampleData){GH.Ajax.get({url:"/welcome/sampledataproject?preset="+c.methodology},"sampledataproject").done(function(f){c.sampleInfo=f;GH.StartWizardView.showStep("sampleProjectCreation")}).fail(function(){GH.StartWizardView.showStep("sampleProjectCreation")})}else{var d=GH.UserData.userConfig.canCreateProject;var a=GH.UserData.userConfig.hasProjectsAccessible;var b=GH.UserData.userConfig.hasFiltersAccessible;if(!d&&!b){GH.StartWizardView.showStep("projectSelection")}else{if(!a&&!b){GH.StartWizardView.showStep("projectCreation")}else{GH.StartWizardView.showStep("methodSelection")}}}};GH.StartWizardView.populateProjectCreationProperties=function(a){var b=AJS.$("#ghx-wizard-"+a.prefix+"-projectname");var c=AJS.$("#ghx-wizard-"+a.prefix+"-projectkey");var d=AJS.$("#ghx-wizard-"+a.prefix+"-projectlead");GH.Validation.clearContextualErrors(b);GH.Validation.clearContextualErrors(c);GH.Validation.clearContextualErrors(d);a.project={name:b.val(),key:c.val().toUpperCase(),lead:AJS.$("#ghx-wizard-"+a.prefix+"-projectlead option:selected").val()}};GH.StartWizardView.createSampleProject=function(b,a){a.sampleData=true;GH.StartWizardView.createProject(b,a)};GH.StartWizardView.validateBoardName=function(a,b){GH.Validation.clearContextualErrors(a);b.boardName=a.val();if(!b.boardName){GH.Validation.showContextualErrors(a,"Please enter a name for your board.");return false}return true};GH.StartWizardView.renderProjectCreation=function(a){return{header:"New project with board",content:GH.tpl.startwizard.renderProjectCreationStep(a)}};GH.StartWizardView.bindProjectSelection=function(b,a){GH.StartWizardView.projectPicker=new GH.ProjectPicker({selector:"#ghx-wizard-choose-project",change:function(){GH.StartWizardView.dialog.updateHeight()},currentProjectId:(JIRA.API&&JIRA.API.Projects)?JIRA.API.Projects.getCurrentProjectId():null});GH.StartWizardView.projectPicker.multiselect.keys.Return=function(c){c.preventDefault()};GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-project-board-name","#ghx-wizard-choose-project"]})};GH.StartWizardView.bindProjectCreation=function(b,a){AJS.$("#ghx-wizard-"+a.prefix+"-projectkey").generateFrom(AJS.$("#ghx-wizard-"+a.prefix+"-projectname"),{maxNameLength:64,maxKeyLength:64});JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[b]);b.trigger("contentRefresh");var d=GH.StartWizardView.dialog;var e=d.page[d.curpage];var c=e.button[1].item;GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-"+a.prefix+"-projectname","#ghx-wizard-"+a.prefix+"-projectkey","#ghx-wizard-"+a.prefix+"-projectlead"]})};GH.StartWizardView.bindFilterSelection=function(b,a){var c=function(g,f){var e="";delete a.savedFilter;if(f&&f.properties){var d=f.properties.savedFilter;e=d!=null?GH.tpl.startwizard.renderPermissionInfo({savedFilter:d}):"";a.savedFilter=d}AJS.$("#ghx-create-permissioninfo-container").html(e);GH.StartWizardView.dialog.updateHeight()};GH.StartWizardView.filterPicker=new GH.SavedFilterPicker({selector:"#ghx-wizard-filter-select",selected:c,stayActivated:true});GH.StartWizardView.filterPicker.show(a.savedFilter);GH.StartWizardView.filterPicker.singleSelect.keys.Return=function(d){d.preventDefault()};GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-filter-view-name","#ghx-wizard-filter-select"]})};GH.StartWizardView.attachDependantButton=function(a){var c=GH.StartWizardView.dialog;var d=c.page[c.curpage];var b=d.button[a.buttonIndex].item;GH.StartWizardView.dependantValidationListener({selectors:a.selectors,full:function(){b.attr("aria-disabled","false")},empty:function(){b.attr("aria-disabled","true")}})};GH.StartWizardView.dependantValidationListener=function(a){if(_.isEmpty(a.selectors)){return}a.full=a.full||AJS.$.noop();a.empty=a.empty||AJS.$.noop();a.nowait=a.nowait||false;function b(){var d=_.filter(a.selectors,function(f){var e=AJS.$(f);return !AJS.$.trim(e.val())});if(_.isEmpty(d)){return a.full()}else{return a.empty()}}function c(){if(a.nowait){b()}else{setTimeout(b,50)}}_.each(a.selectors,function(e){var d=AJS.$(e);d.on("input",c);d.on("change",c);d.on("selected",c);d.on("unselect",c)});b()};GH.StartWizardView.registerWizardStepPreRenderCallback=function(a){GH.StartWizardView.wizardStepPreRenderCallbacks.push(a)};GH.StartWizardView.registerWizardStepPostRenderCallback=function(a){GH.StartWizardView.wizardStepPostRenderCallbacks.push(a)};GH.StartWizardView.registerWizardStepOnValidateCallback=function(a){GH.StartWizardView.wizardStepOnValidateCallbacks.push(a)};GH.StartWizardView.registerWizardStepOnCreateCallbacks=function(a){GH.StartWizardView.wizardStepOnCreateCallbacks.push(a)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/rapid/ui/component/SavedFilterPicker.js' */
GH.SavedFilterPicker=function(a){this.selector=a.selector;this.fieldSelector=a.selector+"-field";this.blurHandler=a.blur;this.selectHandler=a.selected;this.stayActivated=a.stayActivated;this.focus=a.focus};GH.SavedFilterPicker.prototype.show=function(c){var b=AJS.$(this.selector);var d=new AJS.SingleSelect({element:b,width:300,removeOnUnSelect:true,itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:true,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(f){if(f.errors){var i=GH.Ajax._convertJiraErrors(f.errors);var h={searchName:this.selector};GH.Ajax.handleContextualErrors(i,h);return false}b.siblings(".ghx-error").remove();var g=[];AJS.$(f.filters).each(function(){g.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))});return g}}});this.singleSelect=d;var e=this.removeSingleSelect;if(!this.stayActivated){AJS.$(this.fieldSelector).blur(function(){e(d)})}if(_.isFunction(this.blurHandler)){AJS.$(this.fieldSelector).blur(this.blurHandler)}if(this.focus){AJS.$(this.fieldSelector).focus().select()}if(c){this.setSelection(c)}var a=this.selectHandler;if(!this.stayActivated){b.bind("selected",function(g,f){e(d);a(g,f)});b.bind("unselect",function(g,f){e(d);a(g,f)})}else{b.bind("selected",a);b.bind("unselect",a)}};GH.SavedFilterPicker.prototype.setSelection=function(a){this.singleSelect.setSelection(new AJS.ItemDescriptor({value:a.id.toString(),label:a.name,html:AJS.escapeHTML(String(a.name)),savedFilter:a,selected:true}))};GH.SavedFilterPicker.prototype.removeSingleSelect=function(a){a.hideSuggestions();a.disable()};GH.SavedFilterPicker.prototype.getElement=function(){return this.singleSelect.$field};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'includes/js/lib/jquery/jquery.keygen.js' */
(function(c,b){c.KeyGenerator=function(){var i=["THE","A","AN","AS","AND","OF","OR"],f={},h=function(k){return k.join("").length},j=function(k){return b.grep(k,function(m,l){return b.inArray(m,i)===-1})},g=function(l){var k="";b.each(l,function(m,n){k+=n.charAt(0)});return k},e=function(m){var l=false;var k;for(k=0;k<m.length;k++){if(d(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m},d=function(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};f[199]="C";f[231]="c";f[252]="u";f[251]="u";f[250]="u";f[249]="u";f[233]="e";f[234]="e";f[235]="e";f[232]="e";f[226]="a";f[228]="a";f[224]="a";f[229]="a";f[225]="a";f[239]="i";f[238]="i";f[236]="i";f[237]="i";f[196]="A";f[197]="A";f[201]="E";f[230]="ae";f[198]="Ae";f[244]="o";f[246]="o";f[242]="o";f[243]="o";f[220]="U";f[255]="Y";f[214]="O";f[241]="n";f[209]="N";return{generateKey:function(n,x){x=b.extend({},x);var m=(typeof x.desiredKeyLength=="number")?x.desiredKeyLength:4,t=(typeof x.maxKeyLength=="number")?x.maxKeyLength:Infinity;n=b.trim(n);if(!n){return""}var r=[];for(var q=0,w=n.length;q<w;q++){var k=f[n.charCodeAt(q)];r.push(k?k:n[q])}n=r.join("");var s=[];b.each(n.split(/\s+/),function(y,z){if(z){z=z.replace(/[^a-zA-Z]/g,"");z=z.toUpperCase();z.length&&s.push(z)}});if(m&&h(s)>m){s=j(s)}var u;if(s.length==0){u=""}else{if(s.length==1){var l=s[0],o=e(l);if(t<l.length||Math.abs(l.length-m)>=Math.abs(o.length-m)){u=o}else{u=l}}else{var v=h(s),p=g(s);if(t<v||Math.abs(v-m)>=Math.abs(p.length-m)){u=p}else{u=s.join("")}}}if(t&&u.length>t){u=u.substr(0,t)}return u}}};var a=c.KeyGenerator();b.fn.generateFrom=function(g,e){var d={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},f=b(this).first(),g=g.first(),e=b.extend({},d,e);(function(){var j=function(){return f.data("autosuggest")!==false},o=function(p){if(f.val()&&f.data("lastGeneratedValue")!==f.val()){f.data("autosuggest",false)}},n=function(p){f.data("lastGeneratedValue",p);f.val(p)},h=function(){o(f.val());k()},i=function(p){m(p,h)},m=function(s,q){var p=b(s.target),r;r=function(){l(s);q();if(p.is(":visible")){p.data("checkHook",setTimeout(r,e.timeoutMS))}};if(!p.data("checkHook")){p.data("checkHook",setTimeout(r,0))}},l=function(q){var p=b(q.target);clearTimeout(p.data("checkHook"));p.removeData("checkHook")},k=function(){if(j()){n(a.generateKey(g.val(),{desiredKeyLength:e.desiredKeyLength,maxKeyLength:e.maxKeyLength}))}};g.attr("maxlength",e.maxNameLength);f.attr("maxlength",e.maxKeyLength);f.css("text-transform","uppercase");if(document.activeElement&&document.activeElement===g[0]){i({target:g[0]})}g.focus(i);g.blur(l)})();return this}})(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:sidebar', location = 'includes/js/sidebar/create-board.js' */
AJS.$(function(){AJS.$("body").on("click",".js-create-board",function(a){a.preventDefault();GH.UserData.userConfig={canCreateProject:false,hasProjectsAccessible:true,hasFiltersAccessible:true};GH.StartWizardView.startWizard()})});;