;
/* module-key = 'com.almworks.jira.structure:wr-project-page', location = 'js/structure/project-page.js' */
ï»¿define("structure/page/project/ProjectPageDecorator","jquery almworks/jquery almworks/util/Util almworks/util/Template structure/page/project/ProjectPageSettingsDialog structure/page/PageWidgetConfig structure/widget/ui/layout/LayoutManager structure/widget/ui/panel/header/TwoPanelModeWrapper".split(" "),function(p,c,d,q,s,t,h,k){function g(){function g(){var b=l.getSettingsCell(),e=c("#s-uioptions");e.hide();b.pipeOnce(function(b){return! !b},function(){e.show();new s(d.extend({trigger:"#s-uioptions",settings:b,configuration:l.getConfigCell(),uploading:l.getUploadingCell()},r))})}function v(){var b=p(".aui-sidebar");if(b.length){var e=function(){try{m.forceLayout()}catch(b){}};b.on("_aui-internal-sidebar-collapse-end",e);b.on("_aui-internal-sidebar-expand-end",e)}}function n(b){l.getConfigCell().field("initialStructure.id").pipe(function(e){if(e){var c=b.master.getSpecController().getProjectPageSpec();null==c?d.error("no project page spec found"):(b.setPrimaryStructure({structureId:e}),b.layoutManager.switchLayout(h.TWO_PANEL_LAYOUT),b.setSecondaryStructure(c))}})}function f(){c("body").addClass("s-project-page");var b=c("#structure-board"),e=b.closest("#project-tab");e.length||(
e=b.closest(".aui-page-panel-content"));var f=b.prevAll().filter("h1,h2,h3:eq(0)"),a=f;f.length||(a=e.children().filter(".aui-page-header:eq(0)"),f=c("h1,h2,h3:eq(0)",a));f.length||(a=f=(new q("<h2>{s.iv.module.title}</h2>")).render$().prependTo(b.parent()));a.addClass("st-pcv-head");q.build("ul","li","a","span",function(b,f,a,c){return[b(".s-ops")(f()(a("#s-uioptions.s-atlas-cog",{style:"display:none",href:"#",title:"{s.w.uisettings.tooltip}"})(c()("{s.w.uisettings.title}"))))]}).render$().insertBefore(a);var d="";c.each(["padding-top","padding-right","padding-bottom","padding-left"],function(b,f){var a=0;try{a=parseInt(e.css(f),10)}catch(c){}""!==d&&(d+=" ");d+=0===a?"0":"-"+a+"px"});b.css("margin",d)}var u=c("#st-pcv-project-key").val();if(u){var r=d.deepFreeze({forProject:u,overrideTwoPanelMode:k.EXCLUDE}),l=new t(r),m;f();a.modes.PCV_PAGE="project";m=new(require("structure/widget/widget"))(c("#structure"),d.extend({height:"window",minRows:6,expandAnchors: !1,hideable: !0,showIssueDetails: !0},r));m.setInitiallySelectedIssueFromLocation();n(m);g();v()}else d.warn("no project key found")}var a=namespace("almworks.structure");g.initialize=function(){c(function(){new g})};
return g});define("structure/page/project/ProjectPageSettingsDialog","almworks/util/Template almworks/util/Util almworks/util/CellPresenter almworks/util/Objects almworks/util/Classes almworks/util/Cell structure/page/PageSettingsDialog".split(" "),function(p,c,d,q,s,t,h){function k(a){h.call(this,a)}var g=namespace("almworks.structure");c.extend(k.prototype,h.prototype,{_buildContent:function(a){var h=this;a.empty();a.append(p.load("structure.page.project.settings-dialog").render$({changeDefaultUrl:g.ajsbridge.localURL("secure/StructureProjectSettings.jspa?projectKey="+encodeURIComponent(this._options.forProject))}).saveBindings(this._$));a=this._options.configuration;var k=this._options.settings.field("autoSwitch").subCell(function(a){return "default"===a},function(a){return a?"default":"off"});new d.CheckboxPresenter(k,this._$.autoSwitch);a.field("projectAdmin").pipe(function(a){h._$.changeDefault.toggle(! !a)});var n=this._$.dialog.find(".s-uid-content input,label");a.field("userConfigurable").pipe(function(a){n.filter("label").toggleClass("s-disabled",!a);c.toggleAttr(n.filter("input"),"disabled",a?null:"disabled")});this._commonDialogInit()}});return k});window.almworks||(
window.almworks={});window.almworks.template||(window.almworks.template={});window.almworks.template["structure.page.project.settings-dialog"]='<div class="s-uiopts" data-bind-id="dialog">\n<form class="aui ajs-dirty-warning-exempt">\n<header><h2>{s.w.uisettings.title}</h2></header>\n<fieldset class="group s-uid-content">\n<div class="checkbox">\n<label><input class="checkbox" type="checkbox" id="s-uid-autoswitch" data-bind-id="autoSwitch"> {s.w.uisettings.project.autoswitch}  <span id="s-uid-defaultname">?</span></label>\n</div>\n</fieldset>\n<div class="buttons">\n<div id="s-uid-working-icon" data-bind-id="working"></div>\n<a data-bind-id="changeDefault" class="cancel" href="{changeDefaultUrl:html}">{s.w.uisettings.project.change-default}</a>\n<input class="button submit" data-bind-id="close" type="button" value="{s.w.uisettings.close}"/>\n</div>\n</form>\n</div>'; ;